import{l as x,r,j as e,ay as S,B as i,n as c,a as z,x as O,_ as n,g as b,I as R,L as T}from"./index-r-QkdGo8.js";import{C as A,a as B}from"./collapsible-D1PloOZy.js";import{T as E}from"./textarea-BfTwwrNp.js";import{B as L}from"./badge-648Ql83a.js";import{R as I,C as U,S as $}from"./send-C-sJwo32.js";import{M as D}from"./mail-CdMCmVJ4.js";import{T as F}from"./trash-2-gDlSgSh7.js";import{C as H}from"./chevron-right-B4JetiHC.js";import{f as J,h as V}from"./hr-DgTxfRwo.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=x("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=x("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=x("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),te=()=>{const[d,h]=r.useState([]),[w,N]=r.useState(!0),[y,p]=r.useState(!1),f=async(s=!1)=>{s&&p(!0);try{const t=await(await fetch("/api/messages")).json();h(Array.isArray(t)?t:[])}catch(a){console.error("Failed to fetch messages:",a),n.error("Neuspješno učitavanje poruka")}finally{N(!1),p(!1)}};r.useEffect(()=>{f()},[]);const k=async s=>{if(confirm("Jeste li sigurni da želite obrisati ovu poruku?"))try{const a=`/api/messages/${s}`;(await fetch(a,{method:"DELETE"})).ok&&(h(d.filter(t=>t.id!==s)),n.success("Poruka obrisana"))}catch{n.error("Brisanje nije uspjelo")}},C=({msg:s})=>{const[a,l]=r.useState("none"),[t,m]=r.useState(""),[u,M]=r.useState(""),[j,g]=r.useState(!1),P=async()=>{g(!0);try{const o=`/api/messages/${a}`;if((await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a==="reply"?{to:s.email,subject:"Re: Vaša poruka za Dišpet",body:t}:{to:u,subject:`Fwd: Poruka od ${s.name}`,body:t,originalMessage:s})})).ok)n.success(a==="reply"?"Odgovor poslan!":"Poruka proslijeđena!"),l("none");else throw new Error("Failed")}catch{n.error("Slanje nije uspjelo")}finally{g(!1)}};return e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(i,{variant:"ghost",size:"sm",className:c("h-10 rounded-full px-4 font-bold text-[10px] uppercase tracking-wider transition-all",a==="reply"?"bg-blue-600 text-white shadow-md shadow-blue-500/10":"text-blue-600 bg-blue-50/50 hover:bg-blue-100"),onClick:()=>{l(a==="reply"?"none":"reply"),m(`

Poštovani/a ${s.name},

Hvala na vašem upitu.

Srdačan pozdrav,
Dišpet Tim`)},children:[e.jsx(Z,{className:"w-3.5 h-3.5 mr-2"})," Odgovori"]}),e.jsxs(i,{variant:"ghost",size:"sm",className:c("h-10 rounded-full px-4 font-bold text-[10px] uppercase tracking-wider transition-all",a==="forward"?"bg-emerald-600 text-white shadow-md shadow-emerald-500/10":"text-emerald-600 bg-emerald-50/50 hover:bg-emerald-100"),onClick:()=>{l(a==="forward"?"none":"forward"),m("Ovdje prosljeđujem ovaj upit...")},children:[e.jsx(X,{className:"w-3.5 h-3.5 mr-2"})," Proslijedi"]}),e.jsxs(i,{variant:"ghost",size:"sm",className:"h-10 rounded-full px-4 font-bold text-[10px] uppercase tracking-wider text-rose-500 bg-rose-50/50 hover:bg-rose-600 hover:text-white transition-all ml-auto",onClick:()=>k(s.id),children:[e.jsx(F,{className:"w-3.5 h-3.5 mr-2"})," Briši"]})]}),e.jsx(A,{open:a!=="none",children:e.jsx(B,{children:e.jsxs("div",{className:"bg-slate-50/80 backdrop-blur-sm p-6 rounded-[2rem] border border-slate-100 space-y-4 animate-in fade-in slide-in-from-top-4 duration-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:a==="reply"?"Novi Odgovor":"Proslijedi Poruku"}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>l("none"),className:"h-6 w-6 p-0 rounded-full",children:e.jsx(H,{className:"w-4 h-4 rotate-90"})})]}),a==="forward"&&e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(b,{className:"text-[10px] font-bold uppercase text-slate-500 ml-1",children:"Proslijedi na Email"}),e.jsx(R,{placeholder:"ime@primjer.com",className:"h-10 rounded-full bg-white border-none shadow-sm font-bold text-sm px-6",value:u,onChange:o=>M(o.target.value)})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx(b,{className:"text-[10px] font-bold uppercase text-slate-500 ml-1",children:a==="reply"?"Vaš Odgovor":"Napomena uz prosljeđivanje"}),e.jsx(E,{className:"min-h-[180px] rounded-[1.5rem] bg-white border-none shadow-sm focus-visible:ring-primary/20 p-4 text-sm font-medium leading-relaxed resize-none",placeholder:"Napišite nešto...",value:t,onChange:o=>m(o.target.value)})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs(i,{onClick:P,disabled:j,className:c("h-11 px-8 rounded-full font-black text-[10px] uppercase tracking-widest shadow-lg transition-all",a==="reply"?"bg-blue-600 shadow-blue-500/10":"bg-emerald-600 shadow-emerald-500/10"),children:[j?e.jsx(T,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx($,{className:"w-4 h-4 mr-2"}),a==="reply"?"Pošalji Odgovor":"Proslijedi"]})})]})})})]})};return w?e.jsx("div",{className:"flex h-[50vh] w-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pulse",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(v,{className:"h-6 w-6 text-primary"})}),e.jsx("p",{className:"text-muted-foreground font-medium",children:"Učitavanje inboxa..."})]})}):e.jsx(S,{children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-slate-200/60 pb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-black font-heading text-slate-900 tracking-tight uppercase",children:"INBOX"}),e.jsx("p",{className:"text-slate-500 text-sm md:text-lg font-medium mt-1",children:"Upravljajte porukama posjetitelja i kupaca."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(L,{variant:"secondary",className:"px-4 h-12 rounded-full bg-slate-100 text-slate-900 font-bold border-none text-xs uppercase tracking-wider",children:["Ukupno: ",d.length]}),e.jsx(i,{variant:"outline",size:"icon",onClick:()=>f(!0),className:c("h-12 w-12 rounded-full border-slate-200 hover:bg-slate-50 transition-all",y?"animate-spin":""),children:e.jsx(I,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"space-y-6",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-center bg-white rounded-[3rem] border border-dashed border-slate-200 shadow-sm",children:[e.jsx("div",{className:"h-24 w-24 rounded-full bg-slate-50 flex items-center justify-center mb-8 shadow-inner",children:e.jsx(v,{className:"h-10 w-10 text-slate-300"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"VAŠ INBOX JE PRAZAN"}),e.jsx("p",{className:"text-slate-500 max-w-xs mt-3 font-medium leading-relaxed",children:"Nove poruke s kontakt forme pojavit će se ovdje automatski."})]}):e.jsx("div",{className:"grid gap-8",children:d.map(s=>e.jsx(z,{className:"group relative overflow-hidden transition-all duration-500 hover:shadow-xl hover:shadow-slate-300/40 border-none bg-white rounded-[3rem] shadow-lg shadow-slate-200/30",children:e.jsx("div",{className:"p-6 md:p-10",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10",children:[e.jsxs("div",{className:"flex items-start gap-6 min-w-[260px]",children:[e.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 shrink-0 rounded-3xl bg-slate-900 flex items-center justify-center text-white font-black text-2xl md:text-3xl shadow-2xl transform group-hover:-rotate-3 transition-transform",children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 tracking-tight leading-none h-6",children:s.name}),e.jsx("div",{className:"flex items-center gap-2 mt-2",children:e.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-50 px-2.5 py-1 rounded-full border border-slate-100",children:[e.jsx(U,{className:"w-3 h-3"}),J(new Date(s.date),"dd. MMM, HH:mm",{locale:V})]})})]}),e.jsxs("div",{className:"flex flex-col gap-2 pt-1",children:[e.jsxs("a",{href:`mailto:${s.email}`,className:"flex items-center gap-2 text-xs font-bold text-slate-500 hover:text-primary transition-colors truncate",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-slate-50 flex items-center justify-center border border-slate-100",children:e.jsx(D,{className:"w-3.5 h-3.5"})}),s.email]}),s.phone&&e.jsxs("a",{href:`tel:${s.phone}`,className:"flex items-center gap-2 text-xs font-bold text-slate-500 hover:text-primary transition-colors",children:[e.jsx("div",{className:"w-7 h-7 rounded-lg bg-slate-50 flex items-center justify-center border border-slate-100",children:e.jsx(O,{className:"w-3.5 h-3.5"})}),s.phone]})]})]})]}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col pt-2 lg:pl-10 lg:border-l lg:border-slate-100",children:[e.jsx("div",{className:"text-slate-600 font-medium leading-relaxed whitespace-pre-wrap text-base md:text-lg flex-1",children:s.message}),e.jsx(C,{msg:s})]})]})})},s.id))})})]})})};export{te as default};
