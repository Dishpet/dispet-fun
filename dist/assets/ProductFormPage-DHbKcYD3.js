import{l as $e,r as a,j as e,L as J,I as X,B as K,_ as Z,$ as es,a0 as st,a1 as W,a2 as Ae,a3 as F,a4 as q,a5 as ts,n as z,a6 as ss,g as U,a7 as as,a8 as at,a9 as rs,aa as ee,ab as rt,ac as ns,ad as os,ae as is,af as ls,ag as cs,ah as ds,ai as qe,aj as us,ak as ps,al as hs,am as ms,an as gs,ao as We,ap as fs,aq as xs,b as Fe,a as de,W as vs,Z as Ye,S as ys,ar as bs,F as ve,J as ye,Q as Qe,K as be,Y as ws,as as js,w as Ss,u as Ns,at as Cs}from"./index-W2Y9FM_P.js";import{S as Oe,a as ks,r as Ts,b as Is,c as Ps,u as nt,T as ot,d as it,e as ue,f as me,g as we}from"./tabs-BNlzEC5b.js";import{S as Rs}from"./send-Cq_VBmG3.js";import{C as Ke}from"./check-CfTzkyyi.js";import{A as lt}from"./arrow-left-BzGYUJKR.js";import{a as ct,C as Es}from"./chevron-up-DKln7c6E.js";import{M as Ze,U as _s}from"./MediaPicker-CGHyDWTK.js";import{R as Xe}from"./quill.snow-Czm8eP0P.js";import{B as dt}from"./badge-szy-dN0r.js";import{C as As,a as Os}from"./collapsible-CSEw5cIZ.js";import{R as Ms}from"./refresh-cw-Cq9AoVxd.js";import{S as je}from"./save-ojyIshI4.js";import{B as Ds}from"./minus-DkGJkQ7c.js";import"./palette-F7Q6X3Xk.js";import"./clock-C0DLQZjh.js";import"./chevron-right-DvwpGzzx.js";import"./isEqual-n0RJ0e-c.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=$e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=$e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=$e("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Vs=({onImageSelect:t,onCancel:n})=>{const[s,i]=a.useState(""),[l,u]=a.useState("cartoon"),[c,o]=a.useState(!1),[r,m]=a.useState(null),v=async y=>new Promise((x,d)=>{const g=new Image;g.crossOrigin="anonymous",g.onload=()=>{const b=document.createElement("canvas");b.width=g.width,b.height=g.height;const p=b.getContext("2d");p==null||p.drawImage(g,0,0),x(b.toDataURL("image/png"))},g.onerror=d,g.src=y}),f=async()=>{if(!s.trim()){Z.error("Molimo unesite opis dizajna");return}o(!0),m(null);try{const{refinePrompt:y,generateImageWithGemini:x}=await es(async()=>{const{refinePrompt:C,generateImageWithGemini:w}=await import("./client-CotKAJKT.js");return{refinePrompt:C,generateImageWithGemini:w}},[]),d=[Ts,Is,Ps],g=await Promise.all(d.map(C=>v(C)));Z.info("Refining prompt...");const b=await y(s);console.log("Refined:",b);const p=s||"striking a fun, energetic pose",h=`
ðŸŽ­ MASCOT CHARACTER "ROKO":
âš ï¸ MOST CRITICAL: The character's EXACT appearance is provided in the attached 3 reference images. 
ðŸ“¸ IMAGE 1 is the FACE reference. IMAGES 2-3 are for character/outfit reference.
Copy EXACT facial features from IMAGE 1 (Headshot). The face is the character's identity - get it EXACTLY right.
ðŸš« IMPORTANT: DO NOT include any shop logos, text emblems, or specific branding designs (like logo-5) that may be visible in the reference images. The character should have CLEAN clothing without any specific shop designs.
DO NOT use generic animal data. Roko is a character exactly as shown in references.
            `,_={"no-style":`Create a high-resolution version of the mascot character (ROKO) ${p} in a square aspect ratio. Focus purely on the character's likeness and the requested action.

${h}`,anime:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, energetic anime effects, cel-shaded coloring, motion streaks, and vibrant color accents.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear, character-based graphics, or modern pop-anime poster styles.

ANIME STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Anime-style effects, speed lines, glow accents`,synthwave:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, neon gradients, retro 80s colors, gridlines, glowing geometric fragments, and synthwave sun elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear, neon-retro artwork, or modern synthwave poster design.

SYNTHWAVE STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Neon, chrome, and synthwave design elements`,gta:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, flat comic-cell shading, sharp color blocks, and minimal background elements inspired by GTA loading screen artwork.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear or stylized GTA poster graphics.

GTA STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ GTA-style shading, poster elements, and color blocking
â€¢ Balanced contrast and strong outlines`,cyberpunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, holographic glows, neon lighting, electric fragments, cybernetic accents, and futuristic color palettes.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to futuristic streetwear or modern neon cyberpunk posters.

CYBERPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Cyberpunk neon, holographic shapes, electric effects`,cartoon:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, playful cartoon features, graffiti splashes, fun geometric fragments, and colorful dynamic highlights.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium mascot logos or modern cartoon streetwear graphics.

CARTOON MASCOT STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Cartoon-style exaggeration, graffiti accents`,"3d":`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector-inspired 3D shapes, bold outlines, soft cinematic lighting, glossy materials, and stylized shading.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to collectible 3D figurines or stylized 3D streetwear graphics.

3D STYLIZED STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Stylized 3D lighting and smooth materials`,retro:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, muted retro color palettes, halftone textures, and vintage geometric fragments.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by classic vintage posters and retro streetwear.

RETRO / VINTAGE STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Retro halftones, muted colors, vintage poster shapes`,inkpunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, aggressive ink strokes, splashes, neon drips, expressive brush fragments, and chaotic graffiti elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by expressive inkpunk and street-art fusion posters.

INKPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Ink strokes, splatters, drips, neon graffiti chaos`,steampunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, brass and copper tones, gears, goggles, mechanical fragments, and Victorian-inspired steampunk design elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium steampunk fashion and mechanical poster art.

STEAMPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Steampunk gears, pipes, goggles, metallic textures`,noir:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, heavy noir shadows, moody lighting, limited palette (black, white, red), and gritty comic-style textures.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by noir graphic novels and dark comic posters.

NOIR / DARK COMIC STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Noir shadows, dramatic lighting, gritty comic shading`,fantasy:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, magical glows, enchanted particles, ornate fantasy fragments, and dramatic lighting.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to heroic fantasy posters and RPG character art.

FANTASY / RPG STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Magical particles, glowing runes, fantasy lighting`,minimalist:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean geometric vector shapes, bold outlines, smooth curves, limited color palette, and modern design fragments.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to minimalist vector posters and premium logo-style art.

MINIMALIST MODERN VECTOR STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Minimal geometric shapes, clean flat colors`,"abstract-geometry":`Create a stunning, high-resolution print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Surround the mascot character with a dynamic explosion of abstract shapes, colorful liquid splashes, sharp geometric fragments, stars, and vibrant decorative particles. Style reference: explosive, colorful, high-contrast liquid-geometric fusion. 

The design should have a clear silhouette and strong central composition suitable for apparel printing.

ABSTRACT SHAPES & GEOMETRY STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Abstract geometric fragments, shards, and layered shapes`},V=_[l]||_.cartoon;Z.info("Generating with Nano Banana...");const H=await x(V,"{prompt}",g);H&&(m(H),Z.success("Generated successfully!"))}catch(y){console.error("Generation error:",y),Z.error(y.message||"Generiranje nije uspjelo. Provjerite API kljuÄ.")}finally{o(!1)}},S=async()=>{r&&t(r)};return e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-purple-100 rounded-full mb-2",children:e.jsx(Oe,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h2",{className:"text-2xl font-bold font-heading",children:"AI Design Studio"}),e.jsx("p",{className:"text-gray-500",children:"Describe your idea and let Nano Banana create it using Roko's reference images."})]}),e.jsx("div",{className:"bg-gray-50 p-3 sm:p-6 rounded-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"aspect-square w-full max-w-sm mx-auto bg-white rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center overflow-hidden relative",children:c?e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(J,{className:"w-10 h-10 animate-spin text-primary mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium animate-pulse",children:"Creating masterpiece..."})]}):r?e.jsx("img",{src:r,alt:"Generated",className:"w-full h-full object-contain"}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(Oe,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Driven by Gemini 2.5"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ks,{selectedStyle:l,onStyleSelect:u}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{value:s,onChange:y=>i(y.target.value),placeholder:"E.g. Roko playing saxophone on the moon...",className:"bg-white",onKeyDown:y=>y.key==="Enter"&&f()}),e.jsx(K,{onClick:f,disabled:c||!s.trim(),children:c?e.jsx(J,{className:"w-4 h-4 animate-spin"}):e.jsx(Rs,{className:"w-4 h-4"})})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx(K,{variant:"ghost",onClick:n,children:"Cancel"}),e.jsx("div",{className:"space-x-2",children:r&&e.jsxs(K,{onClick:S,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Use This Design"]})})]})]})};var Ne="Switch",[Hs,Wa]=st(Ne),[$s,qs]=Hs(Ne),ut=a.forwardRef((t,n)=>{const{__scopeSwitch:s,name:i,checked:l,defaultChecked:u,required:c,disabled:o,value:r="on",onCheckedChange:m,form:v,...f}=t,[S,y]=a.useState(null),x=W(n,h=>y(h)),d=a.useRef(!1),g=S?v||!!S.closest("form"):!0,[b,p]=Ae({prop:l,defaultProp:u??!1,onChange:m,caller:Ne});return e.jsxs($s,{scope:s,checked:b,disabled:o,children:[e.jsx(F.button,{type:"button",role:"switch","aria-checked":b,"aria-required":c,"data-state":gt(b),"data-disabled":o?"":void 0,disabled:o,value:r,...f,ref:x,onClick:q(t.onClick,h=>{p(_=>!_),g&&(d.current=h.isPropagationStopped(),d.current||h.stopPropagation())})}),g&&e.jsx(mt,{control:S,bubbles:!d.current,name:i,value:r,checked:b,required:c,disabled:o,form:v,style:{transform:"translateX(-100%)"}})]})});ut.displayName=Ne;var pt="SwitchThumb",ht=a.forwardRef((t,n)=>{const{__scopeSwitch:s,...i}=t,l=qs(pt,s);return e.jsx(F.span,{"data-state":gt(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:n})});ht.displayName=pt;var Fs="SwitchBubbleInput",mt=a.forwardRef(({__scopeSwitch:t,control:n,checked:s,bubbles:i=!0,...l},u)=>{const c=a.useRef(null),o=W(c,u),r=nt(s),m=ts(n);return a.useEffect(()=>{const v=c.current;if(!v)return;const f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(r!==s&&y){const x=new Event("click",{bubbles:i});y.call(v,s),v.dispatchEvent(x)}},[r,s,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:o,style:{...l.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});mt.displayName=Fs;function gt(t){return t?"checked":"unchecked"}var ft=ut,Ks=ht;const Ge=a.forwardRef(({className:t,...n},s)=>e.jsx(ft,{className:z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...n,ref:s,children:e.jsx(Ks,{className:z("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ge.displayName=ft.displayName;const Gs="/assets/hoodie-string-black%20(2)-6s5mbvA2.png",zs="/assets/hoodie-string-black%20(4)-BeRhyIdq.png",Ws="/assets/hoodie-string-grey%20(3)-Bg0TWnno.png",Ys="/assets/hoodie-string-grey%20(4)-C-YDg0Fg.png",Qs=t=>new Promise((n,s)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const l=document.createElement("canvas");l.width=i.width,l.height=i.height;const u=l.getContext("2d");if(!u){s(new Error("Could not get canvas context"));return}u.drawImage(i,0,0);const c=u.getImageData(0,0,l.width,l.height),o=c.data;for(let r=0;r<o.length;r+=4){const m=o[r],v=o[r+1],f=o[r+2];m<15&&v<15&&f<15&&(o[r+3]=0)}u.putImageData(c,0,0),n(l.toDataURL("image/png"))},i.onerror=l=>s(l),i.src=t}),Zs=({generatedDesign:t,onConfirm:n,onBack:s})=>{const[i,l]=a.useState(null),[u,c]=a.useState("black"),[o,r]=a.useState("front"),[m,v]=a.useState(!1),[f,S]=a.useState({x:50,y:40}),[y,x]=a.useState(30),[d,g]=a.useState({x:50,y:20}),[b,p]=a.useState(15),h=a.useRef(null);a.useEffect(()=>{(async()=>{try{Z.info("Nano Banana processing background...");const N=await Qs(t);l(N),Z.success("Background removed!")}catch(N){console.error(N),Z.error("Failed to remove background"),l(t)}})()},[t]);const _=w=>u==="black"?w==="front"?Gs:zs:w==="front"?Ws:Ys,V=async()=>{if(!h.current)return;const w=h.current.toDataURL("image/png");n(w)};a.useEffect(()=>{if(!h.current||!i)return;const w=h.current,N=w.getContext("2d");if(!N)return;const I=new Image;I.crossOrigin="anonymous",I.src=_(o==="front"?"front":"back"),I.onload=()=>{w.width=I.width,w.height=I.height,N.drawImage(I,0,0);const D=new Image;D.src=i,D.onload=()=>{const T=I.width*y/100,P=T*D.height/D.width,$=I.width*f.x/100-T/2,k=I.height*f.y/100-P/2;N.drawImage(D,$,k,T,P),N.strokeStyle="rgba(0, 255, 0, 0.5)",N.lineWidth=2,N.strokeRect($,k,T,P)}}},[i,u,o,f,y]);const[H,C]=a.useState("front");return a.useEffect(()=>{if(!h.current||!i)return;const w=h.current,N=w.getContext("2d");if(!N)return;const I=new Image;I.src=_(H),I.onload=()=>{if(w.width=I.width,w.height=I.height,N.drawImage(I,0,0),H===o){const P=new Image;P.src=i,P.onload=()=>{D(N,P,f,y,!0)}}else if(m){const P=new Image;P.src=ss,P.onload=()=>{D(N,P,d,b,!1)}}};const D=(T,P,$,k,A)=>{const O=T.canvas.width*k/100,B=O*P.height/P.width,Y=T.canvas.width*$.x/100-O/2,ie=T.canvas.height*$.y/100-B/2;T.drawImage(P,Y,ie,O,B),T.strokeStyle=A?"rgba(0, 200, 255, 0.5)":"rgba(255, 100, 100, 0.5)",T.setLineDash([5,5]),T.lineWidth=3,T.strokeRect(Y,ie,O,B),T.setLineDash([])}},[H,i,u,o,m,f,y,d,b]),i?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 h-full max-h-[80vh]",children:[e.jsxs("div",{className:"md:col-span-1 space-y-6 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"1. Hoodie Options"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:`p-2 border rounded cursor-pointer text-center ${u==="black"?"ring-2 ring-primary border-primary":"hover:bg-white"}`,onClick:()=>c("black"),children:[e.jsx("div",{className:"w-6 h-6 bg-black rounded-full mx-auto mb-1 border border-white"}),e.jsx("span",{className:"text-xs font-medium",children:"Black"})]}),e.jsxs("div",{className:`p-2 border rounded cursor-pointer text-center ${u==="grey"?"ring-2 ring-primary border-primary":"hover:bg-white"}`,onClick:()=>c("grey"),children:[e.jsx("div",{className:"w-6 h-6 bg-gray-400 rounded-full mx-auto mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Grey"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"2. Design Placement"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{variant:o==="front"?"default":"outline",onClick:()=>{r("front"),C("front")},className:"flex-1",children:"Front"}),e.jsx(K,{variant:o==="back"?"default":"outline",onClick:()=>{r("back"),C("back")},className:"flex-1",children:"Back"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(U,{children:["Add Logo to ",o==="front"?"Back":"Front","?"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Adds 1web-logo-white"})]}),e.jsx(Ge,{checked:m,onCheckedChange:v})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"3. Adjustments"}),e.jsxs(ot,{value:H,onValueChange:w=>C(w),children:[e.jsxs(it,{className:"w-full",children:[e.jsx(ue,{value:"front",className:"flex-1",children:"Edit Front"}),e.jsx(ue,{value:"back",className:"flex-1",children:"Edit Back"})]}),e.jsx("div",{className:"pt-4 space-y-4",children:H===o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Editing: Main Design"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{children:"Size"})," ",e.jsxs("span",{className:"text-xs",children:[y,"%"]})]}),e.jsx(me,{value:[y],onValueChange:([w])=>x(w),min:5,max:80,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{children:"Vertical Position"})," ",e.jsxs("span",{className:"text-xs",children:[f.y,"%"]})]}),e.jsx(me,{value:[f.y],onValueChange:([w])=>S(N=>({...N,y:w})),min:0,max:100,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{children:"Horizontal Position"})," ",e.jsxs("span",{className:"text-xs",children:[f.x,"%"]})]}),e.jsx(me,{value:[f.x],onValueChange:([w])=>S(N=>({...N,x:w})),min:0,max:100,step:1})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium text-red-600",children:"Editing: Logo Layer"}),m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{children:"Size"})," ",e.jsxs("span",{className:"text-xs",children:[b,"%"]})]}),e.jsx(me,{value:[b],onValueChange:([w])=>p(w),min:2,max:40,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(U,{children:"Vertical Position"})," ",e.jsxs("span",{className:"text-xs",children:[d.y,"%"]})]}),e.jsx(me,{value:[d.y],onValueChange:([w])=>g(N=>({...N,y:w})),min:0,max:100,step:1})]})]}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"Logo disabled"})]})})]})]})]}),e.jsxs("div",{className:"md:col-span-2 bg-gray-100 rounded-xl flex items-center justify-center p-4 relative border shadow-inner",children:[e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsx("canvas",{ref:h,className:"max-w-full max-h-full shadow-2xl rounded"})}),e.jsxs("div",{className:"absolute bottom-6 right-6 flex gap-2",children:[e.jsxs(K,{variant:"secondary",onClick:s,children:[e.jsx(lt,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsxs(K,{onClick:V,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"})," Create Product"]})]})]})]}):e.jsx("div",{className:"p-10 text-center",children:"Processing Design..."})};var Xs=[" ","Enter","ArrowUp","ArrowDown"],Js=[" ","Enter"],ne="Select",[Ce,ke,ea]=as(ne),[pe,Ya]=st(ne,[ea,at]),Te=at(),[ta,te]=pe(ne),[sa,aa]=pe(ne),xt=t=>{const{__scopeSelect:n,children:s,open:i,defaultOpen:l,onOpenChange:u,value:c,defaultValue:o,onValueChange:r,dir:m,name:v,autoComplete:f,disabled:S,required:y,form:x}=t,d=Te(n),[g,b]=a.useState(null),[p,h]=a.useState(null),[_,V]=a.useState(!1),H=fs(m),[C,w]=Ae({prop:i,defaultProp:l??!1,onChange:u,caller:ne}),[N,I]=Ae({prop:c,defaultProp:o,onChange:r,caller:ne}),D=a.useRef(null),T=g?x||!!g.closest("form"):!0,[P,$]=a.useState(new Set),k=Array.from(P).map(A=>A.props.value).join(";");return e.jsx(xs,{...d,children:e.jsxs(ta,{required:y,scope:n,trigger:g,onTriggerChange:b,valueNode:p,onValueNodeChange:h,valueNodeHasChildren:_,onValueNodeHasChildrenChange:V,contentId:qe(),value:N,onValueChange:I,open:C,onOpenChange:w,dir:H,triggerPointerDownPosRef:D,disabled:S,children:[e.jsx(Ce.Provider,{scope:n,children:e.jsx(sa,{scope:t.__scopeSelect,onNativeOptionAdd:a.useCallback(A=>{$(O=>new Set(O).add(A))},[]),onNativeOptionRemove:a.useCallback(A=>{$(O=>{const B=new Set(O);return B.delete(A),B})},[]),children:s})}),T?e.jsxs(Ht,{"aria-hidden":!0,required:y,tabIndex:-1,name:v,autoComplete:f,value:N,onChange:A=>I(A.target.value),disabled:S,form:x,children:[N===void 0?e.jsx("option",{value:""}):null,Array.from(P)]},k):null]})})};xt.displayName=ne;var vt="SelectTrigger",yt=a.forwardRef((t,n)=>{const{__scopeSelect:s,disabled:i=!1,...l}=t,u=Te(s),c=te(vt,s),o=c.disabled||i,r=W(n,c.onTriggerChange),m=ke(s),v=a.useRef("touch"),[f,S,y]=qt(d=>{const g=m().filter(h=>!h.disabled),b=g.find(h=>h.value===c.value),p=Ft(g,d,b);p!==void 0&&c.onValueChange(p.value)}),x=d=>{o||(c.onOpenChange(!0),y()),d&&(c.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return e.jsx(rs,{asChild:!0,...u,children:e.jsx(F.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":$t(c.value)?"":void 0,...l,ref:r,onClick:q(l.onClick,d=>{d.currentTarget.focus(),v.current!=="mouse"&&x(d)}),onPointerDown:q(l.onPointerDown,d=>{v.current=d.pointerType;const g=d.target;g.hasPointerCapture(d.pointerId)&&g.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(x(d),d.preventDefault())}),onKeyDown:q(l.onKeyDown,d=>{const g=f.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&S(d.key),!(g&&d.key===" ")&&Xs.includes(d.key)&&(x(),d.preventDefault())})})})});yt.displayName=vt;var bt="SelectValue",wt=a.forwardRef((t,n)=>{const{__scopeSelect:s,className:i,style:l,children:u,placeholder:c="",...o}=t,r=te(bt,s),{onValueNodeHasChildrenChange:m}=r,v=u!==void 0,f=W(n,r.onValueNodeChange);return ee(()=>{m(v)},[m,v]),e.jsx(F.span,{...o,ref:f,style:{pointerEvents:"none"},children:$t(r.value)?e.jsx(e.Fragment,{children:c}):u})});wt.displayName=bt;var ra="SelectIcon",jt=a.forwardRef((t,n)=>{const{__scopeSelect:s,children:i,...l}=t;return e.jsx(F.span,{"aria-hidden":!0,...l,ref:n,children:i||"â–¼"})});jt.displayName=ra;var na="SelectPortal",St=t=>e.jsx(ms,{asChild:!0,...t});St.displayName=na;var oe="SelectContent",Nt=a.forwardRef((t,n)=>{const s=te(oe,t.__scopeSelect),[i,l]=a.useState();if(ee(()=>{l(new DocumentFragment)},[]),!s.open){const u=i;return u?rt.createPortal(e.jsx(Ct,{scope:t.__scopeSelect,children:e.jsx(Ce.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),u):null}return e.jsx(kt,{...t,ref:n})});Nt.displayName=oe;var Q=10,[Ct,se]=pe(oe),oa="SelectContentImpl",ia=gs("SelectContent.RemoveScroll"),kt=a.forwardRef((t,n)=>{const{__scopeSelect:s,position:i="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,side:o,sideOffset:r,align:m,alignOffset:v,arrowPadding:f,collisionBoundary:S,collisionPadding:y,sticky:x,hideWhenDetached:d,avoidCollisions:g,...b}=t,p=te(oe,s),[h,_]=a.useState(null),[V,H]=a.useState(null),C=W(n,j=>_(j)),[w,N]=a.useState(null),[I,D]=a.useState(null),T=ke(s),[P,$]=a.useState(!1),k=a.useRef(!1);a.useEffect(()=>{if(h)return ns(h)},[h]),os();const A=a.useCallback(j=>{const[L,...G]=T().map(E=>E.ref.current),[M]=G.slice(-1),R=document.activeElement;for(const E of j)if(E===R||(E==null||E.scrollIntoView({block:"nearest"}),E===L&&V&&(V.scrollTop=0),E===M&&V&&(V.scrollTop=V.scrollHeight),E==null||E.focus(),document.activeElement!==R))return},[T,V]),O=a.useCallback(()=>A([w,h]),[A,w,h]);a.useEffect(()=>{P&&O()},[P,O]);const{onOpenChange:B,triggerPointerDownPosRef:Y}=p;a.useEffect(()=>{if(h){let j={x:0,y:0};const L=M=>{var R,E;j={x:Math.abs(Math.round(M.pageX)-(((R=Y.current)==null?void 0:R.x)??0)),y:Math.abs(Math.round(M.pageY)-(((E=Y.current)==null?void 0:E.y)??0))}},G=M=>{j.x<=10&&j.y<=10?M.preventDefault():h.contains(M.target)||B(!1),document.removeEventListener("pointermove",L),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",G,{capture:!0})}}},[h,B,Y]),a.useEffect(()=>{const j=()=>B(!1);return window.addEventListener("blur",j),window.addEventListener("resize",j),()=>{window.removeEventListener("blur",j),window.removeEventListener("resize",j)}},[B]);const[ie,fe]=qt(j=>{const L=T().filter(R=>!R.disabled),G=L.find(R=>R.ref.current===document.activeElement),M=Ft(L,j,G);M&&setTimeout(()=>M.ref.current.focus())}),Ie=a.useCallback((j,L,G)=>{const M=!k.current&&!G;(p.value!==void 0&&p.value===L||M)&&(N(j),M&&(k.current=!0))},[p.value]),Pe=a.useCallback(()=>h==null?void 0:h.focus(),[h]),le=a.useCallback((j,L,G)=>{const M=!k.current&&!G;(p.value!==void 0&&p.value===L||M)&&D(j)},[p.value]),xe=i==="popper"?Me:Tt,he=xe===Me?{side:o,sideOffset:r,align:m,alignOffset:v,arrowPadding:f,collisionBoundary:S,collisionPadding:y,sticky:x,hideWhenDetached:d,avoidCollisions:g}:{};return e.jsx(Ct,{scope:s,content:h,viewport:V,onViewportChange:H,itemRefCallback:Ie,selectedItem:w,onItemLeave:Pe,itemTextRefCallback:le,focusSelectedItem:O,selectedItemText:I,position:i,isPositioned:P,searchRef:ie,children:e.jsx(is,{as:ia,allowPinchZoom:!0,children:e.jsx(ls,{asChild:!0,trapped:p.open,onMountAutoFocus:j=>{j.preventDefault()},onUnmountAutoFocus:q(l,j=>{var L;(L=p.trigger)==null||L.focus({preventScroll:!0}),j.preventDefault()}),children:e.jsx(cs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:j=>j.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:e.jsx(xe,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:j=>j.preventDefault(),...b,...he,onPlaced:()=>$(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:q(b.onKeyDown,j=>{const L=j.ctrlKey||j.altKey||j.metaKey;if(j.key==="Tab"&&j.preventDefault(),!L&&j.key.length===1&&fe(j.key),["ArrowUp","ArrowDown","Home","End"].includes(j.key)){let M=T().filter(R=>!R.disabled).map(R=>R.ref.current);if(["ArrowUp","End"].includes(j.key)&&(M=M.slice().reverse()),["ArrowUp","ArrowDown"].includes(j.key)){const R=j.target,E=M.indexOf(R);M=M.slice(E+1)}setTimeout(()=>A(M)),j.preventDefault()}})})})})})})});kt.displayName=oa;var la="SelectItemAlignedPosition",Tt=a.forwardRef((t,n)=>{const{__scopeSelect:s,onPlaced:i,...l}=t,u=te(oe,s),c=se(oe,s),[o,r]=a.useState(null),[m,v]=a.useState(null),f=W(n,C=>v(C)),S=ke(s),y=a.useRef(!1),x=a.useRef(!0),{viewport:d,selectedItem:g,selectedItemText:b,focusSelectedItem:p}=c,h=a.useCallback(()=>{if(u.trigger&&u.valueNode&&o&&m&&d&&g&&b){const C=u.trigger.getBoundingClientRect(),w=m.getBoundingClientRect(),N=u.valueNode.getBoundingClientRect(),I=b.getBoundingClientRect();if(u.dir!=="rtl"){const R=I.left-w.left,E=N.left-R,ae=C.left-E,re=C.width+ae,Re=Math.max(re,w.width),Ee=window.innerWidth-Q,_e=We(E,[Q,Math.max(Q,Ee-Re)]);o.style.minWidth=re+"px",o.style.left=_e+"px"}else{const R=w.right-I.right,E=window.innerWidth-N.right-R,ae=window.innerWidth-C.right-E,re=C.width+ae,Re=Math.max(re,w.width),Ee=window.innerWidth-Q,_e=We(E,[Q,Math.max(Q,Ee-Re)]);o.style.minWidth=re+"px",o.style.right=_e+"px"}const D=S(),T=window.innerHeight-Q*2,P=d.scrollHeight,$=window.getComputedStyle(m),k=parseInt($.borderTopWidth,10),A=parseInt($.paddingTop,10),O=parseInt($.borderBottomWidth,10),B=parseInt($.paddingBottom,10),Y=k+A+P+B+O,ie=Math.min(g.offsetHeight*5,Y),fe=window.getComputedStyle(d),Ie=parseInt(fe.paddingTop,10),Pe=parseInt(fe.paddingBottom,10),le=C.top+C.height/2-Q,xe=T-le,he=g.offsetHeight/2,j=g.offsetTop+he,L=k+A+j,G=Y-L;if(L<=le){const R=D.length>0&&g===D[D.length-1].ref.current;o.style.bottom="0px";const E=m.clientHeight-d.offsetTop-d.offsetHeight,ae=Math.max(xe,he+(R?Pe:0)+E+O),re=L+ae;o.style.height=re+"px"}else{const R=D.length>0&&g===D[0].ref.current;o.style.top="0px";const ae=Math.max(le,k+d.offsetTop+(R?Ie:0)+he)+G;o.style.height=ae+"px",d.scrollTop=L-le+d.offsetTop}o.style.margin=`${Q}px 0`,o.style.minHeight=ie+"px",o.style.maxHeight=T+"px",i==null||i(),requestAnimationFrame(()=>y.current=!0)}},[S,u.trigger,u.valueNode,o,m,d,g,b,u.dir,i]);ee(()=>h(),[h]);const[_,V]=a.useState();ee(()=>{m&&V(window.getComputedStyle(m).zIndex)},[m]);const H=a.useCallback(C=>{C&&x.current===!0&&(h(),p==null||p(),x.current=!1)},[h,p]);return e.jsx(da,{scope:s,contentWrapper:o,shouldExpandOnScrollRef:y,onScrollButtonChange:H,children:e.jsx("div",{ref:r,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:e.jsx(F.div,{...l,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});Tt.displayName=la;var ca="SelectPopperPosition",Me=a.forwardRef((t,n)=>{const{__scopeSelect:s,align:i="start",collisionPadding:l=Q,...u}=t,c=Te(s);return e.jsx(ds,{...c,...u,ref:n,align:i,collisionPadding:l,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Me.displayName=ca;var[da,ze]=pe(oe,{}),De="SelectViewport",It=a.forwardRef((t,n)=>{const{__scopeSelect:s,nonce:i,...l}=t,u=se(De,s),c=ze(De,s),o=W(n,u.onViewportChange),r=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Ce.Slot,{scope:s,children:e.jsx(F.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:q(l.onScroll,m=>{const v=m.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:S}=c;if(S!=null&&S.current&&f){const y=Math.abs(r.current-v.scrollTop);if(y>0){const x=window.innerHeight-Q*2,d=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),b=Math.max(d,g);if(b<x){const p=b+y,h=Math.min(x,p),_=p-h;f.style.height=h+"px",f.style.bottom==="0px"&&(v.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}r.current=v.scrollTop})})})]})});It.displayName=De;var Pt="SelectGroup",[ua,pa]=pe(Pt),ha=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t,l=qe();return e.jsx(ua,{scope:s,id:l,children:e.jsx(F.div,{role:"group","aria-labelledby":l,...i,ref:n})})});ha.displayName=Pt;var Rt="SelectLabel",Et=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t,l=pa(Rt,s);return e.jsx(F.div,{id:l.id,...i,ref:n})});Et.displayName=Rt;var Se="SelectItem",[ma,_t]=pe(Se),At=a.forwardRef((t,n)=>{const{__scopeSelect:s,value:i,disabled:l=!1,textValue:u,...c}=t,o=te(Se,s),r=se(Se,s),m=o.value===i,[v,f]=a.useState(u??""),[S,y]=a.useState(!1),x=W(n,p=>{var h;return(h=r.itemRefCallback)==null?void 0:h.call(r,p,i,l)}),d=qe(),g=a.useRef("touch"),b=()=>{l||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(ma,{scope:s,value:i,disabled:l,textId:d,isSelected:m,onItemTextChange:a.useCallback(p=>{f(h=>h||((p==null?void 0:p.textContent)??"").trim())},[]),children:e.jsx(Ce.ItemSlot,{scope:s,value:i,disabled:l,textValue:v,children:e.jsx(F.div,{role:"option","aria-labelledby":d,"data-highlighted":S?"":void 0,"aria-selected":m&&S,"data-state":m?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...c,ref:x,onFocus:q(c.onFocus,()=>y(!0)),onBlur:q(c.onBlur,()=>y(!1)),onClick:q(c.onClick,()=>{g.current!=="mouse"&&b()}),onPointerUp:q(c.onPointerUp,()=>{g.current==="mouse"&&b()}),onPointerDown:q(c.onPointerDown,p=>{g.current=p.pointerType}),onPointerMove:q(c.onPointerMove,p=>{var h;g.current=p.pointerType,l?(h=r.onItemLeave)==null||h.call(r):g.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:q(c.onPointerLeave,p=>{var h;p.currentTarget===document.activeElement&&((h=r.onItemLeave)==null||h.call(r))}),onKeyDown:q(c.onKeyDown,p=>{var _;((_=r.searchRef)==null?void 0:_.current)!==""&&p.key===" "||(Js.includes(p.key)&&b(),p.key===" "&&p.preventDefault())})})})})});At.displayName=Se;var ge="SelectItemText",Ot=a.forwardRef((t,n)=>{const{__scopeSelect:s,className:i,style:l,...u}=t,c=te(ge,s),o=se(ge,s),r=_t(ge,s),m=aa(ge,s),[v,f]=a.useState(null),S=W(n,b=>f(b),r.onItemTextChange,b=>{var p;return(p=o.itemTextRefCallback)==null?void 0:p.call(o,b,r.value,r.disabled)}),y=v==null?void 0:v.textContent,x=a.useMemo(()=>e.jsx("option",{value:r.value,disabled:r.disabled,children:y},r.value),[r.disabled,r.value,y]),{onNativeOptionAdd:d,onNativeOptionRemove:g}=m;return ee(()=>(d(x),()=>g(x)),[d,g,x]),e.jsxs(e.Fragment,{children:[e.jsx(F.span,{id:r.textId,...u,ref:S}),r.isSelected&&c.valueNode&&!c.valueNodeHasChildren?rt.createPortal(u.children,c.valueNode):null]})});Ot.displayName=ge;var Mt="SelectItemIndicator",Dt=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t;return _t(Mt,s).isSelected?e.jsx(F.span,{"aria-hidden":!0,...i,ref:n}):null});Dt.displayName=Mt;var Le="SelectScrollUpButton",Lt=a.forwardRef((t,n)=>{const s=se(Le,t.__scopeSelect),i=ze(Le,t.__scopeSelect),[l,u]=a.useState(!1),c=W(n,i.onScrollButtonChange);return ee(()=>{if(s.viewport&&s.isPositioned){let o=function(){const m=r.scrollTop>0;u(m)};const r=s.viewport;return o(),r.addEventListener("scroll",o),()=>r.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),l?e.jsx(Bt,{...t,ref:c,onAutoScroll:()=>{const{viewport:o,selectedItem:r}=s;o&&r&&(o.scrollTop=o.scrollTop-r.offsetHeight)}}):null});Lt.displayName=Le;var Ue="SelectScrollDownButton",Ut=a.forwardRef((t,n)=>{const s=se(Ue,t.__scopeSelect),i=ze(Ue,t.__scopeSelect),[l,u]=a.useState(!1),c=W(n,i.onScrollButtonChange);return ee(()=>{if(s.viewport&&s.isPositioned){let o=function(){const m=r.scrollHeight-r.clientHeight,v=Math.ceil(r.scrollTop)<m;u(v)};const r=s.viewport;return o(),r.addEventListener("scroll",o),()=>r.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),l?e.jsx(Bt,{...t,ref:c,onAutoScroll:()=>{const{viewport:o,selectedItem:r}=s;o&&r&&(o.scrollTop=o.scrollTop+r.offsetHeight)}}):null});Ut.displayName=Ue;var Bt=a.forwardRef((t,n)=>{const{__scopeSelect:s,onAutoScroll:i,...l}=t,u=se("SelectScrollButton",s),c=a.useRef(null),o=ke(s),r=a.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return a.useEffect(()=>()=>r(),[r]),ee(()=>{var v;const m=o().find(f=>f.ref.current===document.activeElement);(v=m==null?void 0:m.ref.current)==null||v.scrollIntoView({block:"nearest"})},[o]),e.jsx(F.div,{"aria-hidden":!0,...l,ref:n,style:{flexShrink:0,...l.style},onPointerDown:q(l.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:q(l.onPointerMove,()=>{var m;(m=u.onItemLeave)==null||m.call(u),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:q(l.onPointerLeave,()=>{r()})})}),ga="SelectSeparator",Vt=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t;return e.jsx(F.div,{"aria-hidden":!0,...i,ref:n})});Vt.displayName=ga;var Be="SelectArrow",fa=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t,l=Te(s),u=te(Be,s),c=se(Be,s);return u.open&&c.position==="popper"?e.jsx(us,{...l,...i,ref:n}):null});fa.displayName=Be;var xa="SelectBubbleInput",Ht=a.forwardRef(({__scopeSelect:t,value:n,...s},i)=>{const l=a.useRef(null),u=W(i,l),c=nt(n);return a.useEffect(()=>{const o=l.current;if(!o)return;const r=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(r,"value").set;if(c!==n&&v){const f=new Event("change",{bubbles:!0});v.call(o,n),o.dispatchEvent(f)}},[c,n]),e.jsx(F.select,{...s,style:{...ps,...s.style},ref:u,defaultValue:n})});Ht.displayName=xa;function $t(t){return t===""||t===void 0}function qt(t){const n=hs(t),s=a.useRef(""),i=a.useRef(0),l=a.useCallback(c=>{const o=s.current+c;n(o),function r(m){s.current=m,window.clearTimeout(i.current),m!==""&&(i.current=window.setTimeout(()=>r(""),1e3))}(o)},[n]),u=a.useCallback(()=>{s.current="",window.clearTimeout(i.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(i.current),[]),[s,l,u]}function Ft(t,n,s){const l=n.length>1&&Array.from(n).every(m=>m===n[0])?n[0]:n,u=s?t.indexOf(s):-1;let c=va(t,Math.max(u,0));l.length===1&&(c=c.filter(m=>m!==s));const r=c.find(m=>m.textValue.toLowerCase().startsWith(l.toLowerCase()));return r!==s?r:void 0}function va(t,n){return t.map((s,i)=>t[(n+i)%t.length])}var ya=xt,Kt=yt,ba=wt,wa=jt,ja=St,Gt=Nt,Sa=It,zt=Et,Wt=At,Na=Ot,Ca=Dt,Yt=Lt,Qt=Ut,Zt=Vt;const Je=ya,et=ba,Ve=a.forwardRef(({className:t,children:n,...s},i)=>e.jsxs(Kt,{ref:i,className:z("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[n,e.jsx(wa,{asChild:!0,children:e.jsx(ct,{className:"h-4 w-4 opacity-50"})})]}));Ve.displayName=Kt.displayName;const Xt=a.forwardRef(({className:t,...n},s)=>e.jsx(Yt,{ref:s,className:z("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(Es,{className:"h-4 w-4"})}));Xt.displayName=Yt.displayName;const Jt=a.forwardRef(({className:t,...n},s)=>e.jsx(Qt,{ref:s,className:z("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(ct,{className:"h-4 w-4"})}));Jt.displayName=Qt.displayName;const He=a.forwardRef(({className:t,children:n,position:s="popper",...i},l)=>e.jsx(ja,{children:e.jsxs(Gt,{ref:l,className:z("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...i,children:[e.jsx(Xt,{}),e.jsx(Sa,{className:z("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),e.jsx(Jt,{})]})}));He.displayName=Gt.displayName;const ka=a.forwardRef(({className:t,...n},s)=>e.jsx(zt,{ref:s,className:z("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n}));ka.displayName=zt.displayName;const ce=a.forwardRef(({className:t,children:n,...s},i)=>e.jsxs(Wt,{ref:i,className:z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ca,{children:e.jsx(Ke,{className:"h-4 w-4"})})}),e.jsx(Na,{children:n})]}));ce.displayName=Wt.displayName;const Ta=a.forwardRef(({className:t,...n},s)=>e.jsx(Zt,{ref:s,className:z("-mx-1 my-1 h-px bg-muted",t),...n}));Ta.displayName=Zt.displayName;const tt={Crna:"#231f20",Siva:"#d1d5db",Tirkizna:"#00ab98",Cijan:"#00aeef",Plava:"#387bbf",LjubiÄasta:"#8358a4",Bijela:"#ffffff",Roza:"#e78fab",Mint:"#a1d7c0"},Ia=({productId:t})=>{const[n,s]=a.useState([]),[i,l]=a.useState(!1),[u,c]=a.useState(!1),{toast:o}=Fe(),[r,m]=a.useState({}),v=async()=>{l(!0);try{const x=await vs(t);s(x);const d={};x.forEach(g=>{d[g.id]={regular_price:g.regular_price,stock_quantity:g.stock_quantity??0,manage_stock:g.manage_stock??!0,sale_price:g.sale_price}}),m(d)}catch(x){console.error(x),o({title:"Error",description:"Failed to load variations",variant:"destructive"})}finally{l(!1)}};a.useEffect(()=>{t&&v()},[t]);const f=(x,d,g)=>{m(b=>({...b,[x]:{...b[x],[d]:g}}))},S=async x=>{c(!0);try{const d=r[x];await Ye(t,x,d),o({title:"Success",description:"Variation updated"}),v()}catch{o({title:"Error",description:"Failed to update variation",variant:"destructive"})}finally{c(!1)}},y=async()=>{c(!0);try{const x=n.map(d=>Ye(t,d.id,r[d.id]));await Promise.all(x),o({title:"Success",description:"All variations updated"}),v()}catch{o({title:"Error",description:"Failed to update some variations",variant:"destructive"})}finally{c(!1)}};return i?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(J,{className:"animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Variations (",n.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{variant:"outline",size:"sm",onClick:v,title:"Refresh",children:e.jsx(Ms,{className:"w-4 h-4"})}),e.jsxs(K,{onClick:y,disabled:u,size:"sm",children:[u?e.jsx(J,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(je,{className:"w-4 h-4 mr-2"}),"Save All"]})]})]}),e.jsxs("div",{className:"grid gap-4",children:[n.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed rounded-lg",children:"No variations found. Add attributes in WooCommerce first."}),n.map(x=>e.jsx(Pa,{variation:x,editData:r[x.id],onChange:(d,g)=>f(x.id,d,g),onSave:()=>S(x.id),saving:u},x.id))]})]})},Pa=({variation:t,editData:n,onChange:s,onSave:i,saving:l})=>{var v;const[u,c]=a.useState(!1),o=(v=t.attributes)==null?void 0:v.find(f=>tt[f.option]),r=o?tt[o.option]:null,m=t.attributes.map(f=>`${f.option}`).join(" / ");return n?e.jsx(de,{className:"overflow-hidden border-none shadow-md bg-white rounded-2xl transition-all",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[r&&e.jsx("div",{className:"w-5 h-5 rounded-full border border-slate-200 shadow-sm shrink-0",style:{backgroundColor:r}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 text-sm leading-tight",children:m||`Variation #${t.id}`}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["ID: ",t.id]}),e.jsx(dt,{variant:"outline",className:"text-[9px] font-black h-4 px-1 leading-none uppercase tracking-tighter border-slate-200 text-slate-500",children:t.stock_status})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(U,{className:"text-[9px] font-bold uppercase text-slate-400 ml-1",children:"Stock"}),e.jsx(X,{type:"number",className:"w-full sm:w-20 h-10 rounded-full bg-slate-50 border-none font-bold text-center sm:text-right focus:bg-white",value:n.stock_quantity??0,onChange:f=>s("stock_quantity",parseInt(f.target.value)||0)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(U,{className:"text-[9px] font-bold uppercase text-slate-400 ml-1",children:"Price (â‚¬)"}),e.jsx(X,{type:"number",className:"w-full sm:w-20 h-10 rounded-full bg-slate-50 border-none font-bold text-center sm:text-right focus:bg-white",value:n.regular_price,onChange:f=>s("regular_price",f.target.value)})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-50",children:[e.jsx(K,{variant:"ghost",size:"sm",onClick:()=>c(!u),className:"text-primary font-bold text-xs uppercase tracking-wider hover:bg-primary/5 rounded-full px-4",children:u?"Skloni detalje":"ViÅ¡e detalja"}),e.jsxs(K,{size:"sm",onClick:i,disabled:l,className:"rounded-full font-bold text-xs uppercase tracking-wider px-4 min-w-[100px]",children:[l?e.jsx(J,{className:"w-3 h-3 animate-spin"}):e.jsx(je,{className:"w-3 h-3 mr-2"}),"Spremi"]})]}),e.jsx(As,{open:u,children:e.jsx(Os,{className:"pt-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{className:"text-[10px] font-bold uppercase text-slate-400 ml-1",children:"Akcijska Cijena (â‚¬)"}),e.jsx(X,{className:"h-10 rounded-full bg-slate-50 border-none font-bold focus:bg-white px-6",value:n.sale_price||"",onChange:f=>s("sale_price",f.target.value),placeholder:"Npr. 19.99"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-6 sm:pt-4 ml-1",children:[e.jsx("div",{className:z("w-10 h-6 rounded-full p-1 cursor-pointer transition-colors duration-200 ease-in-out",n.manage_stock?"bg-primary":"bg-slate-200"),onClick:()=>s("manage_stock",!n.manage_stock),children:e.jsx("div",{className:z("w-4 h-4 bg-white rounded-full transition-transform duration-200 ease-in-out shadow-sm",n.manage_stock?"translate-x-4":"translate-x-0")})}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500 tracking-wider",children:"Upravljaj zalihama"})]})]})})})]})}):null},Ra=({product:t,initialImage:n,onSuccess:s})=>{const[i,l]=a.useState(""),[u,c]=a.useState(""),[o,r]=a.useState(""),[m,v]=a.useState(""),[f,S]=a.useState(""),[y,x]=a.useState(""),[d,g]=a.useState([]),[b,p]=a.useState("instock"),[h,_]=a.useState(!1),[V,H]=a.useState(0),[C,w]=a.useState("simple"),[N,I]=a.useState(!1),{toast:D}=Fe(),[T,P]=a.useState("general");a.useEffect(()=>{var k,A;if(t){l(t.name),c(t.sale_price||""),r(t.regular_price||t.price),v(t.description),S(t.short_description),x(((A=(k=t.images)==null?void 0:k[0])==null?void 0:A.src)||"");const O=t.images||[];O.length>1?g(O.slice(1).map(B=>B.src)):g([]),p(t.stock_status),_(t.manage_stock),H(t.stock_quantity??0),w(t.type==="variable"?"variable":"simple")}else l(""),c(""),r(""),v(""),S(""),x(n||""),g([]),p("instock"),_(!0),H(0),w("simple")},[t,n]);const $=async k=>{I(!0);const A=[];y&&A.push({src:y}),d.length>0&&d.forEach(B=>A.push({src:B}));const O={name:i,regular_price:o,description:m,short_description:f,stock_status:b,manage_stock:h,images:A,type:C};h&&C==="simple"&&(O.stock_quantity=V),u&&(O.sale_price=u!==o?u:"");try{t?(await ws(t.id,O),D({title:"Success",description:"Product updated successfully"})):(await js(O),D({title:"Success",description:"Product created successfully"})),s()}catch(B){console.error("Product save error:",B),D({title:"Error",description:"Failed to save product. Check permissions.",variant:"destructive"})}finally{I(!1)}};return e.jsxs("div",{className:"space-y-8 pb-32 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white/80 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl shadow-slate-200/50 border border-slate-100 mb-8 sticky top-4 z-40 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center",children:e.jsx(ys,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-900 font-heading uppercase tracking-tight",children:t?i:"Novi Proizvod"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{variant:"outline",className:"text-[9px] font-black uppercase tracking-widest border-slate-200 text-slate-400",children:C==="variable"?"Varijabilni":"Jednostavni"}),t&&e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["ID: ",t.id]})]})]})]}),e.jsxs(K,{onClick:()=>$(),disabled:N,className:"w-full sm:w-auto px-8 h-12 rounded-full font-black text-xs uppercase tracking-widest shadow-xl shadow-primary/20 hover:shadow-primary/30 transition-all flex items-center justify-center",children:[N?e.jsx(J,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(je,{className:"w-4 h-4 mr-2 stroke-[3]"}),"Spremi Promjene"]})]}),e.jsxs(ot,{value:T,onValueChange:P,className:"w-full",children:[e.jsxs(it,{className:"grid grid-cols-2 md:grid-cols-4 w-full h-auto mb-10 bg-slate-100/50 p-2 rounded-full gap-2",children:[e.jsxs(ue,{value:"general",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(Bs,{className:"w-4 h-4 mr-2"})," OpÄ‡e"]}),e.jsxs(ue,{value:"inventory",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(Ds,{className:"w-4 h-4 mr-2"})," Zaliha"]}),e.jsxs(ue,{value:"media",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"})," Mediji"]}),e.jsxs(ue,{value:"variations",disabled:C!=="variable",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all disabled:opacity-30",children:[e.jsx(Us,{className:"w-4 h-4 mr-2"})," Varijacije"]})]}),e.jsx(we,{value:"general",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(de,{children:[e.jsxs(ve,{children:[e.jsx(ye,{children:"Basic Information"}),e.jsx(Qe,{children:"Product identity and pricing"})]}),e.jsxs(be,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Product Name"}),e.jsx(X,{value:i,onChange:k=>l(k.target.value),placeholder:"e.g. Vintage T-Shirt",className:"text-lg font-medium rounded-full px-6"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Product Type"}),e.jsxs(Je,{value:C,onValueChange:k=>w(k),children:[e.jsx(Ve,{children:e.jsx(et,{})}),e.jsxs(He,{children:[e.jsx(ce,{value:"simple",children:"Simple Product"}),e.jsx(ce,{value:"variable",children:"Variable Product (Sizes/Colors)"})]})]})]})]}),C==="simple"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Regular Price (â‚¬)"}),e.jsx(X,{type:"number",value:o,onChange:k=>r(k.target.value),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{children:["Sale Price (â‚¬) ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx(X,{type:"number",value:u,onChange:k=>c(k.target.value),placeholder:"0.00"})]})]}):e.jsxs("div",{className:"p-4 bg-blue-50 text-blue-800 rounded-lg border border-blue-100 mb-6",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Ls,{className:"w-4 h-4"}),"Variable Product Pricing"]}),e.jsxs("p",{className:"text-sm mt-1 opacity-90",children:["Prices for variable products are managed in the ",e.jsx("strong",{children:"Variations"})," tab."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Short Description"}),e.jsx("div",{className:"h-44 mb-8",children:e.jsx(Xe,{theme:"snow",value:f,onChange:S,className:"h-32 bg-white"})})]}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(U,{children:"Full Description"}),e.jsx("div",{className:"h-80 mb-8",children:e.jsx(Xe,{theme:"snow",value:m,onChange:v,className:"h-64 bg-white"})})]})]})]})}),e.jsx(we,{value:"inventory",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(de,{children:[e.jsx(ve,{children:e.jsx(ye,{children:"Inventory Management"})}),e.jsxs(be,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base",children:"Manage Stock Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable stock management at product level"})]}),e.jsx(Ge,{checked:h,onCheckedChange:_})]}),h&&C==="simple"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Stock Quantity"}),e.jsx(X,{type:"number",value:V,onChange:k=>H(parseInt(k.target.value)),className:"max-w-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Stock Status"}),e.jsxs(Je,{value:b,onValueChange:p,children:[e.jsx(Ve,{className:"max-w-xs",children:e.jsx(et,{})}),e.jsxs(He,{children:[e.jsx(ce,{value:"instock",children:"In Stock"}),e.jsx(ce,{value:"outofstock",children:"Out of Stock"}),e.jsx(ce,{value:"onbackorder",children:"On Backorder"})]})]})]})]})]})}),e.jsx(we,{value:"media",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(de,{children:[e.jsx(ve,{children:e.jsx(ye,{children:"Product Images"})}),e.jsxs(be,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Main Product Image"}),e.jsx(Ze,{value:y,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Gallery Images"}),e.jsx(Ze,{value:d,onChange:g,multiple:!0})]})]})]})}),e.jsx(we,{value:"variations",className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(de,{children:[e.jsxs(ve,{children:[e.jsx(ye,{children:"Variations"}),e.jsx(Qe,{children:"Manage stock and prices for each variation (Size, Color, etc.)"})]}),e.jsx(be,{children:t&&C==="variable"?t.type==="variable"?e.jsx(Ia,{productId:t.id}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-800 rounded-full",children:e.jsx(je,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Save Changes First"}),e.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"You've changed the product type to Variable. Please save the product to enable variation management."})]}),e.jsx(K,{onClick:()=>$(),disabled:N,children:N?e.jsx(J,{className:"w-4 h-4 animate-spin mr-2"}):"Save & Continue"})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Set product type to "Variable Product" under General tab to manage variations.'})})]})})]})]})},Qa=()=>{const{id:t}=Ss(),n=Ns(),{toast:s}=Fe(),[i,l]=a.useState(!1),[u,c]=a.useState(null),[o,r]=a.useState("selection"),[m,v]=a.useState("");a.useEffect(()=>{t?(f(parseInt(t)),r("editor")):r("selection")},[t]);const f=async y=>{l(!0);try{const x=await Cs(y);c(x)}catch(x){console.error(x),s({title:"Error",description:"Could not load product",variant:"destructive"}),n("/admin/products")}finally{l(!1)}},S=()=>{n("/admin/products")};return i?e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx(J,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"max-w-5xl mx-auto space-y-10 animate-fade-in pb-20",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-slate-200/60 pb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(K,{variant:"outline",size:"icon",onClick:()=>n("/admin/products"),className:"rounded-full h-12 w-12 border-slate-200 hover:bg-slate-50",children:e.jsx(lt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black font-heading text-slate-900 tracking-tight uppercase",children:t?"UREDI PROIZVOD":"NOVI PROIZVOD"}),e.jsx("p",{className:"text-slate-500 text-lg font-medium mt-1",children:"Konfigurirajte detalje proizvoda i zalihe."})]})]})}),e.jsx(de,{className:"border-none shadow-xl shadow-slate-200/40 bg-white rounded-[2.5rem] overflow-hidden",children:e.jsxs("div",{className:"p-8 md:p-10",children:[!t&&o==="selection"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-8",children:[e.jsxs("div",{className:"border-2 border-dashed border-slate-100 rounded-[2rem] p-10 text-center hover:border-blue-500/30 hover:bg-blue-50/30 cursor-pointer transition-all group shadow-sm hover:shadow-md",onClick:()=>r("generator"),children:[e.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-200 transition-colors",children:e.jsx(Oe,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Generate with AI"}),e.jsx("p",{className:"text-gray-500",children:"Use Nano Banana to create a unique design based on Roko's style."})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-100 rounded-[2rem] p-10 text-center hover:border-slate-300 hover:bg-slate-50/50 cursor-pointer transition-all group shadow-sm hover:shadow-md",onClick:()=>r("editor"),children:[e.jsx("div",{className:"bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-gray-200 transition-colors",children:e.jsx(_s,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Manual Upload"}),e.jsx("p",{className:"text-gray-500",children:"Skip generation and upload your own product images manually."})]})]}),!t&&o==="generator"&&e.jsx(Vs,{onImageSelect:y=>{v(y),r("preview")},onCancel:()=>r("selection")}),!t&&o==="preview"&&e.jsx(Zs,{generatedDesign:m,onConfirm:y=>{v(y),r("editor")},onBack:()=>r("generator")}),(t||o==="editor")&&e.jsx(Ra,{product:u,initialImage:m,onSuccess:S})]})})]})};export{Qa as default};
