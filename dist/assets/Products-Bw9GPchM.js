import{l as O,r,b as z,u as E,j as e,B as p,I as v,a as _,n as q,L as P,Q as R,T as A,V as T,W as B,Y as Z,Z as M}from"./index-BM-P6f9N.js";import{B as U}from"./badge-AZTapMsV.js";import{C as Q,a as $}from"./collapsible-BJ-4vOPb.js";import{P as H}from"./plus-CPtVEaEk.js";import{P as w}from"./package-DCUMo1ZG.js";import{C as W,a as Y}from"./chevron-up-D2WatnP3.js";import{S as G}from"./square-pen-BAdAafkK.js";import{T as J}from"./trash-2-D_RvA5Y0.js";import{S as K}from"./save-DbunL4zk.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=O("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),V={Crna:"#231f20",Siva:"#d1d5db",Tirkizna:"#00ab98",Cijan:"#00aeef",Plava:"#387bbf",Ljubičasta:"#8358a4",Bijela:"#ffffff",Roza:"#e78fab",Mint:"#a1d7c0"},ee=({product:s,onDelete:u,onUpdate:g})=>{var S;const j=E(),{toast:o}=z(),[c,m]=r.useState(!1),[d,f]=r.useState([]),[b,x]=r.useState(!1),[t,i]=r.useState(!1),[N,I]=r.useState(s.stock_quantity||0),[y,k]=r.useState({}),h=s.type==="variable",L=async()=>{if(!c&&h&&d.length===0){x(!0);try{const a=await B(s.id);f(a);const l={};a.forEach(n=>{l[n.id]=n.stock_quantity||0}),k(l)}catch(a){console.error("Failed to fetch variations",a),o({title:"Error",description:"Failed to fetch variations",variant:"destructive"})}finally{x(!1)}}m(!c)},F=async()=>{i(!0);try{h||await Z(s.id,{manage_stock:!0,stock_quantity:N}),h&&d.length>0&&await Promise.all(d.map(a=>M(s.id,a.id,{manage_stock:!0,stock_quantity:y[a.id]}))),o({title:"Success",description:"Stock updated successfully"}),g()}catch(a){console.error(a),o({title:"Error",description:"Failed to update stock",variant:"destructive"})}finally{i(!1)}};return e.jsxs(_,{className:"mb-6 overflow-hidden border-none shadow-lg shadow-slate-200/30 bg-white rounded-[2rem] transition-all hover:shadow-xl hover:shadow-primary/5 group",children:[e.jsxs("div",{className:"p-4 md:p-6 flex flex-col lg:flex-row items-start lg:items-center gap-4 md:gap-6",children:[e.jsx("div",{className:"h-20 w-20 md:h-24 md:w-24 rounded-2xl md:rounded-3xl bg-slate-50 flex-shrink-0 overflow-hidden border border-slate-100 shadow-inner group-hover:scale-105 transition-transform duration-500",children:(S=s.images)!=null&&S[0]?e.jsx("img",{src:s.images[0].src,alt:s.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-slate-300",children:e.jsx(w,{className:"w-8 h-8 md:w-10 md:h-10 opacity-50"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(U,{variant:s.stock_status==="instock"?"default":"destructive",className:"text-[10px] uppercase tracking-tighter font-black px-2.5 py-1 rounded-full",children:s.stock_status==="instock"?"Dostupno":"Rasprodano"}),e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["ID: ",s.id]})]}),e.jsx("h3",{className:"text-lg md:text-xl font-black text-slate-900 truncate leading-tight mb-1",children:s.name}),e.jsxs("p",{className:"text-base md:text-lg font-bold text-primary italic",children:["€",s.price]})]}),!h&&e.jsxs("div",{className:"flex flex-col gap-1.5 min-w-[120px]",children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5 ml-1",children:"Zaliha"}),e.jsx("div",{className:"relative",children:e.jsx(v,{type:"number",className:"w-full h-12 rounded-full bg-slate-50 border-slate-100 focus:bg-white transition-colors font-bold pl-6",value:N,onChange:a=>I(parseInt(a.target.value)||0)})})]}),e.jsxs("div",{className:"flex items-center gap-2 lg:gap-3 w-full lg:w-auto mt-2 lg:mt-0 pt-3 lg:pt-0 border-t lg:border-t-0 border-slate-50",children:[h&&e.jsxs(p,{variant:"secondary",size:"lg",onClick:L,className:"flex-1 lg:flex-none h-11 lg:h-12 gap-2 rounded-full font-bold text-[10px] lg:text-xs uppercase tracking-wider bg-slate-100 hover:bg-slate-200 text-slate-900 border-none transition-all shadow-sm",children:[c?e.jsx(W,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Varijacije"}),e.jsx("span",{className:"sm:hidden",children:"Opcije"})]}),e.jsxs("div",{className:"flex gap-2 ml-auto lg:ml-0",children:[e.jsx(p,{variant:"outline",size:"icon",className:"h-11 w-11 lg:h-12 lg:w-12 rounded-full border-slate-100 hover:border-blue-100 hover:bg-blue-50 text-blue-600 transition-all shadow-sm",onClick:()=>j(`/admin/products/edit/${s.id}`),children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx(p,{variant:"outline",size:"icon",className:"h-11 w-11 lg:h-12 lg:w-12 rounded-full border-slate-100 hover:border-red-100 hover:bg-red-50 text-red-600 transition-all shadow-sm",onClick:()=>u(s.id),children:e.jsx(J,{className:"w-4 h-4"})}),e.jsxs(p,{onClick:F,disabled:t,size:"lg",className:q("h-11 lg:h-12 px-4 lg:px-6 rounded-full font-bold text-[10px] lg:text-xs uppercase tracking-wider shadow-md transition-all",t?"opacity-70":"hover:shadow-primary/20"),children:[t?e.jsx(P,{className:"w-4 h-4 animate-spin"}):e.jsx(K,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Spremi"})]})]})]})]}),e.jsx(Q,{open:c,className:"bg-slate-50/50 border-t border-slate-100",children:e.jsx($,{children:e.jsx("div",{className:"p-8 space-y-4",children:b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[e.jsx(P,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest animate-pulse",children:"Učitavanje varijacija..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-12 gap-8 px-4 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-4",children:[e.jsx("div",{className:"col-span-8",children:"Varijacija"}),e.jsx("div",{className:"col-span-4 pl-4 text-center",children:"Zaliha"})]}),e.jsx("div",{className:"space-y-3",children:d.map(a=>e.jsxs("div",{className:"grid grid-cols-12 gap-8 items-center bg-white p-5 rounded-2xl border border-slate-100 shadow-sm hover:border-primary/20 transition-all group/var",children:[e.jsxs("div",{className:"col-span-8 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(()=>{var C;const l=(C=a.attributes)==null?void 0:C.find(D=>V[D.option]),n=l?V[l.option]:null;return n?e.jsx("div",{className:"w-4 h-4 rounded-full border border-slate-200 shadow-inner shrink-0 scale-110",style:{backgroundColor:n}}):e.jsx("div",{className:"w-4 h-4 rounded-full border border-slate-200 bg-slate-100 shrink-0"})})(),e.jsx("span",{className:"font-bold text-slate-900 text-sm",children:a.attributes.map(l=>`${l.option}`).join(" / ")})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5 ml-7 text-[10px] font-bold text-slate-400",children:[e.jsxs("span",{className:"uppercase tracking-widest",children:["ID: ",a.id]}),e.jsxs("span",{className:"text-primary italic",children:["€",a.price]})]})]}),e.jsx("div",{className:"col-span-4",children:e.jsx(v,{type:"number",className:"h-10 rounded-full bg-slate-50 text-center border-none font-bold focus:bg-white transition-all px-4",value:y[a.id]||0,onChange:l=>k(n=>({...n,[a.id]:parseInt(l.target.value)||0}))})})]},a.id))})]})})})})]})},de=()=>{const[s,u]=r.useState([]),[g,j]=r.useState(!0),[o,c]=r.useState(""),{toast:m}=z(),d=E(),f=async()=>{try{const t=await R(1,100);u(t)}catch(t){console.error("Failed to fetch products:",t),m({title:"Error",description:"Failed to load products.",variant:"destructive"})}finally{j(!1)}};r.useEffect(()=>{f()},[]);const b=async t=>{if(confirm("Are you sure you want to delete this product?"))try{await A(`/wc/v3/products/${t}?force=true`,{method:"DELETE",headers:T()}),u(s.filter(i=>i.id!==t)),m({title:"Success",description:"Product deleted successfully"})}catch{m({title:"Error",description:"Failed to delete product",variant:"destructive"})}},x=(s||[]).filter(t=>{var i;return(i=t.name)==null?void 0:i.toLowerCase().includes(o.toLowerCase())});return e.jsxs("div",{className:"space-y-10 animate-fade-in pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-slate-200/60 pb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-black font-heading text-slate-900 tracking-tight uppercase",children:"PROIZVODI"}),e.jsx("p",{className:"text-slate-500 text-sm md:text-lg font-medium mt-1",children:"Upravljajte svojim proizvodima i zalihama."})]}),e.jsx("div",{className:"flex w-full md:w-auto gap-3",children:e.jsxs(p,{onClick:()=>d("/admin/products/new"),className:"w-full md:w-auto h-12 px-6 rounded-full font-black text-xs uppercase tracking-widest shadow-lg shadow-primary/10 hover:shadow-primary/20 transition-all",children:[e.jsx(H,{className:"w-4 h-4 mr-2 stroke-[3]"})," Novi Proizvod"]})})]}),e.jsxs("div",{className:"flex items-center gap-4 bg-white p-3 rounded-2xl border border-slate-100 shadow-lg shadow-slate-200/30 max-w-xl group focus-within:border-primary/30 transition-all",children:[e.jsx(X,{className:"w-5 h-5 text-slate-400 ml-2 group-focus-within:text-primary transition-colors"}),e.jsx(v,{placeholder:"Pretraži proizvode...",value:o,onChange:t=>c(t.target.value),className:"border-none shadow-none focus-visible:ring-0 text-slate-900 font-bold placeholder:text-slate-300 text-base py-0 h-auto"})]}),e.jsx("div",{className:"space-y-4",children:g?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 animate-pulse",children:[e.jsx(w,{className:"w-12 h-12 text-gray-200 mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium",children:"Loading inventory..."})]}):e.jsxs(e.Fragment,{children:[x.map(t=>e.jsx(ee,{product:t,onDelete:b,onUpdate:f},t.id)),x.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-32 text-center bg-white rounded-[3rem] border border-dashed border-slate-200 shadow-sm animate-in fade-in duration-700",children:[e.jsx("div",{className:"h-24 w-24 rounded-full bg-slate-50 flex items-center justify-center mb-8 shadow-inner",children:e.jsx(w,{className:"h-10 w-10 text-slate-300"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight uppercase",children:"NEMA PROIZVODA"}),e.jsx("p",{className:"text-slate-500 max-w-xs mt-3 font-medium leading-relaxed",children:"Nismo pronašli nijedan proizvod koji odgovara vašoj pretrazi."})]})]})})]})};export{de as default};
