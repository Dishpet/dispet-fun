const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/client-56xTSdLI.js","assets/posts-BU-Rlwi-.js","assets/index-Dm_rGHKz.js","assets/index-Bfpcg97n.css"])))=>i.map(i=>d[i]);
import{l as Q,j as e,a as oe,n as K,r as a,L as ee,I as J,B as F,_ as X,$ as Qt,a0 as Zt,g as V,a1 as Xt,a2 as Jt,a3 as st,a4 as Z,a5 as es,a6 as $,a7 as z,a8 as te,a9 as at,aa as ts,ab as ss,ac as as,ad as rs,ae as ns,af as os,ag as He,ah as is,ai as ls,aj as cs,ak as ds,al as ms,am as Ke,an as ps,ao as We,ap as us,b as ze,W as hs,Z as Ye,S as gs,aq as fs,F as ye,J as be,ar as Qe,K as we,Y as xs,as as vs,v as ys,u as bs,at as ws}from"./index-Dm_rGHKz.js";import{M as js,B as rt}from"./minus-BXb63Ot5.js";import{P as Ss}from"./palette-BK-jqM2I.js";import{C as Ns}from"./clock-GolvFwqx.js";import{W as ks,S as nt}from"./switch--3rmirTh.js";import{S as Cs}from"./send-DWqH1C-y.js";import{C as Fe}from"./check-DYc_ANDN.js";import{S as ge}from"./slider-Bp8pSouG.js";import{T as ot,a as it,b as pe,u as Is,c as je}from"./tabs-BMSvC9nD.js";import{A as lt}from"./arrow-left-DGgDwBd8.js";import{a as ct,C as Ts}from"./chevron-up-C5Vv27Xp.js";import{M as Ze,U as Ps}from"./MediaPicker-BiHA5tpY.js";import{R as Xe}from"./quill.snow-e13_TH-r.js";import{B as dt}from"./badge-CIaBP9-O.js";import{C as Rs,a as Es}from"./collapsible-MDB_r2Mv.js";import{R as Ms}from"./refresh-cw-DytBsy0c.js";import{S as Se}from"./save-ChDsG003.js";import{I as As}from"./info-D-ma2giD.js";import"./chevron-right-M5G8bE-n.js";import"./isEqual-DGod36FQ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=Q("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=Q("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Q("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Q("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Q("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Q("Shapes",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Q("SmilePlus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=Q("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Q("SquareMinus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Q("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Fs="/assets/synthwave-Bd5V0bcH.png",mt="/assets/gta-BHWTrAUF.png",Gs="/assets/cyberpunk-BiFiaIyt.png",_e="/assets/cartoon-mascot-CrXA2aaB.png",pt="/assets/vintage-Bz0qyTfs.png",$s="/assets/inkpunk-COqtlBTn.png",Ks="/assets/fantasy-BFCu2v4t.png",Ge="/assets/abstract-geometry--IPRceCC.png",Ws=_e,Ys=Ge,Qs=pt,Zs=mt,Xs=Ge,Js=[{id:"no-style",name:"No Style / Basic",icon:js,image:_e,description:"ÄŒisti karakter bez dodatnih stilova"},{id:"cartoon",name:"Cartoon / Mascot",icon:qs,image:_e,description:"Razigrani maskota stil"},{id:"synthwave",name:"Synthwave",icon:Ss,image:Fs,description:"Retro 80-ih neon vibra"},{id:"gta",name:"GTA Style",icon:Ds,image:mt,description:"Smjela strip estetika"},{id:"cyberpunk",name:"Cyberpunk",icon:Os,image:Gs,description:"FuturistiÄka neon tehnologija"},{id:"anime",name:"Anime Style",icon:Ne,image:Ws,description:"Japanski anime stil"},{id:"3d",name:"3D Stylized",icon:rt,image:Ys,description:"Stilizirani 3D model"},{id:"retro",name:"Retro / Vintage",icon:Ns,image:pt,description:"Vintage poster umjetnost"},{id:"inkpunk",name:"Inkpunk Style",icon:Bs,image:$s,description:"KaotiÄne mrlje tinte"},{id:"steampunk",name:"Steampunk",icon:_s,image:Qs,description:"MehaniÄki mjedeni stil"},{id:"noir",name:"Noir / Dark Comic",icon:Vs,image:Zs,description:"Crno-bijeli strip noir"},{id:"fantasy",name:"Fantasy / RPG",icon:ks,image:Ks,description:"MagiÄni RPG stil"},{id:"minimalist",name:"Minimalist Modern",icon:Hs,image:Xs,description:"ÄŒisti, jednostavni oblici"},{id:"abstract-geometry",name:"Apstraktna Geometrija",icon:Us,image:Ge,description:"Geometrijski oblici i fragmenti"}],ea=({selectedStyle:t,onStyleSelect:n})=>e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"mb-4 text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Odaberi Stil"}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide mask-fade-sides",children:Js.map(s=>{const i=t===s.id;return e.jsxs(oe,{className:K("group relative min-w-[80px] w-[100px] aspect-square cursor-pointer overflow-hidden border transition-all hover:scale-105 flex-shrink-0",i?"border-primary":"border-transparent hover:border-primary/50"),onClick:()=>n(s.id),children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:s.image,alt:s.name,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"}),e.jsx("div",{className:K("absolute inset-0 bg-black/40 transition-opacity",i?"opacity-20":"opacity-40 group-hover:opacity-30")})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-end p-3",children:e.jsx("h3",{className:"text-xs font-bold text-white uppercase tracking-wide drop-shadow-lg",children:s.name})}),i&&e.jsx("div",{className:"absolute top-2 right-2 h-6 w-6 rounded-full bg-primary flex items-center justify-center shadow-lg",children:e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})})]},s.id)})})]}),ta="/assets/roko-casual-LTalTbJo.png",sa="/assets/roko-sport-DAd3YuQC.png",aa="/assets/roko-head-BgcIOxNZ.png",ra=({onImageSelect:t,onCancel:n})=>{const[s,i]=a.useState(""),[l,m]=a.useState("cartoon"),[c,o]=a.useState(!1),[r,u]=a.useState(null),v=async y=>new Promise((x,d)=>{const g=new Image;g.crossOrigin="anonymous",g.onload=()=>{const w=document.createElement("canvas");w.width=g.width,w.height=g.height;const p=w.getContext("2d");p==null||p.drawImage(g,0,0),x(w.toDataURL("image/png"))},g.onerror=d,g.src=y}),f=async()=>{if(!s.trim()){X.error("Molimo unesite opis dizajna");return}o(!0),u(null);try{const{refinePrompt:y,generateImageWithGemini:x}=await Qt(async()=>{const{refinePrompt:k,generateImageWithGemini:b}=await import("./client-56xTSdLI.js");return{refinePrompt:k,generateImageWithGemini:b}},__vite__mapDeps([0,1,2,3])),d=[aa,ta,sa],g=await Promise.all(d.map(k=>v(k)));X.info("Refining prompt...");const w=await y(s);console.log("Refined:",w);const p=s||"striking a fun, energetic pose",h=`
ðŸŽ­ MASCOT CHARACTER "ROKO":
âš ï¸ MOST CRITICAL: The character's EXACT appearance is provided in the attached 3 reference images. 
ðŸ“¸ IMAGE 1 is the FACE reference. IMAGES 2-3 are for character/outfit reference.
Copy EXACT facial features from IMAGE 1 (Headshot). The face is the character's identity - get it EXACTLY right.
ðŸš« IMPORTANT: DO NOT include any shop logos, text emblems, or specific branding designs (like logo-5) that may be visible in the reference images. The character should have CLEAN clothing without any specific shop designs.
DO NOT use generic animal data. Roko is a character exactly as shown in references.
            `,L={"no-style":`Create a high-resolution version of the mascot character (ROKO) ${p} in a square aspect ratio. Focus purely on the character's likeness and the requested action.

${h}`,anime:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, energetic anime effects, cel-shaded coloring, motion streaks, and vibrant color accents.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear, character-based graphics, or modern pop-anime poster styles.

ANIME STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Anime-style effects, speed lines, glow accents`,synthwave:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, neon gradients, retro 80s colors, gridlines, glowing geometric fragments, and synthwave sun elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear, neon-retro artwork, or modern synthwave poster design.

SYNTHWAVE STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Neon, chrome, and synthwave design elements`,gta:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, flat comic-cell shading, sharp color blocks, and minimal background elements inspired by GTA loading screen artwork.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear or stylized GTA poster graphics.

GTA STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ GTA-style shading, poster elements, and color blocking
â€¢ Balanced contrast and strong outlines`,cyberpunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, holographic glows, neon lighting, electric fragments, cybernetic accents, and futuristic color palettes.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to futuristic streetwear or modern neon cyberpunk posters.

CYBERPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Cyberpunk neon, holographic shapes, electric effects`,cartoon:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, playful cartoon features, graffiti splashes, fun geometric fragments, and colorful dynamic highlights.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium mascot logos or modern cartoon streetwear graphics.

CARTOON MASCOT STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Cartoon-style exaggeration, graffiti accents`,"3d":`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector-inspired 3D shapes, bold outlines, soft cinematic lighting, glossy materials, and stylized shading.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to collectible 3D figurines or stylized 3D streetwear graphics.

3D STYLIZED STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Stylized 3D lighting and smooth materials`,retro:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, muted retro color palettes, halftone textures, and vintage geometric fragments.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by classic vintage posters and retro streetwear.

RETRO / VINTAGE STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Retro halftones, muted colors, vintage poster shapes`,inkpunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, aggressive ink strokes, splashes, neon drips, expressive brush fragments, and chaotic graffiti elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by expressive inkpunk and street-art fusion posters.

INKPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Ink strokes, splatters, drips, neon graffiti chaos`,steampunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, brass and copper tones, gears, goggles, mechanical fragments, and Victorian-inspired steampunk design elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium steampunk fashion and mechanical poster art.

STEAMPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Steampunk gears, pipes, goggles, metallic textures`,noir:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, heavy noir shadows, moody lighting, limited palette (black, white, red), and gritty comic-style textures.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by noir graphic novels and dark comic posters.

NOIR / DARK COMIC STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Noir shadows, dramatic lighting, gritty comic shading`,fantasy:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean vector shapes, bold outlines, magical glows, enchanted particles, ornate fantasy fragments, and dramatic lighting.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to heroic fantasy posters and RPG character art.

FANTASY / RPG STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Magical particles, glowing runes, fantasy lighting`,minimalist:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Use clean geometric vector shapes, bold outlines, smooth curves, limited color palette, and modern design fragments.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to minimalist vector posters and premium logo-style art.

MINIMALIST MODERN VECTOR STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Minimal geometric shapes, clean flat colors`,"abstract-geometry":`Create a stunning, high-resolution print-ready illustration of the mascot character (ROKO) ${p} in a square aspect ratio. Surround the mascot character with a dynamic explosion of abstract shapes, colorful liquid splashes, sharp geometric fragments, stars, and vibrant decorative particles. Style reference: explosive, colorful, high-contrast liquid-geometric fusion. 

The design should have a clear silhouette and strong central composition suitable for apparel printing.

ABSTRACT SHAPES & GEOMETRY STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Abstract geometric fragments, shards, and layered shapes`},U=L[l]||L.cartoon;X.info("Generating with Nano Banana...");const q=await x(U,"{prompt}",g);q&&(u(q),X.success("Generated successfully!"))}catch(y){console.error("Generation error:",y),X.error(y.message||"Generiranje nije uspjelo. Provjerite API kljuÄ.")}finally{o(!1)}},N=async()=>{r&&t(r)};return e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-purple-100 rounded-full mb-2",children:e.jsx(Ne,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h2",{className:"text-2xl font-bold font-heading",children:"AI Design Studio"}),e.jsx("p",{className:"text-gray-500",children:"Describe your idea and let Nano Banana create it using Roko's reference images."})]}),e.jsx("div",{className:"bg-gray-50 p-3 sm:p-6 rounded-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"aspect-square w-full max-w-sm mx-auto bg-white rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center overflow-hidden relative",children:c?e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(ee,{className:"w-10 h-10 animate-spin text-primary mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium animate-pulse",children:"Creating masterpiece..."})]}):r?e.jsx("img",{src:r,alt:"Generated",className:"w-full h-full object-contain"}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(Ne,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Driven by Gemini 2.5"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ea,{selectedStyle:l,onStyleSelect:m}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{value:s,onChange:y=>i(y.target.value),placeholder:"E.g. Roko playing saxophone on the moon...",className:"bg-white",onKeyDown:y=>y.key==="Enter"&&f()}),e.jsx(F,{onClick:f,disabled:c||!s.trim(),children:c?e.jsx(ee,{className:"w-4 h-4 animate-spin"}):e.jsx(Cs,{className:"w-4 h-4"})})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx(F,{variant:"ghost",onClick:n,children:"Cancel"}),e.jsx("div",{className:"space-x-2",children:r&&e.jsxs(F,{onClick:N,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Use This Design"]})})]})]})},na="/assets/hoodie-string-black%20(2)-6s5mbvA2.png",oa="/assets/hoodie-string-black%20(4)-BeRhyIdq.png",ia="/assets/hoodie-string-grey%20(3)-Bg0TWnno.png",la="/assets/hoodie-string-grey%20(4)-C-YDg0Fg.png",ca=t=>new Promise((n,s)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const l=document.createElement("canvas");l.width=i.width,l.height=i.height;const m=l.getContext("2d");if(!m){s(new Error("Could not get canvas context"));return}m.drawImage(i,0,0);const c=m.getImageData(0,0,l.width,l.height),o=c.data;for(let r=0;r<o.length;r+=4){const u=o[r],v=o[r+1],f=o[r+2];u<15&&v<15&&f<15&&(o[r+3]=0)}m.putImageData(c,0,0),n(l.toDataURL("image/png"))},i.onerror=l=>s(l),i.src=t}),da=({generatedDesign:t,onConfirm:n,onBack:s})=>{const[i,l]=a.useState(null),[m,c]=a.useState("black"),[o,r]=a.useState("front"),[u,v]=a.useState(!1),[f,N]=a.useState({x:50,y:40}),[y,x]=a.useState(30),[d,g]=a.useState({x:50,y:20}),[w,p]=a.useState(15),h=a.useRef(null);a.useEffect(()=>{(async()=>{try{X.info("Nano Banana processing background...");const S=await ca(t);l(S),X.success("Background removed!")}catch(S){console.error(S),X.error("Failed to remove background"),l(t)}})()},[t]);const L=b=>m==="black"?b==="front"?na:oa:b==="front"?ia:la,U=async()=>{if(!h.current)return;const b=h.current.toDataURL("image/png");n(b)};a.useEffect(()=>{if(!h.current||!i)return;const b=h.current,S=b.getContext("2d");if(!S)return;const T=new Image;T.crossOrigin="anonymous",T.src=L(o==="front"?"front":"back"),T.onload=()=>{b.width=T.width,b.height=T.height,S.drawImage(T,0,0);const O=new Image;O.src=i,O.onload=()=>{const I=T.width*y/100,P=I*O.height/O.width,H=T.width*f.x/100-I/2,C=T.height*f.y/100-P/2;S.drawImage(O,H,C,I,P),S.strokeStyle="rgba(0, 255, 0, 0.5)",S.lineWidth=2,S.strokeRect(H,C,I,P)}}},[i,m,o,f,y]);const[q,k]=a.useState("front");return a.useEffect(()=>{if(!h.current||!i)return;const b=h.current,S=b.getContext("2d");if(!S)return;const T=new Image;T.src=L(q),T.onload=()=>{if(b.width=T.width,b.height=T.height,S.drawImage(T,0,0),q===o){const P=new Image;P.src=i,P.onload=()=>{O(S,P,f,y,!0)}}else if(u){const P=new Image;P.src=Zt,P.onload=()=>{O(S,P,d,w,!1)}}};const O=(I,P,H,C,M)=>{const A=I.canvas.width*C/100,B=A*P.height/P.width,W=I.canvas.width*H.x/100-A/2,ce=I.canvas.height*H.y/100-B/2;I.drawImage(P,W,ce,A,B),I.strokeStyle=M?"rgba(0, 200, 255, 0.5)":"rgba(255, 100, 100, 0.5)",I.setLineDash([5,5]),I.lineWidth=3,I.strokeRect(W,ce,A,B),I.setLineDash([])}},[q,i,m,o,u,f,y,d,w]),i?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 h-full max-h-[80vh]",children:[e.jsxs("div",{className:"md:col-span-1 space-y-6 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"1. Hoodie Options"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:`p-2 border rounded cursor-pointer text-center ${m==="black"?"ring-2 ring-primary border-primary":"hover:bg-white"}`,onClick:()=>c("black"),children:[e.jsx("div",{className:"w-6 h-6 bg-black rounded-full mx-auto mb-1 border border-white"}),e.jsx("span",{className:"text-xs font-medium",children:"Black"})]}),e.jsxs("div",{className:`p-2 border rounded cursor-pointer text-center ${m==="grey"?"ring-2 ring-primary border-primary":"hover:bg-white"}`,onClick:()=>c("grey"),children:[e.jsx("div",{className:"w-6 h-6 bg-gray-400 rounded-full mx-auto mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Grey"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"2. Design Placement"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{variant:o==="front"?"default":"outline",onClick:()=>{r("front"),k("front")},className:"flex-1",children:"Front"}),e.jsx(F,{variant:o==="back"?"default":"outline",onClick:()=>{r("back"),k("back")},className:"flex-1",children:"Back"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(V,{children:["Add Logo to ",o==="front"?"Back":"Front","?"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Adds 1web-logo-white"})]}),e.jsx(nt,{checked:u,onCheckedChange:v})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"3. Adjustments"}),e.jsxs(ot,{value:q,onValueChange:b=>k(b),children:[e.jsxs(it,{className:"w-full",children:[e.jsx(pe,{value:"front",className:"flex-1",children:"Edit Front"}),e.jsx(pe,{value:"back",className:"flex-1",children:"Edit Back"})]}),e.jsx("div",{className:"pt-4 space-y-4",children:q===o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Editing: Main Design"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(V,{children:"Size"})," ",e.jsxs("span",{className:"text-xs",children:[y,"%"]})]}),e.jsx(ge,{value:[y],onValueChange:([b])=>x(b),min:5,max:80,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(V,{children:"Vertical Position"})," ",e.jsxs("span",{className:"text-xs",children:[f.y,"%"]})]}),e.jsx(ge,{value:[f.y],onValueChange:([b])=>N(S=>({...S,y:b})),min:0,max:100,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(V,{children:"Horizontal Position"})," ",e.jsxs("span",{className:"text-xs",children:[f.x,"%"]})]}),e.jsx(ge,{value:[f.x],onValueChange:([b])=>N(S=>({...S,x:b})),min:0,max:100,step:1})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium text-red-600",children:"Editing: Logo Layer"}),u?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(V,{children:"Size"})," ",e.jsxs("span",{className:"text-xs",children:[w,"%"]})]}),e.jsx(ge,{value:[w],onValueChange:([b])=>p(b),min:2,max:40,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(V,{children:"Vertical Position"})," ",e.jsxs("span",{className:"text-xs",children:[d.y,"%"]})]}),e.jsx(ge,{value:[d.y],onValueChange:([b])=>g(S=>({...S,y:b})),min:0,max:100,step:1})]})]}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"Logo disabled"})]})})]})]})]}),e.jsxs("div",{className:"md:col-span-2 bg-gray-100 rounded-xl flex items-center justify-center p-4 relative border shadow-inner",children:[e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsx("canvas",{ref:h,className:"max-w-full max-h-full shadow-2xl rounded"})}),e.jsxs("div",{className:"absolute bottom-6 right-6 flex gap-2",children:[e.jsxs(F,{variant:"secondary",onClick:s,children:[e.jsx(lt,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsxs(F,{onClick:U,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"})," Create Product"]})]})]})]}):e.jsx("div",{className:"p-10 text-center",children:"Processing Design..."})};var ma=[" ","Enter","ArrowUp","ArrowDown"],pa=[" ","Enter"],ie="Select",[Ce,Ie,ua]=Xt(ie),[ue,dr]=Jt(ie,[ua,st]),Te=st(),[ha,se]=ue(ie),[ga,fa]=ue(ie),ut=t=>{const{__scopeSelect:n,children:s,open:i,defaultOpen:l,onOpenChange:m,value:c,defaultValue:o,onValueChange:r,dir:u,name:v,autoComplete:f,disabled:N,required:y,form:x}=t,d=Te(n),[g,w]=a.useState(null),[p,h]=a.useState(null),[L,U]=a.useState(!1),q=ps(u),[k,b]=We({prop:i,defaultProp:l??!1,onChange:m,caller:ie}),[S,T]=We({prop:c,defaultProp:o,onChange:r,caller:ie}),O=a.useRef(null),I=g?x||!!g.closest("form"):!0,[P,H]=a.useState(new Set),C=Array.from(P).map(M=>M.props.value).join(";");return e.jsx(us,{...d,children:e.jsxs(ha,{required:y,scope:n,trigger:g,onTriggerChange:w,valueNode:p,onValueNodeChange:h,valueNodeHasChildren:L,onValueNodeHasChildrenChange:U,contentId:He(),value:S,onValueChange:T,open:k,onOpenChange:b,dir:q,triggerPointerDownPosRef:O,disabled:N,children:[e.jsx(Ce.Provider,{scope:n,children:e.jsx(ga,{scope:t.__scopeSelect,onNativeOptionAdd:a.useCallback(M=>{H(A=>new Set(A).add(M))},[]),onNativeOptionRemove:a.useCallback(M=>{H(A=>{const B=new Set(A);return B.delete(M),B})},[]),children:s})}),I?e.jsxs(Lt,{"aria-hidden":!0,required:y,tabIndex:-1,name:v,autoComplete:f,value:S,onChange:M=>T(M.target.value),disabled:N,form:x,children:[S===void 0?e.jsx("option",{value:""}):null,Array.from(P)]},C):null]})})};ut.displayName=ie;var ht="SelectTrigger",gt=a.forwardRef((t,n)=>{const{__scopeSelect:s,disabled:i=!1,...l}=t,m=Te(s),c=se(ht,s),o=c.disabled||i,r=Z(n,c.onTriggerChange),u=Ie(s),v=a.useRef("touch"),[f,N,y]=Bt(d=>{const g=u().filter(h=>!h.disabled),w=g.find(h=>h.value===c.value),p=Ut(g,d,w);p!==void 0&&c.onValueChange(p.value)}),x=d=>{o||(c.onOpenChange(!0),y()),d&&(c.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return e.jsx(es,{asChild:!0,...m,children:e.jsx($.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Vt(c.value)?"":void 0,...l,ref:r,onClick:z(l.onClick,d=>{d.currentTarget.focus(),v.current!=="mouse"&&x(d)}),onPointerDown:z(l.onPointerDown,d=>{v.current=d.pointerType;const g=d.target;g.hasPointerCapture(d.pointerId)&&g.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(x(d),d.preventDefault())}),onKeyDown:z(l.onKeyDown,d=>{const g=f.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&N(d.key),!(g&&d.key===" ")&&ma.includes(d.key)&&(x(),d.preventDefault())})})})});gt.displayName=ht;var ft="SelectValue",xt=a.forwardRef((t,n)=>{const{__scopeSelect:s,className:i,style:l,children:m,placeholder:c="",...o}=t,r=se(ft,s),{onValueNodeHasChildrenChange:u}=r,v=m!==void 0,f=Z(n,r.onValueNodeChange);return te(()=>{u(v)},[u,v]),e.jsx($.span,{...o,ref:f,style:{pointerEvents:"none"},children:Vt(r.value)?e.jsx(e.Fragment,{children:c}):m})});xt.displayName=ft;var xa="SelectIcon",vt=a.forwardRef((t,n)=>{const{__scopeSelect:s,children:i,...l}=t;return e.jsx($.span,{"aria-hidden":!0,...l,ref:n,children:i||"â–¼"})});vt.displayName=xa;var va="SelectPortal",yt=t=>e.jsx(ds,{asChild:!0,...t});yt.displayName=va;var le="SelectContent",bt=a.forwardRef((t,n)=>{const s=se(le,t.__scopeSelect),[i,l]=a.useState();if(te(()=>{l(new DocumentFragment)},[]),!s.open){const m=i;return m?at.createPortal(e.jsx(wt,{scope:t.__scopeSelect,children:e.jsx(Ce.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),m):null}return e.jsx(jt,{...t,ref:n})});bt.displayName=le;var Y=10,[wt,ae]=ue(le),ya="SelectContentImpl",ba=ms("SelectContent.RemoveScroll"),jt=a.forwardRef((t,n)=>{const{__scopeSelect:s,position:i="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:m,onPointerDownOutside:c,side:o,sideOffset:r,align:u,alignOffset:v,arrowPadding:f,collisionBoundary:N,collisionPadding:y,sticky:x,hideWhenDetached:d,avoidCollisions:g,...w}=t,p=se(le,s),[h,L]=a.useState(null),[U,q]=a.useState(null),k=Z(n,j=>L(j)),[b,S]=a.useState(null),[T,O]=a.useState(null),I=Ie(s),[P,H]=a.useState(!1),C=a.useRef(!1);a.useEffect(()=>{if(h)return ts(h)},[h]),ss();const M=a.useCallback(j=>{const[D,...G]=I().map(E=>E.ref.current),[_]=G.slice(-1),R=document.activeElement;for(const E of j)if(E===R||(E==null||E.scrollIntoView({block:"nearest"}),E===D&&U&&(U.scrollTop=0),E===_&&U&&(U.scrollTop=U.scrollHeight),E==null||E.focus(),document.activeElement!==R))return},[I,U]),A=a.useCallback(()=>M([b,h]),[M,b,h]);a.useEffect(()=>{P&&A()},[P,A]);const{onOpenChange:B,triggerPointerDownPosRef:W}=p;a.useEffect(()=>{if(h){let j={x:0,y:0};const D=_=>{var R,E;j={x:Math.abs(Math.round(_.pageX)-(((R=W.current)==null?void 0:R.x)??0)),y:Math.abs(Math.round(_.pageY)-(((E=W.current)==null?void 0:E.y)??0))}},G=_=>{j.x<=10&&j.y<=10?_.preventDefault():h.contains(_.target)||B(!1),document.removeEventListener("pointermove",D),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",D),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",D),document.removeEventListener("pointerup",G,{capture:!0})}}},[h,B,W]),a.useEffect(()=>{const j=()=>B(!1);return window.addEventListener("blur",j),window.addEventListener("resize",j),()=>{window.removeEventListener("blur",j),window.removeEventListener("resize",j)}},[B]);const[ce,xe]=Bt(j=>{const D=I().filter(R=>!R.disabled),G=D.find(R=>R.ref.current===document.activeElement),_=Ut(D,j,G);_&&setTimeout(()=>_.ref.current.focus())}),Pe=a.useCallback((j,D,G)=>{const _=!C.current&&!G;(p.value!==void 0&&p.value===D||_)&&(S(j),_&&(C.current=!0))},[p.value]),Re=a.useCallback(()=>h==null?void 0:h.focus(),[h]),de=a.useCallback((j,D,G)=>{const _=!C.current&&!G;(p.value!==void 0&&p.value===D||_)&&O(j)},[p.value]),ve=i==="popper"?Oe:St,he=ve===Oe?{side:o,sideOffset:r,align:u,alignOffset:v,arrowPadding:f,collisionBoundary:N,collisionPadding:y,sticky:x,hideWhenDetached:d,avoidCollisions:g}:{};return e.jsx(wt,{scope:s,content:h,viewport:U,onViewportChange:q,itemRefCallback:Pe,selectedItem:b,onItemLeave:Re,itemTextRefCallback:de,focusSelectedItem:A,selectedItemText:T,position:i,isPositioned:P,searchRef:ce,children:e.jsx(as,{as:ba,allowPinchZoom:!0,children:e.jsx(rs,{asChild:!0,trapped:p.open,onMountAutoFocus:j=>{j.preventDefault()},onUnmountAutoFocus:z(l,j=>{var D;(D=p.trigger)==null||D.focus({preventScroll:!0}),j.preventDefault()}),children:e.jsx(ns,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:m,onPointerDownOutside:c,onFocusOutside:j=>j.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:e.jsx(ve,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:j=>j.preventDefault(),...w,...he,onPlaced:()=>H(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:z(w.onKeyDown,j=>{const D=j.ctrlKey||j.altKey||j.metaKey;if(j.key==="Tab"&&j.preventDefault(),!D&&j.key.length===1&&xe(j.key),["ArrowUp","ArrowDown","Home","End"].includes(j.key)){let _=I().filter(R=>!R.disabled).map(R=>R.ref.current);if(["ArrowUp","End"].includes(j.key)&&(_=_.slice().reverse()),["ArrowUp","ArrowDown"].includes(j.key)){const R=j.target,E=_.indexOf(R);_=_.slice(E+1)}setTimeout(()=>M(_)),j.preventDefault()}})})})})})})});jt.displayName=ya;var wa="SelectItemAlignedPosition",St=a.forwardRef((t,n)=>{const{__scopeSelect:s,onPlaced:i,...l}=t,m=se(le,s),c=ae(le,s),[o,r]=a.useState(null),[u,v]=a.useState(null),f=Z(n,k=>v(k)),N=Ie(s),y=a.useRef(!1),x=a.useRef(!0),{viewport:d,selectedItem:g,selectedItemText:w,focusSelectedItem:p}=c,h=a.useCallback(()=>{if(m.trigger&&m.valueNode&&o&&u&&d&&g&&w){const k=m.trigger.getBoundingClientRect(),b=u.getBoundingClientRect(),S=m.valueNode.getBoundingClientRect(),T=w.getBoundingClientRect();if(m.dir!=="rtl"){const R=T.left-b.left,E=S.left-R,re=k.left-E,ne=k.width+re,Ee=Math.max(ne,b.width),Me=window.innerWidth-Y,Ae=Ke(E,[Y,Math.max(Y,Me-Ee)]);o.style.minWidth=ne+"px",o.style.left=Ae+"px"}else{const R=b.right-T.right,E=window.innerWidth-S.right-R,re=window.innerWidth-k.right-E,ne=k.width+re,Ee=Math.max(ne,b.width),Me=window.innerWidth-Y,Ae=Ke(E,[Y,Math.max(Y,Me-Ee)]);o.style.minWidth=ne+"px",o.style.right=Ae+"px"}const O=N(),I=window.innerHeight-Y*2,P=d.scrollHeight,H=window.getComputedStyle(u),C=parseInt(H.borderTopWidth,10),M=parseInt(H.paddingTop,10),A=parseInt(H.borderBottomWidth,10),B=parseInt(H.paddingBottom,10),W=C+M+P+B+A,ce=Math.min(g.offsetHeight*5,W),xe=window.getComputedStyle(d),Pe=parseInt(xe.paddingTop,10),Re=parseInt(xe.paddingBottom,10),de=k.top+k.height/2-Y,ve=I-de,he=g.offsetHeight/2,j=g.offsetTop+he,D=C+M+j,G=W-D;if(D<=de){const R=O.length>0&&g===O[O.length-1].ref.current;o.style.bottom="0px";const E=u.clientHeight-d.offsetTop-d.offsetHeight,re=Math.max(ve,he+(R?Re:0)+E+A),ne=D+re;o.style.height=ne+"px"}else{const R=O.length>0&&g===O[0].ref.current;o.style.top="0px";const re=Math.max(de,C+d.offsetTop+(R?Pe:0)+he)+G;o.style.height=re+"px",d.scrollTop=D-de+d.offsetTop}o.style.margin=`${Y}px 0`,o.style.minHeight=ce+"px",o.style.maxHeight=I+"px",i==null||i(),requestAnimationFrame(()=>y.current=!0)}},[N,m.trigger,m.valueNode,o,u,d,g,w,m.dir,i]);te(()=>h(),[h]);const[L,U]=a.useState();te(()=>{u&&U(window.getComputedStyle(u).zIndex)},[u]);const q=a.useCallback(k=>{k&&x.current===!0&&(h(),p==null||p(),x.current=!1)},[h,p]);return e.jsx(Sa,{scope:s,contentWrapper:o,shouldExpandOnScrollRef:y,onScrollButtonChange:q,children:e.jsx("div",{ref:r,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:L},children:e.jsx($.div,{...l,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});St.displayName=wa;var ja="SelectPopperPosition",Oe=a.forwardRef((t,n)=>{const{__scopeSelect:s,align:i="start",collisionPadding:l=Y,...m}=t,c=Te(s);return e.jsx(os,{...c,...m,ref:n,align:i,collisionPadding:l,style:{boxSizing:"border-box",...m.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Oe.displayName=ja;var[Sa,$e]=ue(le,{}),De="SelectViewport",Nt=a.forwardRef((t,n)=>{const{__scopeSelect:s,nonce:i,...l}=t,m=ae(De,s),c=$e(De,s),o=Z(n,m.onViewportChange),r=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Ce.Slot,{scope:s,children:e.jsx($.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:z(l.onScroll,u=>{const v=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:N}=c;if(N!=null&&N.current&&f){const y=Math.abs(r.current-v.scrollTop);if(y>0){const x=window.innerHeight-Y*2,d=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),w=Math.max(d,g);if(w<x){const p=w+y,h=Math.min(x,p),L=p-h;f.style.height=h+"px",f.style.bottom==="0px"&&(v.scrollTop=L>0?L:0,f.style.justifyContent="flex-end")}}}r.current=v.scrollTop})})})]})});Nt.displayName=De;var kt="SelectGroup",[Na,ka]=ue(kt),Ca=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t,l=He();return e.jsx(Na,{scope:s,id:l,children:e.jsx($.div,{role:"group","aria-labelledby":l,...i,ref:n})})});Ca.displayName=kt;var Ct="SelectLabel",It=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t,l=ka(Ct,s);return e.jsx($.div,{id:l.id,...i,ref:n})});It.displayName=Ct;var ke="SelectItem",[Ia,Tt]=ue(ke),Pt=a.forwardRef((t,n)=>{const{__scopeSelect:s,value:i,disabled:l=!1,textValue:m,...c}=t,o=se(ke,s),r=ae(ke,s),u=o.value===i,[v,f]=a.useState(m??""),[N,y]=a.useState(!1),x=Z(n,p=>{var h;return(h=r.itemRefCallback)==null?void 0:h.call(r,p,i,l)}),d=He(),g=a.useRef("touch"),w=()=>{l||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Ia,{scope:s,value:i,disabled:l,textId:d,isSelected:u,onItemTextChange:a.useCallback(p=>{f(h=>h||((p==null?void 0:p.textContent)??"").trim())},[]),children:e.jsx(Ce.ItemSlot,{scope:s,value:i,disabled:l,textValue:v,children:e.jsx($.div,{role:"option","aria-labelledby":d,"data-highlighted":N?"":void 0,"aria-selected":u&&N,"data-state":u?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...c,ref:x,onFocus:z(c.onFocus,()=>y(!0)),onBlur:z(c.onBlur,()=>y(!1)),onClick:z(c.onClick,()=>{g.current!=="mouse"&&w()}),onPointerUp:z(c.onPointerUp,()=>{g.current==="mouse"&&w()}),onPointerDown:z(c.onPointerDown,p=>{g.current=p.pointerType}),onPointerMove:z(c.onPointerMove,p=>{var h;g.current=p.pointerType,l?(h=r.onItemLeave)==null||h.call(r):g.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(c.onPointerLeave,p=>{var h;p.currentTarget===document.activeElement&&((h=r.onItemLeave)==null||h.call(r))}),onKeyDown:z(c.onKeyDown,p=>{var L;((L=r.searchRef)==null?void 0:L.current)!==""&&p.key===" "||(pa.includes(p.key)&&w(),p.key===" "&&p.preventDefault())})})})})});Pt.displayName=ke;var fe="SelectItemText",Rt=a.forwardRef((t,n)=>{const{__scopeSelect:s,className:i,style:l,...m}=t,c=se(fe,s),o=ae(fe,s),r=Tt(fe,s),u=fa(fe,s),[v,f]=a.useState(null),N=Z(n,w=>f(w),r.onItemTextChange,w=>{var p;return(p=o.itemTextRefCallback)==null?void 0:p.call(o,w,r.value,r.disabled)}),y=v==null?void 0:v.textContent,x=a.useMemo(()=>e.jsx("option",{value:r.value,disabled:r.disabled,children:y},r.value),[r.disabled,r.value,y]),{onNativeOptionAdd:d,onNativeOptionRemove:g}=u;return te(()=>(d(x),()=>g(x)),[d,g,x]),e.jsxs(e.Fragment,{children:[e.jsx($.span,{id:r.textId,...m,ref:N}),r.isSelected&&c.valueNode&&!c.valueNodeHasChildren?at.createPortal(m.children,c.valueNode):null]})});Rt.displayName=fe;var Et="SelectItemIndicator",Mt=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t;return Tt(Et,s).isSelected?e.jsx($.span,{"aria-hidden":!0,...i,ref:n}):null});Mt.displayName=Et;var Le="SelectScrollUpButton",At=a.forwardRef((t,n)=>{const s=ae(Le,t.__scopeSelect),i=$e(Le,t.__scopeSelect),[l,m]=a.useState(!1),c=Z(n,i.onScrollButtonChange);return te(()=>{if(s.viewport&&s.isPositioned){let o=function(){const u=r.scrollTop>0;m(u)};const r=s.viewport;return o(),r.addEventListener("scroll",o),()=>r.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),l?e.jsx(Ot,{...t,ref:c,onAutoScroll:()=>{const{viewport:o,selectedItem:r}=s;o&&r&&(o.scrollTop=o.scrollTop-r.offsetHeight)}}):null});At.displayName=Le;var Ve="SelectScrollDownButton",_t=a.forwardRef((t,n)=>{const s=ae(Ve,t.__scopeSelect),i=$e(Ve,t.__scopeSelect),[l,m]=a.useState(!1),c=Z(n,i.onScrollButtonChange);return te(()=>{if(s.viewport&&s.isPositioned){let o=function(){const u=r.scrollHeight-r.clientHeight,v=Math.ceil(r.scrollTop)<u;m(v)};const r=s.viewport;return o(),r.addEventListener("scroll",o),()=>r.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),l?e.jsx(Ot,{...t,ref:c,onAutoScroll:()=>{const{viewport:o,selectedItem:r}=s;o&&r&&(o.scrollTop=o.scrollTop+r.offsetHeight)}}):null});_t.displayName=Ve;var Ot=a.forwardRef((t,n)=>{const{__scopeSelect:s,onAutoScroll:i,...l}=t,m=ae("SelectScrollButton",s),c=a.useRef(null),o=Ie(s),r=a.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return a.useEffect(()=>()=>r(),[r]),te(()=>{var v;const u=o().find(f=>f.ref.current===document.activeElement);(v=u==null?void 0:u.ref.current)==null||v.scrollIntoView({block:"nearest"})},[o]),e.jsx($.div,{"aria-hidden":!0,...l,ref:n,style:{flexShrink:0,...l.style},onPointerDown:z(l.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:z(l.onPointerMove,()=>{var u;(u=m.onItemLeave)==null||u.call(m),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:z(l.onPointerLeave,()=>{r()})})}),Ta="SelectSeparator",Dt=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t;return e.jsx($.div,{"aria-hidden":!0,...i,ref:n})});Dt.displayName=Ta;var Be="SelectArrow",Pa=a.forwardRef((t,n)=>{const{__scopeSelect:s,...i}=t,l=Te(s),m=se(Be,s),c=ae(Be,s);return m.open&&c.position==="popper"?e.jsx(is,{...l,...i,ref:n}):null});Pa.displayName=Be;var Ra="SelectBubbleInput",Lt=a.forwardRef(({__scopeSelect:t,value:n,...s},i)=>{const l=a.useRef(null),m=Z(i,l),c=Is(n);return a.useEffect(()=>{const o=l.current;if(!o)return;const r=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(r,"value").set;if(c!==n&&v){const f=new Event("change",{bubbles:!0});v.call(o,n),o.dispatchEvent(f)}},[c,n]),e.jsx($.select,{...s,style:{...ls,...s.style},ref:m,defaultValue:n})});Lt.displayName=Ra;function Vt(t){return t===""||t===void 0}function Bt(t){const n=cs(t),s=a.useRef(""),i=a.useRef(0),l=a.useCallback(c=>{const o=s.current+c;n(o),function r(u){s.current=u,window.clearTimeout(i.current),u!==""&&(i.current=window.setTimeout(()=>r(""),1e3))}(o)},[n]),m=a.useCallback(()=>{s.current="",window.clearTimeout(i.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(i.current),[]),[s,l,m]}function Ut(t,n,s){const l=n.length>1&&Array.from(n).every(u=>u===n[0])?n[0]:n,m=s?t.indexOf(s):-1;let c=Ea(t,Math.max(m,0));l.length===1&&(c=c.filter(u=>u!==s));const r=c.find(u=>u.textValue.toLowerCase().startsWith(l.toLowerCase()));return r!==s?r:void 0}function Ea(t,n){return t.map((s,i)=>t[(n+i)%t.length])}var Ma=ut,qt=gt,Aa=xt,_a=vt,Oa=yt,Ht=bt,Da=Nt,zt=It,Ft=Pt,La=Rt,Va=Mt,Gt=At,$t=_t,Kt=Dt;const Je=Ma,et=Aa,Ue=a.forwardRef(({className:t,children:n,...s},i)=>e.jsxs(qt,{ref:i,className:K("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[n,e.jsx(_a,{asChild:!0,children:e.jsx(ct,{className:"h-4 w-4 opacity-50"})})]}));Ue.displayName=qt.displayName;const Wt=a.forwardRef(({className:t,...n},s)=>e.jsx(Gt,{ref:s,className:K("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(Ts,{className:"h-4 w-4"})}));Wt.displayName=Gt.displayName;const Yt=a.forwardRef(({className:t,...n},s)=>e.jsx($t,{ref:s,className:K("flex cursor-default items-center justify-center py-1",t),...n,children:e.jsx(ct,{className:"h-4 w-4"})}));Yt.displayName=$t.displayName;const qe=a.forwardRef(({className:t,children:n,position:s="popper",...i},l)=>e.jsx(Oa,{children:e.jsxs(Ht,{ref:l,className:K("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...i,children:[e.jsx(Wt,{}),e.jsx(Da,{className:K("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),e.jsx(Yt,{})]})}));qe.displayName=Ht.displayName;const Ba=a.forwardRef(({className:t,...n},s)=>e.jsx(zt,{ref:s,className:K("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...n}));Ba.displayName=zt.displayName;const me=a.forwardRef(({className:t,children:n,...s},i)=>e.jsxs(Ft,{ref:i,className:K("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Va,{children:e.jsx(Fe,{className:"h-4 w-4"})})}),e.jsx(La,{children:n})]}));me.displayName=Ft.displayName;const Ua=a.forwardRef(({className:t,...n},s)=>e.jsx(Kt,{ref:s,className:K("-mx-1 my-1 h-px bg-muted",t),...n}));Ua.displayName=Kt.displayName;const tt={Crna:"#231f20",Siva:"#d1d5db",Tirkizna:"#00ab98",Cijan:"#00aeef",Plava:"#387bbf",LjubiÄasta:"#8358a4",Bijela:"#ffffff",Roza:"#e78fab",Mint:"#a1d7c0"},qa=({productId:t})=>{const[n,s]=a.useState([]),[i,l]=a.useState(!1),[m,c]=a.useState(!1),{toast:o}=ze(),[r,u]=a.useState({}),v=async()=>{l(!0);try{const x=await hs(t);s(x);const d={};x.forEach(g=>{d[g.id]={regular_price:g.regular_price,stock_quantity:g.stock_quantity??0,manage_stock:g.manage_stock??!0,sale_price:g.sale_price}}),u(d)}catch(x){console.error(x),o({title:"Error",description:"Failed to load variations",variant:"destructive"})}finally{l(!1)}};a.useEffect(()=>{t&&v()},[t]);const f=(x,d,g)=>{u(w=>({...w,[x]:{...w[x],[d]:g}}))},N=async x=>{c(!0);try{const d=r[x];await Ye(t,x,d),o({title:"Success",description:"Variation updated"}),v()}catch{o({title:"Error",description:"Failed to update variation",variant:"destructive"})}finally{c(!1)}},y=async()=>{c(!0);try{const x=n.map(d=>Ye(t,d.id,r[d.id]));await Promise.all(x),o({title:"Success",description:"All variations updated"}),v()}catch{o({title:"Error",description:"Failed to update some variations",variant:"destructive"})}finally{c(!1)}};return i?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(ee,{className:"animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Variations (",n.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{variant:"outline",size:"sm",onClick:v,title:"Refresh",children:e.jsx(Ms,{className:"w-4 h-4"})}),e.jsxs(F,{onClick:y,disabled:m,size:"sm",children:[m?e.jsx(ee,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Save All"]})]})]}),e.jsxs("div",{className:"grid gap-4",children:[n.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed rounded-lg",children:"No variations found. Add attributes in WooCommerce first."}),n.map(x=>e.jsx(Ha,{variation:x,editData:r[x.id],onChange:(d,g)=>f(x.id,d,g),onSave:()=>N(x.id),saving:m},x.id))]})]})},Ha=({variation:t,editData:n,onChange:s,onSave:i,saving:l})=>{var v;const[m,c]=a.useState(!1),o=(v=t.attributes)==null?void 0:v.find(f=>tt[f.option]),r=o?tt[o.option]:null,u=t.attributes.map(f=>`${f.option}`).join(" / ");return n?e.jsx(oe,{className:"overflow-hidden border-none shadow-md bg-white rounded-2xl transition-all",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[r&&e.jsx("div",{className:"w-5 h-5 rounded-full border border-slate-200 shadow-sm shrink-0",style:{backgroundColor:r}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 text-sm leading-tight",children:u||`Variation #${t.id}`}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["ID: ",t.id]}),e.jsx(dt,{variant:"outline",className:"text-[9px] font-black h-4 px-1 leading-none uppercase tracking-tighter border-slate-200 text-slate-500",children:t.stock_status})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(V,{className:"text-[9px] font-bold uppercase text-slate-400 ml-1",children:"Stock"}),e.jsx(J,{type:"number",className:"w-full sm:w-20 h-10 rounded-full bg-slate-50 border-none font-bold text-center sm:text-right focus:bg-white",value:n.stock_quantity??0,onChange:f=>s("stock_quantity",parseInt(f.target.value)||0)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(V,{className:"text-[9px] font-bold uppercase text-slate-400 ml-1",children:"Price (â‚¬)"}),e.jsx(J,{type:"number",className:"w-full sm:w-20 h-10 rounded-full bg-slate-50 border-none font-bold text-center sm:text-right focus:bg-white",value:n.regular_price,onChange:f=>s("regular_price",f.target.value)})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-50",children:[e.jsx(F,{variant:"ghost",size:"sm",onClick:()=>c(!m),className:"text-primary font-bold text-xs uppercase tracking-wider hover:bg-primary/5 rounded-full px-4",children:m?"Skloni detalje":"ViÅ¡e detalja"}),e.jsxs(F,{size:"sm",onClick:i,disabled:l,className:"rounded-full font-bold text-xs uppercase tracking-wider px-4 min-w-[100px]",children:[l?e.jsx(ee,{className:"w-3 h-3 animate-spin"}):e.jsx(Se,{className:"w-3 h-3 mr-2"}),"Spremi"]})]}),e.jsx(Rs,{open:m,children:e.jsx(Es,{className:"pt-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"text-[10px] font-bold uppercase text-slate-400 ml-1",children:"Akcijska Cijena (â‚¬)"}),e.jsx(J,{className:"h-10 rounded-full bg-slate-50 border-none font-bold focus:bg-white px-6",value:n.sale_price||"",onChange:f=>s("sale_price",f.target.value),placeholder:"Npr. 19.99"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-6 sm:pt-4 ml-1",children:[e.jsx("div",{className:K("w-10 h-6 rounded-full p-1 cursor-pointer transition-colors duration-200 ease-in-out",n.manage_stock?"bg-primary":"bg-slate-200"),onClick:()=>s("manage_stock",!n.manage_stock),children:e.jsx("div",{className:K("w-4 h-4 bg-white rounded-full transition-transform duration-200 ease-in-out shadow-sm",n.manage_stock?"translate-x-4":"translate-x-0")})}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500 tracking-wider",children:"Upravljaj zalihama"})]})]})})})]})}):null},za=({product:t,initialImage:n,onSuccess:s})=>{const[i,l]=a.useState(""),[m,c]=a.useState(""),[o,r]=a.useState(""),[u,v]=a.useState(""),[f,N]=a.useState(""),[y,x]=a.useState(""),[d,g]=a.useState([]),[w,p]=a.useState("instock"),[h,L]=a.useState(!1),[U,q]=a.useState(0),[k,b]=a.useState("simple"),[S,T]=a.useState(!1),{toast:O}=ze(),[I,P]=a.useState("general");a.useEffect(()=>{var C,M;if(t){l(t.name),c(t.sale_price||""),r(t.regular_price||t.price),v(t.description),N(t.short_description),x(((M=(C=t.images)==null?void 0:C[0])==null?void 0:M.src)||"");const A=t.images||[];A.length>1?g(A.slice(1).map(B=>B.src)):g([]),p(t.stock_status),L(t.manage_stock),q(t.stock_quantity??0),b(t.type==="variable"?"variable":"simple")}else l(""),c(""),r(""),v(""),N(""),x(n||""),g([]),p("instock"),L(!0),q(0),b("simple")},[t,n]);const H=async C=>{T(!0);const M=[];y&&M.push({src:y}),d.length>0&&d.forEach(B=>M.push({src:B}));const A={name:i,regular_price:o,description:u,short_description:f,stock_status:w,manage_stock:h,images:M,type:k};h&&k==="simple"&&(A.stock_quantity=U),m&&(A.sale_price=m!==o?m:"");try{t?(await xs(t.id,A),O({title:"Success",description:"Product updated successfully"})):(await vs(A),O({title:"Success",description:"Product created successfully"})),s()}catch(B){console.error("Product save error:",B),O({title:"Error",description:"Failed to save product. Check permissions.",variant:"destructive"})}finally{T(!1)}};return e.jsxs("div",{className:"space-y-8 pb-32 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white/80 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl shadow-slate-200/50 border border-slate-100 mb-8 sticky top-4 z-40 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center",children:e.jsx(gs,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-900 font-heading uppercase tracking-tight",children:t?i:"Novi Proizvod"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{variant:"outline",className:"text-[9px] font-black uppercase tracking-widest border-slate-200 text-slate-400",children:k==="variable"?"Varijabilni":"Jednostavni"}),t&&e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["ID: ",t.id]})]})]})]}),e.jsxs(F,{onClick:()=>H(),disabled:S,className:"w-full sm:w-auto px-8 h-12 rounded-full font-black text-xs uppercase tracking-widest shadow-xl shadow-primary/20 hover:shadow-primary/30 transition-all flex items-center justify-center",children:[S?e.jsx(ee,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Se,{className:"w-4 h-4 mr-2 stroke-[3]"}),"Spremi Promjene"]})]}),e.jsxs(ot,{value:I,onValueChange:P,className:"w-full",children:[e.jsxs(it,{className:"grid grid-cols-2 md:grid-cols-4 w-full h-auto mb-10 bg-slate-100/50 p-2 rounded-2xl gap-2",children:[e.jsxs(pe,{value:"general",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(zs,{className:"w-4 h-4 mr-2"})," OpÄ‡e"]}),e.jsxs(pe,{value:"inventory",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(rt,{className:"w-4 h-4 mr-2"})," Zaliha"]}),e.jsxs(pe,{value:"media",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(fs,{className:"w-4 h-4 mr-2"})," Mediji"]}),e.jsxs(pe,{value:"variations",disabled:k!=="variable",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all disabled:opacity-30",children:[e.jsx(Ls,{className:"w-4 h-4 mr-2"})," Varijacije"]})]}),e.jsx(je,{value:"general",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(oe,{children:[e.jsxs(ye,{children:[e.jsx(be,{children:"Basic Information"}),e.jsx(Qe,{children:"Product identity and pricing"})]}),e.jsxs(we,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"Product Name"}),e.jsx(J,{value:i,onChange:C=>l(C.target.value),placeholder:"e.g. Vintage T-Shirt",className:"text-lg font-medium rounded-full px-6"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"Product Type"}),e.jsxs(Je,{value:k,onValueChange:C=>b(C),children:[e.jsx(Ue,{children:e.jsx(et,{})}),e.jsxs(qe,{children:[e.jsx(me,{value:"simple",children:"Simple Product"}),e.jsx(me,{value:"variable",children:"Variable Product (Sizes/Colors)"})]})]})]})]}),k==="simple"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"Regular Price (â‚¬)"}),e.jsx(J,{type:"number",value:o,onChange:C=>r(C.target.value),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(V,{children:["Sale Price (â‚¬) ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx(J,{type:"number",value:m,onChange:C=>c(C.target.value),placeholder:"0.00"})]})]}):e.jsxs("div",{className:"p-4 bg-blue-50 text-blue-800 rounded-lg border border-blue-100 mb-6",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(As,{className:"w-4 h-4"}),"Variable Product Pricing"]}),e.jsxs("p",{className:"text-sm mt-1 opacity-90",children:["Prices for variable products are managed in the ",e.jsx("strong",{children:"Variations"})," tab."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"Short Description"}),e.jsx("div",{className:"h-44 mb-8",children:e.jsx(Xe,{theme:"snow",value:f,onChange:N,className:"h-32 bg-white"})})]}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(V,{children:"Full Description"}),e.jsx("div",{className:"h-80 mb-8",children:e.jsx(Xe,{theme:"snow",value:u,onChange:v,className:"h-64 bg-white"})})]})]})]})}),e.jsx(je,{value:"inventory",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(oe,{children:[e.jsx(ye,{children:e.jsx(be,{children:"Inventory Management"})}),e.jsxs(we,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{children:[e.jsx(V,{className:"text-base",children:"Manage Stock Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable stock management at product level"})]}),e.jsx(nt,{checked:h,onCheckedChange:L})]}),h&&k==="simple"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"Stock Quantity"}),e.jsx(J,{type:"number",value:U,onChange:C=>q(parseInt(C.target.value)),className:"max-w-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"Stock Status"}),e.jsxs(Je,{value:w,onValueChange:p,children:[e.jsx(Ue,{className:"max-w-xs",children:e.jsx(et,{})}),e.jsxs(qe,{children:[e.jsx(me,{value:"instock",children:"In Stock"}),e.jsx(me,{value:"outofstock",children:"Out of Stock"}),e.jsx(me,{value:"onbackorder",children:"On Backorder"})]})]})]})]})]})}),e.jsx(je,{value:"media",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(oe,{children:[e.jsx(ye,{children:e.jsx(be,{children:"Product Images"})}),e.jsxs(we,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"Main Product Image"}),e.jsx(Ze,{value:y,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{children:"Gallery Images"}),e.jsx(Ze,{value:d,onChange:g,multiple:!0})]})]})]})}),e.jsx(je,{value:"variations",className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(oe,{children:[e.jsxs(ye,{children:[e.jsx(be,{children:"Variations"}),e.jsx(Qe,{children:"Manage stock and prices for each variation (Size, Color, etc.)"})]}),e.jsx(we,{children:t&&k==="variable"?t.type==="variable"?e.jsx(qa,{productId:t.id}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-800 rounded-full",children:e.jsx(Se,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Save Changes First"}),e.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"You've changed the product type to Variable. Please save the product to enable variation management."})]}),e.jsx(F,{onClick:()=>H(),disabled:S,children:S?e.jsx(ee,{className:"w-4 h-4 animate-spin mr-2"}):"Save & Continue"})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Set product type to "Variable Product" under General tab to manage variations.'})})]})})]})]})},mr=()=>{const{id:t}=ys(),n=bs(),{toast:s}=ze(),[i,l]=a.useState(!1),[m,c]=a.useState(null),[o,r]=a.useState("selection"),[u,v]=a.useState("");a.useEffect(()=>{t?(f(parseInt(t)),r("editor")):r("selection")},[t]);const f=async y=>{l(!0);try{const x=await ws(y);c(x)}catch(x){console.error(x),s({title:"Error",description:"Could not load product",variant:"destructive"}),n("/admin/products")}finally{l(!1)}},N=()=>{n("/admin/products")};return i?e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx(ee,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"max-w-5xl mx-auto space-y-10 animate-fade-in pb-20",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-slate-200/60 pb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{variant:"outline",size:"icon",onClick:()=>n("/admin/products"),className:"rounded-full h-10 w-10 md:h-12 md:w-12 border-slate-200 hover:bg-slate-50 shrink-0",children:e.jsx(lt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-3xl lg:text-4xl font-black font-heading text-slate-900 tracking-tight uppercase leading-tight",children:t?"UREDI PROIZVOD":"NOVI PROIZVOD"}),e.jsx("p",{className:"text-slate-500 text-sm md:text-lg font-medium mt-1",children:"Konfigurirajte detalje proizvoda i zalihe."})]})]})}),e.jsx(oe,{className:"border-none shadow-xl shadow-slate-200/40 bg-white rounded-[2rem] md:rounded-[2.5rem] overflow-hidden",children:e.jsxs("div",{className:"p-4 md:p-8 lg:p-10",children:[!t&&o==="selection"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-8",children:[e.jsxs("div",{className:"border-2 border-dashed border-slate-100 rounded-[2rem] p-10 text-center hover:border-blue-500/30 hover:bg-blue-50/30 cursor-pointer transition-all group shadow-sm hover:shadow-md",onClick:()=>r("generator"),children:[e.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-200 transition-colors",children:e.jsx(Ne,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Generate with AI"}),e.jsx("p",{className:"text-gray-500",children:"Use Nano Banana to create a unique design based on Roko's style."})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-100 rounded-[2rem] p-10 text-center hover:border-slate-300 hover:bg-slate-50/50 cursor-pointer transition-all group shadow-sm hover:shadow-md",onClick:()=>r("editor"),children:[e.jsx("div",{className:"bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-gray-200 transition-colors",children:e.jsx(Ps,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Manual Upload"}),e.jsx("p",{className:"text-gray-500",children:"Skip generation and upload your own product images manually."})]})]}),!t&&o==="generator"&&e.jsx(ra,{onImageSelect:y=>{v(y),r("preview")},onCancel:()=>r("selection")}),!t&&o==="preview"&&e.jsx(da,{generatedDesign:u,onConfirm:y=>{v(y),r("editor")},onBack:()=>r("generator")}),(t||o==="editor")&&e.jsx(za,{product:m,initialImage:u,onSuccess:N})]})})]})};export{mr as default};
