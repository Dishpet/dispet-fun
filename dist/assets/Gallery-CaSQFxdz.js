import{_ as h,a as x,b as N,c as S,d as C,e as G,f as A,g as E,h as I,i as P,j as k,k as D,l as L,m as M,n as B,o as F,p as O,q as T,r as U,s as z,t as R,u as q,v as J,w as $,x as W,y as Y,z as H,A as K,B as Q,C as V,D as X,E as Z}from"./dispet galerija (9)-B60ISMr6.js";import{r as c,b as ee,c as se,j as e,L as ae,B as te}from"./index-CSj38plj.js";import{g as le,u as re,c as ie}from"./posts-BgcMLZGo.js";import{M as _e}from"./MediaPicker-CsbJgEDt.js";import{T as oe}from"./trash-2-DLglMK3D.js";import"./check-B2G0Veot.js";import"./chevron-right-VIIZqnKR.js";const ce=Object.assign({"/src/assets/gallery/dispet galerija (1).webp":h,"/src/assets/gallery/dispet galerija (10).webp":x,"/src/assets/gallery/dispet galerija (11).webp":N,"/src/assets/gallery/dispet galerija (12).webp":S,"/src/assets/gallery/dispet galerija (13).webp":C,"/src/assets/gallery/dispet galerija (14).webp":G,"/src/assets/gallery/dispet galerija (15).webp":A,"/src/assets/gallery/dispet galerija (16).webp":E,"/src/assets/gallery/dispet galerija (17).webp":I,"/src/assets/gallery/dispet galerija (18).webp":P,"/src/assets/gallery/dispet galerija (19).webp":k,"/src/assets/gallery/dispet galerija (2).webp":D,"/src/assets/gallery/dispet galerija (20).webp":L,"/src/assets/gallery/dispet galerija (21).webp":M,"/src/assets/gallery/dispet galerija (22).webp":B,"/src/assets/gallery/dispet galerija (23).webp":F,"/src/assets/gallery/dispet galerija (24).webp":O,"/src/assets/gallery/dispet galerija (25).webp":T,"/src/assets/gallery/dispet galerija (26).webp":U,"/src/assets/gallery/dispet galerija (27).webp":z,"/src/assets/gallery/dispet galerija (28).webp":R,"/src/assets/gallery/dispet galerija (29).webp":q,"/src/assets/gallery/dispet galerija (3).webp":J,"/src/assets/gallery/dispet galerija (30).webp":$,"/src/assets/gallery/dispet galerija (31).webp":W,"/src/assets/gallery/dispet galerija (32).webp":Y,"/src/assets/gallery/dispet galerija (4).webp":H,"/src/assets/gallery/dispet galerija (5).webp":K,"/src/assets/gallery/dispet galerija (6).webp":Q,"/src/assets/gallery/dispet galerija (7).webp":V,"/src/assets/gallery/dispet galerija (8).webp":X,"/src/assets/gallery/dispet galerija (9).webp":Z}),j=Object.entries(ce).sort((o,r)=>{var g,_;const l=parseInt(((g=o[0].match(/\((\d+)\)/))==null?void 0:g[1])||"0"),i=parseInt(((_=r[0].match(/\((\d+)\)/))==null?void 0:_[1])||"0");return l-i}).map(([o,r],l)=>({id:`def-${l+1}`,src:r,alt:`Gallery image ${l+1}`})),v="config-gallery";function ue(){const[o,r]=c.useState(null),[l,i]=c.useState([]),[g,_]=c.useState(!0),[ge,p]=c.useState(!1),{toast:n}=ee();c.useEffect(()=>{u()},[]);const u=async()=>{_(!0);try{const t=(await le()).find(a=>a.slug===v);if(t){r(t);const a=se(t.content.rendered);if(Array.isArray(a)&&a.length>0){i(a),_(!1);return}}i(j)}catch(s){console.error(s),i(j),n({title:"Error",description:"Failed to load gallery config",variant:"destructive"})}finally{_(!1)}},b=async s=>{p(!0);const t=JSON.stringify(s);try{if(o)await re(o.id,{content:t}),n({title:"Saved",description:"Gallery updated."});else{const a=await ie({title:"System Config: Gallery",content:t,slug:v,status:"private"});r(a),n({title:"Created",description:"Gallery initialized."})}i(s)}catch(a){console.error(a),n({title:"Error",description:"Failed to save",variant:"destructive"})}finally{p(!1)}},m=s=>{const t=[];(Array.isArray(s)?s:[s]).forEach(d=>{var y;t.push({id:crypto.randomUUID(),src:d.source_url,alt:d.alt_text||((y=d.title)==null?void 0:y.rendered)||"Gallery Image"})});const w=[...l,...t];b(w)},f=s=>{if(!confirm("Remove image?"))return;const t=l.filter(a=>a.id!==s);b(t)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Gallery Settings"}),e.jsx("p",{className:"text-sm text-gray-500",children:'Manage images in the "DiÅ¡pet u akciji" section.'})]}),e.jsx("div",{children:e.jsx(_e,{value:[],onChange:()=>{},onSelectMedia:m,multiple:!0})})]}),g?e.jsx("div",{className:"py-20 flex justify-center",children:e.jsx(ae,{className:"w-8 h-8 animate-spin text-gray-400"})}):e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[l.map(s=>e.jsxs("div",{className:"relative aspect-square group rounded-xl overflow-hidden border bg-gray-100",children:[e.jsx("img",{src:s.src,alt:s.alt,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(te,{variant:"destructive",size:"icon",onClick:()=>f(s.id),children:e.jsx(oe,{className:"w-5 h-5"})})})]},s.id)),l.length===0&&e.jsxs("div",{className:"col-span-full py-20 text-center border-2 border-dashed rounded-xl bg-gray-50 text-gray-400",children:[e.jsx("p",{children:"Gallery is empty."}),e.jsx("p",{className:"text-sm",children:'Click "Select Image(s)" to add photos.'})]})]})]})}export{ue as default};
