import{l as M,r,b as G,j as e,B as l,n as O,X as B,a as L,g as b,I,L as A,M as J,aq as K}from"./index-BKbxvgq5.js";import{g as _,u as q,c as H}from"./posts-BKVl4xW0.js";import{M as W}from"./MediaPicker-uAR9SGDs.js";import{B as X}from"./badge-CpPTVqfV.js";import{C as Z,a as Q}from"./collapsible-BmxTPHm3.js";import{c as V,d as Y,n as $,s as ee}from"./sun-city-sport-CUCMvFAA.js";import{P as ae}from"./plus-DfuFmXlM.js";import{G as se}from"./globe-DnJ4Eoc3.js";import{S as te}from"./save-BYce4JsV.js";import{T as re}from"./trash-2-DrZOcEFc.js";import"./check-cYnyCRp2.js";import"./chevron-right-DtsioKQu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=M("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),E=[{id:"def-1",name:"Caelor",link:"",logoUrl:V},{id:"def-2",name:"Digital Produkt",link:"",logoUrl:Y},{id:"def-3",name:"NK Spalato",link:"",logoUrl:$},{id:"def-4",name:"Sun City Sport",link:"",logoUrl:ee}],T="config-partners";function je(){const[v,N]=r.useState(null),[n,c]=r.useState([]),[w,x]=r.useState(!0),[k,y]=r.useState(!1),[d,m]=r.useState(!1),[i,p]=r.useState(null),[P,h]=r.useState(""),[S,u]=r.useState(""),[g,f]=r.useState(""),{toast:o}=G();r.useEffect(()=>{z()},[]);const z=async()=>{x(!0);try{const t=(await _()).find(s=>s.slug===T);if(t){N(t);try{const s=t.content.rendered.replace(/<[^>]*>?/gm,""),j=JSON.parse(s);if(Array.isArray(j)&&j.length>0){c(j),x(!1);return}}catch(s){console.error("Failed to parse partners config",s)}}c(E)}catch(a){console.error(a),c(E),o({title:"Greška",description:"Neuspješno učitavanje. Prikazane zadane postavke.",variant:"destructive"})}finally{x(!1)}},C=async a=>{y(!0);const t=JSON.stringify(a);try{if(v)await q(v.id,{content:t}),o({title:"Spremljeno",description:"Popis partnera je ažuriran."});else{const s=await H({title:"System Config: Partners",content:t,slug:T,status:"private"});N(s),o({title:"Kreirano",description:"Konfiguracija je inicijalizirana."})}c(a),m(!1),p(null)}catch(s){console.error(s),o({title:"Greška",description:"Neuspješno spremanje konfiguracije",variant:"destructive"})}finally{y(!1)}},R=a=>{p(a.id),h(a.name),u(a.link),f(a.logoUrl),m(!0),window.scrollTo({top:0,behavior:"smooth"})},U=()=>{p(null),h(""),u(""),f(""),m(a=>!a)},D=()=>{if(!g){o({title:"Nedostaje logo",description:"Molimo odaberite logo partnera.",variant:"destructive"});return}const a={id:i||crypto.randomUUID(),name:P,link:S,logoUrl:g};let t;i?t=n.map(s=>s.id===i?a:s):t=[...n,a],C(t)},F=a=>{if(!confirm("Jeste li sigurni da želite obrisati ovog partnera?"))return;const t=n.filter(s=>s.id!==a);C(t)};return e.jsxs("div",{className:"space-y-10 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-slate-200/60 pb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-black font-heading text-slate-900 tracking-tight uppercase",children:"PARTNERI"}),e.jsx("p",{className:"text-slate-500 text-sm md:text-lg font-medium mt-1",children:"Upravljajte logotipima partnera na naslovnici."})]}),e.jsxs(l,{onClick:U,disabled:w,className:O("w-full md:w-auto h-12 px-6 rounded-full font-black text-xs uppercase tracking-widest shadow-lg transition-all shadow-primary/10",d?"bg-slate-900":"bg-primary"),children:[d?e.jsx(B,{className:"w-4 h-4 mr-2"}):e.jsx(ae,{className:"w-4 h-4 mr-2"}),d?"Zatvori Formu":"Dodaj Partnera"]})]}),e.jsx(Z,{open:d,children:e.jsx(Q,{children:e.jsx(L,{className:"border-none shadow-xl shadow-slate-200/40 bg-white rounded-[2.5rem] overflow-hidden mb-12",children:e.jsxs("div",{className:"p-6 md:p-10 space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-black text-slate-900 tracking-tight uppercase",children:i?"Uredi Partnera":"Novi Partner"}),e.jsx(X,{variant:"secondary",className:"bg-slate-50 text-slate-400 font-bold uppercase tracking-widest text-[9px] px-3 py-1",children:"Konfiguracija"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-[10px] uppercase font-black text-slate-400 ml-1 tracking-widest",children:"Ime Partnera"}),e.jsx(I,{value:P,onChange:a=>h(a.target.value),placeholder:"npr. Moja Tvrtka",className:"h-12 rounded-full bg-slate-50 border-none shadow-sm focus-visible:ring-primary/20 font-bold px-6"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-[10px] uppercase font-black text-slate-400 ml-1 tracking-widest",children:"Web Adresa (Link)"}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-300"}),e.jsx(I,{value:S,onChange:a=>u(a.target.value),placeholder:"https://primjer.com",className:"h-12 pl-11 rounded-full bg-slate-50 border-none shadow-sm focus-visible:ring-primary/20 font-bold"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{className:"text-[10px] uppercase font-black text-slate-400 ml-1 tracking-widest",children:"Logo Partnera"}),e.jsx(W,{value:g,onChange:f})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(l,{variant:"ghost",onClick:()=>{m(!1),p(null)},className:"h-12 px-6 rounded-full font-bold uppercase text-[10px] tracking-widest",children:"Odustani"}),e.jsxs(l,{onClick:D,disabled:k,className:"h-12 px-10 rounded-full bg-slate-900 hover:bg-black font-black uppercase text-[10px] tracking-widest shadow-lg shadow-slate-900/10",children:[k?e.jsx(A,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(te,{className:"w-4 h-4 mr-2"}),i?"Ažuriraj Partnera":"Spremi Partnera"]})]})]})})})}),w?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center gap-4",children:[e.jsx(A,{className:"w-8 h-8 animate-spin text-slate-300"}),e.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px]",children:"Učitavanje partnera..."})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[n.map(a=>e.jsx(L,{className:"group overflow-hidden border-none shadow-lg shadow-slate-200/30 bg-white rounded-[2.5rem] transition-all duration-500 hover:shadow-xl hover:shadow-slate-300/40",children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsx("div",{className:"h-32 w-full rounded-[1.5rem] bg-slate-50 border border-slate-100/50 flex items-center justify-center p-6 mb-6 group-hover:bg-white transition-colors duration-500",children:e.jsx("img",{src:a.logoUrl,alt:a.name,className:"max-w-full max-h-full object-contain filter grayscale group-hover:grayscale-0 transition-all duration-500"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-black text-slate-900 tracking-tight leading-none truncate uppercase",children:a.name||"Bez imena"}),a.link&&e.jsxs("a",{href:a.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-[10px] font-bold text-slate-400 hover:text-primary transition-colors mt-2 uppercase tracking-widest",children:["Pregled stranice ",e.jsx(J,{className:"w-3 h-3 ml-1.5"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-slate-50",children:[e.jsxs(l,{variant:"ghost",size:"sm",onClick:()=>R(a),className:"flex-1 h-10 rounded-full bg-slate-50 text-slate-600 font-bold text-[10px] uppercase tracking-widest hover:bg-slate-900 hover:text-white transition-all shadow-sm",children:[e.jsx(le,{className:"w-3 h-3 mr-2"})," Uredi"]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>F(a.id),className:"h-10 w-10 p-0 rounded-full bg-rose-50 text-rose-500 hover:bg-rose-500 hover:text-white transition-all shadow-sm",children:e.jsx(re,{className:"w-3.5 h-3.5"})})]})]})]})},a.id)),n.length===0&&e.jsxs("div",{className:"col-span-full py-32 text-center bg-white rounded-[3rem] border border-dashed border-slate-200",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-slate-50 flex items-center justify-center mx-auto mb-6",children:e.jsx(K,{className:"h-8 w-8 text-slate-300"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 uppercase",children:"NEMA DEFINIRANIH PARTNERA"}),e.jsx(l,{onClick:U,variant:"outline",className:"mt-6 rounded-full px-8 py-6 h-auto font-black text-[10px] uppercase tracking-widest",children:"Dodaj prvog partnera"})]})]})]})}export{je as default};
