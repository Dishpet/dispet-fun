const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/client-BQat062x.js","assets/posts-BKVl4xW0.js","assets/index-BKbxvgq5.js","assets/index-CQvm5HWR.css"])))=>i.map(i=>d[i]);
import{l as W,j as e,a as oe,n as G,r as a,L as ee,I as J,B as $,Z as X,_ as ns,$ as rt,a0 as Y,a1 as Oe,a2 as F,a3 as z,a4 as os,a5 as is,g as B,a6 as ls,a7 as nt,a8 as cs,a9 as te,aa as ot,ab as ds,ac as ps,ad as us,ae as hs,af as ms,ag as gs,ah as Fe,ai as fs,aj as xs,ak as vs,al as ys,am as bs,an as Qe,ao as ws,ap as js,b as $e,V as Ss,Y as Ze,S as Ns,aq as ks,F as ye,J as be,ar as Xe,K as we,W as Cs,as as Is,w as Ts,u as Ps,at as Rs}from"./index-BKbxvgq5.js";import{M as Es,B as it}from"./minus-CA1h30V1.js";import{P as Ms}from"./palette-v2b3T9E2.js";import{C as As,S as _s,R as Os}from"./send-Bq0NDBWC.js";import{C as Ge}from"./check-cYnyCRp2.js";import{u as lt,T as ct,a as dt,b as ue,S as ge,c as je}from"./tabs-CSEWp_YY.js";import{A as pt}from"./arrow-left-Ttr0BqwX.js";import{a as ut,C as Ds}from"./chevron-up-D--Op4Lx.js";import{M as Je,U as Ls}from"./MediaPicker-uAR9SGDs.js";import{R as et}from"./quill.snow-B3-UbDyU.js";import{B as ht}from"./badge-CpPTVqfV.js";import{C as Bs,a as Us}from"./collapsible-BmxTPHm3.js";import{S as Se}from"./save-BYce4JsV.js";import{I as Vs}from"./info-SaFdPMMo.js";import"./chevron-right-DtsioKQu.js";import"./isEqual-Dhwe0ysg.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=W("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=W("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=W("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=W("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=W("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=W("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=W("Shapes",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=W("SmilePlus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=W("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=W("SquareMinus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=W("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=W("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),Xs="/assets/synthwave-Bd5V0bcH.png",mt="/assets/gta-BHWTrAUF.png",Js="/assets/cyberpunk-BiFiaIyt.png",De="/assets/cartoon-mascot-CrXA2aaB.png",gt="/assets/vintage-Bz0qyTfs.png",ea="/assets/inkpunk-COqtlBTn.png",ta="/assets/fantasy-BFCu2v4t.png",Ke="/assets/abstract-geometry--IPRceCC.png",sa=De,aa=Ke,ra=gt,na=mt,oa=Ke,ia=[{id:"no-style",name:"No Style / Basic",icon:Es,image:De,description:"ÄŒisti karakter bez dodatnih stilova"},{id:"cartoon",name:"Cartoon / Mascot",icon:Ws,image:De,description:"Razigrani maskota stil"},{id:"synthwave",name:"Synthwave",icon:Ms,image:Xs,description:"Retro 80-ih neon vibra"},{id:"gta",name:"GTA Style",icon:zs,image:mt,description:"Smjela strip estetika"},{id:"cyberpunk",name:"Cyberpunk",icon:Hs,image:Js,description:"FuturistiÄka neon tehnologija"},{id:"anime",name:"Anime Style",icon:Ne,image:sa,description:"Japanski anime stil"},{id:"3d",name:"3D Stylized",icon:it,image:aa,description:"Stilizirani 3D model"},{id:"retro",name:"Retro / Vintage",icon:As,image:gt,description:"Vintage poster umjetnost"},{id:"inkpunk",name:"Inkpunk Style",icon:Gs,image:ea,description:"KaotiÄne mrlje tinte"},{id:"steampunk",name:"Steampunk",icon:qs,image:ra,description:"MehaniÄki mjedeni stil"},{id:"noir",name:"Noir / Dark Comic",icon:$s,image:na,description:"Crno-bijeli strip noir"},{id:"fantasy",name:"Fantasy / RPG",icon:Zs,image:ta,description:"MagiÄni RPG stil"},{id:"minimalist",name:"Minimalist Modern",icon:Ys,image:oa,description:"ÄŒisti, jednostavni oblici"},{id:"abstract-geometry",name:"Apstraktna Geometrija",icon:Ks,image:Ke,description:"Geometrijski oblici i fragmenti"}],la=({selectedStyle:t,onStyleSelect:r})=>e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"mb-4 text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Odaberi Stil"}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 scrollbar-hide mask-fade-sides",children:ia.map(s=>{const i=t===s.id;return e.jsxs(oe,{className:G("group relative min-w-[80px] w-[100px] aspect-square cursor-pointer overflow-hidden border transition-all hover:scale-105 flex-shrink-0",i?"border-primary":"border-transparent hover:border-primary/50"),onClick:()=>r(s.id),children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:s.image,alt:s.name,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-110"}),e.jsx("div",{className:G("absolute inset-0 bg-black/40 transition-opacity",i?"opacity-20":"opacity-40 group-hover:opacity-30")})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-end p-3",children:e.jsx("h3",{className:"text-xs font-bold text-white uppercase tracking-wide drop-shadow-lg",children:s.name})}),i&&e.jsx("div",{className:"absolute top-2 right-2 h-6 w-6 rounded-full bg-primary flex items-center justify-center shadow-lg",children:e.jsx("div",{className:"h-2 w-2 rounded-full bg-white"})})]},s.id)})})]}),ca="/assets/roko-casual-LTalTbJo.png",da="/assets/roko-sport-DAd3YuQC.png",pa="/assets/roko-head-BgcIOxNZ.png",ua=({onImageSelect:t,onCancel:r})=>{const[s,i]=a.useState(""),[l,p]=a.useState("cartoon"),[c,o]=a.useState(!1),[n,m]=a.useState(null),v=async y=>new Promise((x,d)=>{const g=new Image;g.crossOrigin="anonymous",g.onload=()=>{const b=document.createElement("canvas");b.width=g.width,b.height=g.height;const u=b.getContext("2d");u==null||u.drawImage(g,0,0),x(b.toDataURL("image/png"))},g.onerror=d,g.src=y}),f=async()=>{if(!s.trim()){X.error("Molimo unesite opis dizajna");return}o(!0),m(null);try{const{refinePrompt:y,generateImageWithGemini:x}=await ns(async()=>{const{refinePrompt:k,generateImageWithGemini:w}=await import("./client-BQat062x.js");return{refinePrompt:k,generateImageWithGemini:w}},__vite__mapDeps([0,1,2,3])),d=[pa,ca,da],g=await Promise.all(d.map(k=>v(k)));X.info("Refining prompt...");const b=await y(s);console.log("Refined:",b);const u=s||"striking a fun, energetic pose",h=`
ðŸŽ­ MASCOT CHARACTER "ROKO":
âš ï¸ MOST CRITICAL: The character's EXACT appearance is provided in the attached 3 reference images. 
ðŸ“¸ IMAGE 1 is the FACE reference. IMAGES 2-3 are for character/outfit reference.
Copy EXACT facial features from IMAGE 1 (Headshot). The face is the character's identity - get it EXACTLY right.
ðŸš« IMPORTANT: DO NOT include any shop logos, text emblems, or specific branding designs (like logo-5) that may be visible in the reference images. The character should have CLEAN clothing without any specific shop designs.
DO NOT use generic animal data. Roko is a character exactly as shown in references.
            `,M={"no-style":`Create a high-resolution version of the mascot character (ROKO) ${u} in a square aspect ratio. Focus purely on the character's likeness and the requested action.

${h}`,anime:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, energetic anime effects, cel-shaded coloring, motion streaks, and vibrant color accents.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear, character-based graphics, or modern pop-anime poster styles.

ANIME STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Anime-style effects, speed lines, glow accents`,synthwave:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, neon gradients, retro 80s colors, gridlines, glowing geometric fragments, and synthwave sun elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear, neon-retro artwork, or modern synthwave poster design.

SYNTHWAVE STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Neon, chrome, and synthwave design elements`,gta:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, flat comic-cell shading, sharp color blocks, and minimal background elements inspired by GTA loading screen artwork.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium streetwear or stylized GTA poster graphics.

GTA STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ GTA-style shading, poster elements, and color blocking
â€¢ Balanced contrast and strong outlines`,cyberpunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, holographic glows, neon lighting, electric fragments, cybernetic accents, and futuristic color palettes.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to futuristic streetwear or modern neon cyberpunk posters.

CYBERPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Cyberpunk neon, holographic shapes, electric effects`,cartoon:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, playful cartoon features, graffiti splashes, fun geometric fragments, and colorful dynamic highlights.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium mascot logos or modern cartoon streetwear graphics.

CARTOON MASCOT STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Cartoon-style exaggeration, graffiti accents`,"3d":`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector-inspired 3D shapes, bold outlines, soft cinematic lighting, glossy materials, and stylized shading.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to collectible 3D figurines or stylized 3D streetwear graphics.

3D STYLIZED STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Stylized 3D lighting and smooth materials`,retro:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, muted retro color palettes, halftone textures, and vintage geometric fragments.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by classic vintage posters and retro streetwear.

RETRO / VINTAGE STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Retro halftones, muted colors, vintage poster shapes`,inkpunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, aggressive ink strokes, splashes, neon drips, expressive brush fragments, and chaotic graffiti elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by expressive inkpunk and street-art fusion posters.

INKPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Ink strokes, splatters, drips, neon graffiti chaos`,steampunk:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, brass and copper tones, gears, goggles, mechanical fragments, and Victorian-inspired steampunk design elements.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to premium steampunk fashion and mechanical poster art.

STEAMPUNK STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Steampunk gears, pipes, goggles, metallic textures`,noir:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, heavy noir shadows, moody lighting, limited palette (black, white, red), and gritty comic-style textures.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics inspired by noir graphic novels and dark comic posters.

NOIR / DARK COMIC STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Noir shadows, dramatic lighting, gritty comic shading`,fantasy:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean vector shapes, bold outlines, magical glows, enchanted particles, ornate fantasy fragments, and dramatic lighting.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to heroic fantasy posters and RPG character art.

FANTASY / RPG STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Magical particles, glowing runes, fantasy lighting`,minimalist:`Create a high-resolution, print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Use clean geometric vector shapes, bold outlines, smooth curves, limited color palette, and modern design fragments.

The design should have a clear silhouette and strong central composition suitable for apparel printing.

Use professional print-design aesthetics similar to minimalist vector posters and premium logo-style art.

MINIMALIST MODERN VECTOR STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Minimal geometric shapes, clean flat colors`,"abstract-geometry":`Create a stunning, high-resolution print-ready illustration of the mascot character (ROKO) ${u} in a square aspect ratio. Surround the mascot character with a dynamic explosion of abstract shapes, colorful liquid splashes, sharp geometric fragments, stars, and vibrant decorative particles. Style reference: explosive, colorful, high-contrast liquid-geometric fusion. 

The design should have a clear silhouette and strong central composition suitable for apparel printing.

ABSTRACT SHAPES & GEOMETRY STYLE
${h}

Design requirements:
â€¢ SQUARE (1:1)
â€¢ Abstract geometric fragments, shards, and layered shapes`},V=M[l]||M.cartoon;X.info("Generating with Nano Banana...");const q=await x(V,"{prompt}",g);q&&(m(q),X.success("Generated successfully!"))}catch(y){console.error("Generation error:",y),X.error(y.message||"Generiranje nije uspjelo. Provjerite API kljuÄ.")}finally{o(!1)}},S=async()=>{n&&t(n)};return e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-purple-100 rounded-full mb-2",children:e.jsx(Ne,{className:"w-6 h-6 text-purple-600"})}),e.jsx("h2",{className:"text-2xl font-bold font-heading",children:"AI Design Studio"}),e.jsx("p",{className:"text-gray-500",children:"Describe your idea and let Nano Banana create it using Roko's reference images."})]}),e.jsx("div",{className:"bg-gray-50 p-3 sm:p-6 rounded-xl border border-gray-100",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"aspect-square w-full max-w-sm mx-auto bg-white rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center overflow-hidden relative",children:c?e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx(ee,{className:"w-10 h-10 animate-spin text-primary mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 font-medium animate-pulse",children:"Creating masterpiece..."})]}):n?e.jsx("img",{src:n,alt:"Generated",className:"w-full h-full object-contain"}):e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(Ne,{className:"w-10 h-10 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Driven by Gemini 2.5"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(la,{selectedStyle:l,onStyleSelect:p}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{value:s,onChange:y=>i(y.target.value),placeholder:"E.g. Roko playing saxophone on the moon...",className:"bg-white",onKeyDown:y=>y.key==="Enter"&&f()}),e.jsx($,{onClick:f,disabled:c||!s.trim(),children:c?e.jsx(ee,{className:"w-4 h-4 animate-spin"}):e.jsx(_s,{className:"w-4 h-4"})})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx($,{variant:"ghost",onClick:r,children:"Cancel"}),e.jsx("div",{className:"space-x-2",children:n&&e.jsxs($,{onClick:S,className:"bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Use This Design"]})})]})]})};var Ce="Switch",[ha,yr]=rt(Ce),[ma,ga]=ha(Ce),ft=a.forwardRef((t,r)=>{const{__scopeSwitch:s,name:i,checked:l,defaultChecked:p,required:c,disabled:o,value:n="on",onCheckedChange:m,form:v,...f}=t,[S,y]=a.useState(null),x=Y(r,h=>y(h)),d=a.useRef(!1),g=S?v||!!S.closest("form"):!0,[b,u]=Oe({prop:l,defaultProp:p??!1,onChange:m,caller:Ce});return e.jsxs(ma,{scope:s,checked:b,disabled:o,children:[e.jsx(F.button,{type:"button",role:"switch","aria-checked":b,"aria-required":c,"data-state":bt(b),"data-disabled":o?"":void 0,disabled:o,value:n,...f,ref:x,onClick:z(t.onClick,h=>{u(M=>!M),g&&(d.current=h.isPropagationStopped(),d.current||h.stopPropagation())})}),g&&e.jsx(yt,{control:S,bubbles:!d.current,name:i,value:n,checked:b,required:c,disabled:o,form:v,style:{transform:"translateX(-100%)"}})]})});ft.displayName=Ce;var xt="SwitchThumb",vt=a.forwardRef((t,r)=>{const{__scopeSwitch:s,...i}=t,l=ga(xt,s);return e.jsx(F.span,{"data-state":bt(l.checked),"data-disabled":l.disabled?"":void 0,...i,ref:r})});vt.displayName=xt;var fa="SwitchBubbleInput",yt=a.forwardRef(({__scopeSwitch:t,control:r,checked:s,bubbles:i=!0,...l},p)=>{const c=a.useRef(null),o=Y(c,p),n=lt(s),m=os(r);return a.useEffect(()=>{const v=c.current;if(!v)return;const f=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(f,"checked").set;if(n!==s&&y){const x=new Event("click",{bubbles:i});y.call(v,s),v.dispatchEvent(x)}},[n,s,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:o,style:{...l.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});yt.displayName=fa;function bt(t){return t?"checked":"unchecked"}var wt=ft,xa=vt;const We=a.forwardRef(({className:t,...r},s)=>e.jsx(wt,{className:G("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...r,ref:s,children:e.jsx(xa,{className:G("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));We.displayName=wt.displayName;const va="/assets/hoodie-string-black%20(2)-6s5mbvA2.png",ya="/assets/hoodie-string-black%20(4)-BeRhyIdq.png",ba="/assets/hoodie-string-grey%20(3)-Bg0TWnno.png",wa="/assets/hoodie-string-grey%20(4)-C-YDg0Fg.png",ja=t=>new Promise((r,s)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const l=document.createElement("canvas");l.width=i.width,l.height=i.height;const p=l.getContext("2d");if(!p){s(new Error("Could not get canvas context"));return}p.drawImage(i,0,0);const c=p.getImageData(0,0,l.width,l.height),o=c.data;for(let n=0;n<o.length;n+=4){const m=o[n],v=o[n+1],f=o[n+2];m<15&&v<15&&f<15&&(o[n+3]=0)}p.putImageData(c,0,0),r(l.toDataURL("image/png"))},i.onerror=l=>s(l),i.src=t}),Sa=({generatedDesign:t,onConfirm:r,onBack:s})=>{const[i,l]=a.useState(null),[p,c]=a.useState("black"),[o,n]=a.useState("front"),[m,v]=a.useState(!1),[f,S]=a.useState({x:50,y:40}),[y,x]=a.useState(30),[d,g]=a.useState({x:50,y:20}),[b,u]=a.useState(15),h=a.useRef(null);a.useEffect(()=>{(async()=>{try{X.info("Nano Banana processing background...");const N=await ja(t);l(N),X.success("Background removed!")}catch(N){console.error(N),X.error("Failed to remove background"),l(t)}})()},[t]);const M=w=>p==="black"?w==="front"?va:ya:w==="front"?ba:wa,V=async()=>{if(!h.current)return;const w=h.current.toDataURL("image/png");r(w)};a.useEffect(()=>{if(!h.current||!i)return;const w=h.current,N=w.getContext("2d");if(!N)return;const T=new Image;T.crossOrigin="anonymous",T.src=M(o==="front"?"front":"back"),T.onload=()=>{w.width=T.width,w.height=T.height,N.drawImage(T,0,0);const D=new Image;D.src=i,D.onload=()=>{const I=T.width*y/100,P=I*D.height/D.width,H=T.width*f.x/100-I/2,C=T.height*f.y/100-P/2;N.drawImage(D,H,C,I,P),N.strokeStyle="rgba(0, 255, 0, 0.5)",N.lineWidth=2,N.strokeRect(H,C,I,P)}}},[i,p,o,f,y]);const[q,k]=a.useState("front");return a.useEffect(()=>{if(!h.current||!i)return;const w=h.current,N=w.getContext("2d");if(!N)return;const T=new Image;T.src=M(q),T.onload=()=>{if(w.width=T.width,w.height=T.height,N.drawImage(T,0,0),q===o){const P=new Image;P.src=i,P.onload=()=>{D(N,P,f,y,!0)}}else if(m){const P=new Image;P.src=is,P.onload=()=>{D(N,P,d,b,!1)}}};const D=(I,P,H,C,A)=>{const _=I.canvas.width*C/100,U=_*P.height/P.width,Q=I.canvas.width*H.x/100-_/2,ce=I.canvas.height*H.y/100-U/2;I.drawImage(P,Q,ce,_,U),I.strokeStyle=A?"rgba(0, 200, 255, 0.5)":"rgba(255, 100, 100, 0.5)",I.setLineDash([5,5]),I.lineWidth=3,I.strokeRect(Q,ce,_,U),I.setLineDash([])}},[q,i,p,o,m,f,y,d,b]),i?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 h-full max-h-[80vh]",children:[e.jsxs("div",{className:"md:col-span-1 space-y-6 overflow-y-auto pr-2",children:[e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"1. Hoodie Options"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:`p-2 border rounded cursor-pointer text-center ${p==="black"?"ring-2 ring-primary border-primary":"hover:bg-white"}`,onClick:()=>c("black"),children:[e.jsx("div",{className:"w-6 h-6 bg-black rounded-full mx-auto mb-1 border border-white"}),e.jsx("span",{className:"text-xs font-medium",children:"Black"})]}),e.jsxs("div",{className:`p-2 border rounded cursor-pointer text-center ${p==="grey"?"ring-2 ring-primary border-primary":"hover:bg-white"}`,onClick:()=>c("grey"),children:[e.jsx("div",{className:"w-6 h-6 bg-gray-400 rounded-full mx-auto mb-1"}),e.jsx("span",{className:"text-xs font-medium",children:"Grey"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"2. Design Placement"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{variant:o==="front"?"default":"outline",onClick:()=>{n("front"),k("front")},className:"flex-1",children:"Front"}),e.jsx($,{variant:o==="back"?"default":"outline",onClick:()=>{n("back"),k("back")},className:"flex-1",children:"Back"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(B,{children:["Add Logo to ",o==="front"?"Back":"Front","?"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Adds 1web-logo-white"})]}),e.jsx(We,{checked:m,onCheckedChange:v})]}),e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"font-bold",children:"3. Adjustments"}),e.jsxs(ct,{value:q,onValueChange:w=>k(w),children:[e.jsxs(dt,{className:"w-full",children:[e.jsx(ue,{value:"front",className:"flex-1",children:"Edit Front"}),e.jsx(ue,{value:"back",className:"flex-1",children:"Edit Back"})]}),e.jsx("div",{className:"pt-4 space-y-4",children:q===o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Editing: Main Design"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(B,{children:"Size"})," ",e.jsxs("span",{className:"text-xs",children:[y,"%"]})]}),e.jsx(ge,{value:[y],onValueChange:([w])=>x(w),min:5,max:80,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(B,{children:"Vertical Position"})," ",e.jsxs("span",{className:"text-xs",children:[f.y,"%"]})]}),e.jsx(ge,{value:[f.y],onValueChange:([w])=>S(N=>({...N,y:w})),min:0,max:100,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(B,{children:"Horizontal Position"})," ",e.jsxs("span",{className:"text-xs",children:[f.x,"%"]})]}),e.jsx(ge,{value:[f.x],onValueChange:([w])=>S(N=>({...N,x:w})),min:0,max:100,step:1})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium text-red-600",children:"Editing: Logo Layer"}),m?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(B,{children:"Size"})," ",e.jsxs("span",{className:"text-xs",children:[b,"%"]})]}),e.jsx(ge,{value:[b],onValueChange:([w])=>u(w),min:2,max:40,step:1})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(B,{children:"Vertical Position"})," ",e.jsxs("span",{className:"text-xs",children:[d.y,"%"]})]}),e.jsx(ge,{value:[d.y],onValueChange:([w])=>g(N=>({...N,y:w})),min:0,max:100,step:1})]})]}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"Logo disabled"})]})})]})]})]}),e.jsxs("div",{className:"md:col-span-2 bg-gray-100 rounded-xl flex items-center justify-center p-4 relative border shadow-inner",children:[e.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:e.jsx("canvas",{ref:h,className:"max-w-full max-h-full shadow-2xl rounded"})}),e.jsxs("div",{className:"absolute bottom-6 right-6 flex gap-2",children:[e.jsxs($,{variant:"secondary",onClick:s,children:[e.jsx(pt,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsxs($,{onClick:V,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"})," Create Product"]})]})]})]}):e.jsx("div",{className:"p-10 text-center",children:"Processing Design..."})};var Na=[" ","Enter","ArrowUp","ArrowDown"],ka=[" ","Enter"],ie="Select",[Ie,Te,Ca]=ls(ie),[he,br]=rt(ie,[Ca,nt]),Pe=nt(),[Ia,se]=he(ie),[Ta,Pa]=he(ie),jt=t=>{const{__scopeSelect:r,children:s,open:i,defaultOpen:l,onOpenChange:p,value:c,defaultValue:o,onValueChange:n,dir:m,name:v,autoComplete:f,disabled:S,required:y,form:x}=t,d=Pe(r),[g,b]=a.useState(null),[u,h]=a.useState(null),[M,V]=a.useState(!1),q=ws(m),[k,w]=Oe({prop:i,defaultProp:l??!1,onChange:p,caller:ie}),[N,T]=Oe({prop:c,defaultProp:o,onChange:n,caller:ie}),D=a.useRef(null),I=g?x||!!g.closest("form"):!0,[P,H]=a.useState(new Set),C=Array.from(P).map(A=>A.props.value).join(";");return e.jsx(js,{...d,children:e.jsxs(Ia,{required:y,scope:r,trigger:g,onTriggerChange:b,valueNode:u,onValueNodeChange:h,valueNodeHasChildren:M,onValueNodeHasChildrenChange:V,contentId:Fe(),value:N,onValueChange:T,open:k,onOpenChange:w,dir:q,triggerPointerDownPosRef:D,disabled:S,children:[e.jsx(Ie.Provider,{scope:r,children:e.jsx(Ta,{scope:t.__scopeSelect,onNativeOptionAdd:a.useCallback(A=>{H(_=>new Set(_).add(A))},[]),onNativeOptionRemove:a.useCallback(A=>{H(_=>{const U=new Set(_);return U.delete(A),U})},[]),children:s})}),I?e.jsxs(Gt,{"aria-hidden":!0,required:y,tabIndex:-1,name:v,autoComplete:f,value:N,onChange:A=>T(A.target.value),disabled:S,form:x,children:[N===void 0?e.jsx("option",{value:""}):null,Array.from(P)]},C):null]})})};jt.displayName=ie;var St="SelectTrigger",Nt=a.forwardRef((t,r)=>{const{__scopeSelect:s,disabled:i=!1,...l}=t,p=Pe(s),c=se(St,s),o=c.disabled||i,n=Y(r,c.onTriggerChange),m=Te(s),v=a.useRef("touch"),[f,S,y]=Wt(d=>{const g=m().filter(h=>!h.disabled),b=g.find(h=>h.value===c.value),u=Yt(g,d,b);u!==void 0&&c.onValueChange(u.value)}),x=d=>{o||(c.onOpenChange(!0),y()),d&&(c.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return e.jsx(cs,{asChild:!0,...p,children:e.jsx(F.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Kt(c.value)?"":void 0,...l,ref:n,onClick:z(l.onClick,d=>{d.currentTarget.focus(),v.current!=="mouse"&&x(d)}),onPointerDown:z(l.onPointerDown,d=>{v.current=d.pointerType;const g=d.target;g.hasPointerCapture(d.pointerId)&&g.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(x(d),d.preventDefault())}),onKeyDown:z(l.onKeyDown,d=>{const g=f.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&S(d.key),!(g&&d.key===" ")&&Na.includes(d.key)&&(x(),d.preventDefault())})})})});Nt.displayName=St;var kt="SelectValue",Ct=a.forwardRef((t,r)=>{const{__scopeSelect:s,className:i,style:l,children:p,placeholder:c="",...o}=t,n=se(kt,s),{onValueNodeHasChildrenChange:m}=n,v=p!==void 0,f=Y(r,n.onValueNodeChange);return te(()=>{m(v)},[m,v]),e.jsx(F.span,{...o,ref:f,style:{pointerEvents:"none"},children:Kt(n.value)?e.jsx(e.Fragment,{children:c}):p})});Ct.displayName=kt;var Ra="SelectIcon",It=a.forwardRef((t,r)=>{const{__scopeSelect:s,children:i,...l}=t;return e.jsx(F.span,{"aria-hidden":!0,...l,ref:r,children:i||"â–¼"})});It.displayName=Ra;var Ea="SelectPortal",Tt=t=>e.jsx(ys,{asChild:!0,...t});Tt.displayName=Ea;var le="SelectContent",Pt=a.forwardRef((t,r)=>{const s=se(le,t.__scopeSelect),[i,l]=a.useState();if(te(()=>{l(new DocumentFragment)},[]),!s.open){const p=i;return p?ot.createPortal(e.jsx(Rt,{scope:t.__scopeSelect,children:e.jsx(Ie.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),p):null}return e.jsx(Et,{...t,ref:r})});Pt.displayName=le;var Z=10,[Rt,ae]=he(le),Ma="SelectContentImpl",Aa=bs("SelectContent.RemoveScroll"),Et=a.forwardRef((t,r)=>{const{__scopeSelect:s,position:i="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:p,onPointerDownOutside:c,side:o,sideOffset:n,align:m,alignOffset:v,arrowPadding:f,collisionBoundary:S,collisionPadding:y,sticky:x,hideWhenDetached:d,avoidCollisions:g,...b}=t,u=se(le,s),[h,M]=a.useState(null),[V,q]=a.useState(null),k=Y(r,j=>M(j)),[w,N]=a.useState(null),[T,D]=a.useState(null),I=Te(s),[P,H]=a.useState(!1),C=a.useRef(!1);a.useEffect(()=>{if(h)return ds(h)},[h]),ps();const A=a.useCallback(j=>{const[L,...K]=I().map(E=>E.ref.current),[O]=K.slice(-1),R=document.activeElement;for(const E of j)if(E===R||(E==null||E.scrollIntoView({block:"nearest"}),E===L&&V&&(V.scrollTop=0),E===O&&V&&(V.scrollTop=V.scrollHeight),E==null||E.focus(),document.activeElement!==R))return},[I,V]),_=a.useCallback(()=>A([w,h]),[A,w,h]);a.useEffect(()=>{P&&_()},[P,_]);const{onOpenChange:U,triggerPointerDownPosRef:Q}=u;a.useEffect(()=>{if(h){let j={x:0,y:0};const L=O=>{var R,E;j={x:Math.abs(Math.round(O.pageX)-(((R=Q.current)==null?void 0:R.x)??0)),y:Math.abs(Math.round(O.pageY)-(((E=Q.current)==null?void 0:E.y)??0))}},K=O=>{j.x<=10&&j.y<=10?O.preventDefault():h.contains(O.target)||U(!1),document.removeEventListener("pointermove",L),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",K,{capture:!0})}}},[h,U,Q]),a.useEffect(()=>{const j=()=>U(!1);return window.addEventListener("blur",j),window.addEventListener("resize",j),()=>{window.removeEventListener("blur",j),window.removeEventListener("resize",j)}},[U]);const[ce,xe]=Wt(j=>{const L=I().filter(R=>!R.disabled),K=L.find(R=>R.ref.current===document.activeElement),O=Yt(L,j,K);O&&setTimeout(()=>O.ref.current.focus())}),Re=a.useCallback((j,L,K)=>{const O=!C.current&&!K;(u.value!==void 0&&u.value===L||O)&&(N(j),O&&(C.current=!0))},[u.value]),Ee=a.useCallback(()=>h==null?void 0:h.focus(),[h]),de=a.useCallback((j,L,K)=>{const O=!C.current&&!K;(u.value!==void 0&&u.value===L||O)&&D(j)},[u.value]),ve=i==="popper"?Le:Mt,me=ve===Le?{side:o,sideOffset:n,align:m,alignOffset:v,arrowPadding:f,collisionBoundary:S,collisionPadding:y,sticky:x,hideWhenDetached:d,avoidCollisions:g}:{};return e.jsx(Rt,{scope:s,content:h,viewport:V,onViewportChange:q,itemRefCallback:Re,selectedItem:w,onItemLeave:Ee,itemTextRefCallback:de,focusSelectedItem:_,selectedItemText:T,position:i,isPositioned:P,searchRef:ce,children:e.jsx(us,{as:Aa,allowPinchZoom:!0,children:e.jsx(hs,{asChild:!0,trapped:u.open,onMountAutoFocus:j=>{j.preventDefault()},onUnmountAutoFocus:z(l,j=>{var L;(L=u.trigger)==null||L.focus({preventScroll:!0}),j.preventDefault()}),children:e.jsx(ms,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:p,onPointerDownOutside:c,onFocusOutside:j=>j.preventDefault(),onDismiss:()=>u.onOpenChange(!1),children:e.jsx(ve,{role:"listbox",id:u.contentId,"data-state":u.open?"open":"closed",dir:u.dir,onContextMenu:j=>j.preventDefault(),...b,...me,onPlaced:()=>H(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:z(b.onKeyDown,j=>{const L=j.ctrlKey||j.altKey||j.metaKey;if(j.key==="Tab"&&j.preventDefault(),!L&&j.key.length===1&&xe(j.key),["ArrowUp","ArrowDown","Home","End"].includes(j.key)){let O=I().filter(R=>!R.disabled).map(R=>R.ref.current);if(["ArrowUp","End"].includes(j.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(j.key)){const R=j.target,E=O.indexOf(R);O=O.slice(E+1)}setTimeout(()=>A(O)),j.preventDefault()}})})})})})})});Et.displayName=Ma;var _a="SelectItemAlignedPosition",Mt=a.forwardRef((t,r)=>{const{__scopeSelect:s,onPlaced:i,...l}=t,p=se(le,s),c=ae(le,s),[o,n]=a.useState(null),[m,v]=a.useState(null),f=Y(r,k=>v(k)),S=Te(s),y=a.useRef(!1),x=a.useRef(!0),{viewport:d,selectedItem:g,selectedItemText:b,focusSelectedItem:u}=c,h=a.useCallback(()=>{if(p.trigger&&p.valueNode&&o&&m&&d&&g&&b){const k=p.trigger.getBoundingClientRect(),w=m.getBoundingClientRect(),N=p.valueNode.getBoundingClientRect(),T=b.getBoundingClientRect();if(p.dir!=="rtl"){const R=T.left-w.left,E=N.left-R,re=k.left-E,ne=k.width+re,Me=Math.max(ne,w.width),Ae=window.innerWidth-Z,_e=Qe(E,[Z,Math.max(Z,Ae-Me)]);o.style.minWidth=ne+"px",o.style.left=_e+"px"}else{const R=w.right-T.right,E=window.innerWidth-N.right-R,re=window.innerWidth-k.right-E,ne=k.width+re,Me=Math.max(ne,w.width),Ae=window.innerWidth-Z,_e=Qe(E,[Z,Math.max(Z,Ae-Me)]);o.style.minWidth=ne+"px",o.style.right=_e+"px"}const D=S(),I=window.innerHeight-Z*2,P=d.scrollHeight,H=window.getComputedStyle(m),C=parseInt(H.borderTopWidth,10),A=parseInt(H.paddingTop,10),_=parseInt(H.borderBottomWidth,10),U=parseInt(H.paddingBottom,10),Q=C+A+P+U+_,ce=Math.min(g.offsetHeight*5,Q),xe=window.getComputedStyle(d),Re=parseInt(xe.paddingTop,10),Ee=parseInt(xe.paddingBottom,10),de=k.top+k.height/2-Z,ve=I-de,me=g.offsetHeight/2,j=g.offsetTop+me,L=C+A+j,K=Q-L;if(L<=de){const R=D.length>0&&g===D[D.length-1].ref.current;o.style.bottom="0px";const E=m.clientHeight-d.offsetTop-d.offsetHeight,re=Math.max(ve,me+(R?Ee:0)+E+_),ne=L+re;o.style.height=ne+"px"}else{const R=D.length>0&&g===D[0].ref.current;o.style.top="0px";const re=Math.max(de,C+d.offsetTop+(R?Re:0)+me)+K;o.style.height=re+"px",d.scrollTop=L-de+d.offsetTop}o.style.margin=`${Z}px 0`,o.style.minHeight=ce+"px",o.style.maxHeight=I+"px",i==null||i(),requestAnimationFrame(()=>y.current=!0)}},[S,p.trigger,p.valueNode,o,m,d,g,b,p.dir,i]);te(()=>h(),[h]);const[M,V]=a.useState();te(()=>{m&&V(window.getComputedStyle(m).zIndex)},[m]);const q=a.useCallback(k=>{k&&x.current===!0&&(h(),u==null||u(),x.current=!1)},[h,u]);return e.jsx(Da,{scope:s,contentWrapper:o,shouldExpandOnScrollRef:y,onScrollButtonChange:q,children:e.jsx("div",{ref:n,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:M},children:e.jsx(F.div,{...l,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});Mt.displayName=_a;var Oa="SelectPopperPosition",Le=a.forwardRef((t,r)=>{const{__scopeSelect:s,align:i="start",collisionPadding:l=Z,...p}=t,c=Pe(s);return e.jsx(gs,{...c,...p,ref:r,align:i,collisionPadding:l,style:{boxSizing:"border-box",...p.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Le.displayName=Oa;var[Da,Ye]=he(le,{}),Be="SelectViewport",At=a.forwardRef((t,r)=>{const{__scopeSelect:s,nonce:i,...l}=t,p=ae(Be,s),c=Ye(Be,s),o=Y(r,p.onViewportChange),n=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(Ie.Slot,{scope:s,children:e.jsx(F.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:z(l.onScroll,m=>{const v=m.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:S}=c;if(S!=null&&S.current&&f){const y=Math.abs(n.current-v.scrollTop);if(y>0){const x=window.innerHeight-Z*2,d=parseFloat(f.style.minHeight),g=parseFloat(f.style.height),b=Math.max(d,g);if(b<x){const u=b+y,h=Math.min(x,u),M=u-h;f.style.height=h+"px",f.style.bottom==="0px"&&(v.scrollTop=M>0?M:0,f.style.justifyContent="flex-end")}}}n.current=v.scrollTop})})})]})});At.displayName=Be;var _t="SelectGroup",[La,Ba]=he(_t),Ua=a.forwardRef((t,r)=>{const{__scopeSelect:s,...i}=t,l=Fe();return e.jsx(La,{scope:s,id:l,children:e.jsx(F.div,{role:"group","aria-labelledby":l,...i,ref:r})})});Ua.displayName=_t;var Ot="SelectLabel",Dt=a.forwardRef((t,r)=>{const{__scopeSelect:s,...i}=t,l=Ba(Ot,s);return e.jsx(F.div,{id:l.id,...i,ref:r})});Dt.displayName=Ot;var ke="SelectItem",[Va,Lt]=he(ke),Bt=a.forwardRef((t,r)=>{const{__scopeSelect:s,value:i,disabled:l=!1,textValue:p,...c}=t,o=se(ke,s),n=ae(ke,s),m=o.value===i,[v,f]=a.useState(p??""),[S,y]=a.useState(!1),x=Y(r,u=>{var h;return(h=n.itemRefCallback)==null?void 0:h.call(n,u,i,l)}),d=Fe(),g=a.useRef("touch"),b=()=>{l||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Va,{scope:s,value:i,disabled:l,textId:d,isSelected:m,onItemTextChange:a.useCallback(u=>{f(h=>h||((u==null?void 0:u.textContent)??"").trim())},[]),children:e.jsx(Ie.ItemSlot,{scope:s,value:i,disabled:l,textValue:v,children:e.jsx(F.div,{role:"option","aria-labelledby":d,"data-highlighted":S?"":void 0,"aria-selected":m&&S,"data-state":m?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...c,ref:x,onFocus:z(c.onFocus,()=>y(!0)),onBlur:z(c.onBlur,()=>y(!1)),onClick:z(c.onClick,()=>{g.current!=="mouse"&&b()}),onPointerUp:z(c.onPointerUp,()=>{g.current==="mouse"&&b()}),onPointerDown:z(c.onPointerDown,u=>{g.current=u.pointerType}),onPointerMove:z(c.onPointerMove,u=>{var h;g.current=u.pointerType,l?(h=n.onItemLeave)==null||h.call(n):g.current==="mouse"&&u.currentTarget.focus({preventScroll:!0})}),onPointerLeave:z(c.onPointerLeave,u=>{var h;u.currentTarget===document.activeElement&&((h=n.onItemLeave)==null||h.call(n))}),onKeyDown:z(c.onKeyDown,u=>{var M;((M=n.searchRef)==null?void 0:M.current)!==""&&u.key===" "||(ka.includes(u.key)&&b(),u.key===" "&&u.preventDefault())})})})})});Bt.displayName=ke;var fe="SelectItemText",Ut=a.forwardRef((t,r)=>{const{__scopeSelect:s,className:i,style:l,...p}=t,c=se(fe,s),o=ae(fe,s),n=Lt(fe,s),m=Pa(fe,s),[v,f]=a.useState(null),S=Y(r,b=>f(b),n.onItemTextChange,b=>{var u;return(u=o.itemTextRefCallback)==null?void 0:u.call(o,b,n.value,n.disabled)}),y=v==null?void 0:v.textContent,x=a.useMemo(()=>e.jsx("option",{value:n.value,disabled:n.disabled,children:y},n.value),[n.disabled,n.value,y]),{onNativeOptionAdd:d,onNativeOptionRemove:g}=m;return te(()=>(d(x),()=>g(x)),[d,g,x]),e.jsxs(e.Fragment,{children:[e.jsx(F.span,{id:n.textId,...p,ref:S}),n.isSelected&&c.valueNode&&!c.valueNodeHasChildren?ot.createPortal(p.children,c.valueNode):null]})});Ut.displayName=fe;var Vt="SelectItemIndicator",qt=a.forwardRef((t,r)=>{const{__scopeSelect:s,...i}=t;return Lt(Vt,s).isSelected?e.jsx(F.span,{"aria-hidden":!0,...i,ref:r}):null});qt.displayName=Vt;var Ue="SelectScrollUpButton",Ht=a.forwardRef((t,r)=>{const s=ae(Ue,t.__scopeSelect),i=Ye(Ue,t.__scopeSelect),[l,p]=a.useState(!1),c=Y(r,i.onScrollButtonChange);return te(()=>{if(s.viewport&&s.isPositioned){let o=function(){const m=n.scrollTop>0;p(m)};const n=s.viewport;return o(),n.addEventListener("scroll",o),()=>n.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),l?e.jsx(Ft,{...t,ref:c,onAutoScroll:()=>{const{viewport:o,selectedItem:n}=s;o&&n&&(o.scrollTop=o.scrollTop-n.offsetHeight)}}):null});Ht.displayName=Ue;var Ve="SelectScrollDownButton",zt=a.forwardRef((t,r)=>{const s=ae(Ve,t.__scopeSelect),i=Ye(Ve,t.__scopeSelect),[l,p]=a.useState(!1),c=Y(r,i.onScrollButtonChange);return te(()=>{if(s.viewport&&s.isPositioned){let o=function(){const m=n.scrollHeight-n.clientHeight,v=Math.ceil(n.scrollTop)<m;p(v)};const n=s.viewport;return o(),n.addEventListener("scroll",o),()=>n.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),l?e.jsx(Ft,{...t,ref:c,onAutoScroll:()=>{const{viewport:o,selectedItem:n}=s;o&&n&&(o.scrollTop=o.scrollTop+n.offsetHeight)}}):null});zt.displayName=Ve;var Ft=a.forwardRef((t,r)=>{const{__scopeSelect:s,onAutoScroll:i,...l}=t,p=ae("SelectScrollButton",s),c=a.useRef(null),o=Te(s),n=a.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return a.useEffect(()=>()=>n(),[n]),te(()=>{var v;const m=o().find(f=>f.ref.current===document.activeElement);(v=m==null?void 0:m.ref.current)==null||v.scrollIntoView({block:"nearest"})},[o]),e.jsx(F.div,{"aria-hidden":!0,...l,ref:r,style:{flexShrink:0,...l.style},onPointerDown:z(l.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:z(l.onPointerMove,()=>{var m;(m=p.onItemLeave)==null||m.call(p),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:z(l.onPointerLeave,()=>{n()})})}),qa="SelectSeparator",$t=a.forwardRef((t,r)=>{const{__scopeSelect:s,...i}=t;return e.jsx(F.div,{"aria-hidden":!0,...i,ref:r})});$t.displayName=qa;var qe="SelectArrow",Ha=a.forwardRef((t,r)=>{const{__scopeSelect:s,...i}=t,l=Pe(s),p=se(qe,s),c=ae(qe,s);return p.open&&c.position==="popper"?e.jsx(fs,{...l,...i,ref:r}):null});Ha.displayName=qe;var za="SelectBubbleInput",Gt=a.forwardRef(({__scopeSelect:t,value:r,...s},i)=>{const l=a.useRef(null),p=Y(i,l),c=lt(r);return a.useEffect(()=>{const o=l.current;if(!o)return;const n=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(n,"value").set;if(c!==r&&v){const f=new Event("change",{bubbles:!0});v.call(o,r),o.dispatchEvent(f)}},[c,r]),e.jsx(F.select,{...s,style:{...xs,...s.style},ref:p,defaultValue:r})});Gt.displayName=za;function Kt(t){return t===""||t===void 0}function Wt(t){const r=vs(t),s=a.useRef(""),i=a.useRef(0),l=a.useCallback(c=>{const o=s.current+c;r(o),function n(m){s.current=m,window.clearTimeout(i.current),m!==""&&(i.current=window.setTimeout(()=>n(""),1e3))}(o)},[r]),p=a.useCallback(()=>{s.current="",window.clearTimeout(i.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(i.current),[]),[s,l,p]}function Yt(t,r,s){const l=r.length>1&&Array.from(r).every(m=>m===r[0])?r[0]:r,p=s?t.indexOf(s):-1;let c=Fa(t,Math.max(p,0));l.length===1&&(c=c.filter(m=>m!==s));const n=c.find(m=>m.textValue.toLowerCase().startsWith(l.toLowerCase()));return n!==s?n:void 0}function Fa(t,r){return t.map((s,i)=>t[(r+i)%t.length])}var $a=jt,Qt=Nt,Ga=Ct,Ka=It,Wa=Tt,Zt=Pt,Ya=At,Xt=Dt,Jt=Bt,Qa=Ut,Za=qt,es=Ht,ts=zt,ss=$t;const tt=$a,st=Ga,He=a.forwardRef(({className:t,children:r,...s},i)=>e.jsxs(Qt,{ref:i,className:G("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[r,e.jsx(Ka,{asChild:!0,children:e.jsx(ut,{className:"h-4 w-4 opacity-50"})})]}));He.displayName=Qt.displayName;const as=a.forwardRef(({className:t,...r},s)=>e.jsx(es,{ref:s,className:G("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(Ds,{className:"h-4 w-4"})}));as.displayName=es.displayName;const rs=a.forwardRef(({className:t,...r},s)=>e.jsx(ts,{ref:s,className:G("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(ut,{className:"h-4 w-4"})}));rs.displayName=ts.displayName;const ze=a.forwardRef(({className:t,children:r,position:s="popper",...i},l)=>e.jsx(Wa,{children:e.jsxs(Zt,{ref:l,className:G("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...i,children:[e.jsx(as,{}),e.jsx(Ya,{className:G("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(rs,{})]})}));ze.displayName=Zt.displayName;const Xa=a.forwardRef(({className:t,...r},s)=>e.jsx(Xt,{ref:s,className:G("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r}));Xa.displayName=Xt.displayName;const pe=a.forwardRef(({className:t,children:r,...s},i)=>e.jsxs(Jt,{ref:i,className:G("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Za,{children:e.jsx(Ge,{className:"h-4 w-4"})})}),e.jsx(Qa,{children:r})]}));pe.displayName=Jt.displayName;const Ja=a.forwardRef(({className:t,...r},s)=>e.jsx(ss,{ref:s,className:G("-mx-1 my-1 h-px bg-muted",t),...r}));Ja.displayName=ss.displayName;const at={Crna:"#231f20",Siva:"#d1d5db",Tirkizna:"#00ab98",Cijan:"#00aeef",Plava:"#387bbf",LjubiÄasta:"#8358a4",Bijela:"#ffffff",Roza:"#e78fab",Mint:"#a1d7c0"},er=({productId:t})=>{const[r,s]=a.useState([]),[i,l]=a.useState(!1),[p,c]=a.useState(!1),{toast:o}=$e(),[n,m]=a.useState({}),v=async()=>{l(!0);try{const x=await Ss(t);s(x);const d={};x.forEach(g=>{d[g.id]={regular_price:g.regular_price,stock_quantity:g.stock_quantity??0,manage_stock:g.manage_stock??!0,sale_price:g.sale_price}}),m(d)}catch(x){console.error(x),o({title:"Error",description:"Failed to load variations",variant:"destructive"})}finally{l(!1)}};a.useEffect(()=>{t&&v()},[t]);const f=(x,d,g)=>{m(b=>({...b,[x]:{...b[x],[d]:g}}))},S=async x=>{c(!0);try{const d=n[x];await Ze(t,x,d),o({title:"Success",description:"Variation updated"}),v()}catch{o({title:"Error",description:"Failed to update variation",variant:"destructive"})}finally{c(!1)}},y=async()=>{c(!0);try{const x=r.map(d=>Ze(t,d.id,n[d.id]));await Promise.all(x),o({title:"Success",description:"All variations updated"}),v()}catch{o({title:"Error",description:"Failed to update some variations",variant:"destructive"})}finally{c(!1)}};return i?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(ee,{className:"animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Variations (",r.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{variant:"outline",size:"sm",onClick:v,title:"Refresh",children:e.jsx(Os,{className:"w-4 h-4"})}),e.jsxs($,{onClick:y,disabled:p,size:"sm",children:[p?e.jsx(ee,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Save All"]})]})]}),e.jsxs("div",{className:"grid gap-4",children:[r.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 border-2 border-dashed rounded-lg",children:"No variations found. Add attributes in WooCommerce first."}),r.map(x=>e.jsx(tr,{variation:x,editData:n[x.id],onChange:(d,g)=>f(x.id,d,g),onSave:()=>S(x.id),saving:p},x.id))]})]})},tr=({variation:t,editData:r,onChange:s,onSave:i,saving:l})=>{var v;const[p,c]=a.useState(!1),o=(v=t.attributes)==null?void 0:v.find(f=>at[f.option]),n=o?at[o.option]:null,m=t.attributes.map(f=>`${f.option}`).join(" / ");return r?e.jsx(oe,{className:"overflow-hidden border-none shadow-md bg-white rounded-2xl transition-all",children:e.jsxs("div",{className:"p-4 sm:p-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[n&&e.jsx("div",{className:"w-5 h-5 rounded-full border border-slate-200 shadow-sm shrink-0",style:{backgroundColor:n}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 text-sm leading-tight",children:m||`Variation #${t.id}`}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["ID: ",t.id]}),e.jsx(ht,{variant:"outline",className:"text-[9px] font-black h-4 px-1 leading-none uppercase tracking-tighter border-slate-200 text-slate-500",children:t.stock_status})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(B,{className:"text-[9px] font-bold uppercase text-slate-400 ml-1",children:"Stock"}),e.jsx(J,{type:"number",className:"w-full sm:w-20 h-10 rounded-full bg-slate-50 border-none font-bold text-center sm:text-right focus:bg-white",value:r.stock_quantity??0,onChange:f=>s("stock_quantity",parseInt(f.target.value)||0)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(B,{className:"text-[9px] font-bold uppercase text-slate-400 ml-1",children:"Price (â‚¬)"}),e.jsx(J,{type:"number",className:"w-full sm:w-20 h-10 rounded-full bg-slate-50 border-none font-bold text-center sm:text-right focus:bg-white",value:r.regular_price,onChange:f=>s("regular_price",f.target.value)})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-50",children:[e.jsx($,{variant:"ghost",size:"sm",onClick:()=>c(!p),className:"text-primary font-bold text-xs uppercase tracking-wider hover:bg-primary/5 rounded-full px-4",children:p?"Skloni detalje":"ViÅ¡e detalja"}),e.jsxs($,{size:"sm",onClick:i,disabled:l,className:"rounded-full font-bold text-xs uppercase tracking-wider px-4 min-w-[100px]",children:[l?e.jsx(ee,{className:"w-3 h-3 animate-spin"}):e.jsx(Se,{className:"w-3 h-3 mr-2"}),"Spremi"]})]}),e.jsx(Bs,{open:p,children:e.jsx(Us,{className:"pt-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{className:"text-[10px] font-bold uppercase text-slate-400 ml-1",children:"Akcijska Cijena (â‚¬)"}),e.jsx(J,{className:"h-10 rounded-full bg-slate-50 border-none font-bold focus:bg-white px-6",value:r.sale_price||"",onChange:f=>s("sale_price",f.target.value),placeholder:"Npr. 19.99"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-6 sm:pt-4 ml-1",children:[e.jsx("div",{className:G("w-10 h-6 rounded-full p-1 cursor-pointer transition-colors duration-200 ease-in-out",r.manage_stock?"bg-primary":"bg-slate-200"),onClick:()=>s("manage_stock",!r.manage_stock),children:e.jsx("div",{className:G("w-4 h-4 bg-white rounded-full transition-transform duration-200 ease-in-out shadow-sm",r.manage_stock?"translate-x-4":"translate-x-0")})}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-500 tracking-wider",children:"Upravljaj zalihama"})]})]})})})]})}):null},sr=({product:t,initialImage:r,onSuccess:s})=>{const[i,l]=a.useState(""),[p,c]=a.useState(""),[o,n]=a.useState(""),[m,v]=a.useState(""),[f,S]=a.useState(""),[y,x]=a.useState(""),[d,g]=a.useState([]),[b,u]=a.useState("instock"),[h,M]=a.useState(!1),[V,q]=a.useState(0),[k,w]=a.useState("simple"),[N,T]=a.useState(!1),{toast:D}=$e(),[I,P]=a.useState("general");a.useEffect(()=>{var C,A;if(t){l(t.name),c(t.sale_price||""),n(t.regular_price||t.price),v(t.description),S(t.short_description),x(((A=(C=t.images)==null?void 0:C[0])==null?void 0:A.src)||"");const _=t.images||[];_.length>1?g(_.slice(1).map(U=>U.src)):g([]),u(t.stock_status),M(t.manage_stock),q(t.stock_quantity??0),w(t.type==="variable"?"variable":"simple")}else l(""),c(""),n(""),v(""),S(""),x(r||""),g([]),u("instock"),M(!0),q(0),w("simple")},[t,r]);const H=async C=>{T(!0);const A=[];y&&A.push({src:y}),d.length>0&&d.forEach(U=>A.push({src:U}));const _={name:i,regular_price:o,description:m,short_description:f,stock_status:b,manage_stock:h,images:A,type:k};h&&k==="simple"&&(_.stock_quantity=V),p&&(_.sale_price=p!==o?p:"");try{t?(await Cs(t.id,_),D({title:"Success",description:"Product updated successfully"})):(await Is(_),D({title:"Success",description:"Product created successfully"})),s()}catch(U){console.error("Product save error:",U),D({title:"Error",description:"Failed to save product. Check permissions.",variant:"destructive"})}finally{T(!1)}};return e.jsxs("div",{className:"space-y-8 pb-32 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-white/80 backdrop-blur-xl p-6 rounded-[2rem] shadow-2xl shadow-slate-200/50 border border-slate-100 mb-8 sticky top-4 z-40 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-2xl bg-primary/10 flex items-center justify-center",children:e.jsx(Ns,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-900 font-heading uppercase tracking-tight",children:t?i:"Novi Proizvod"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ht,{variant:"outline",className:"text-[9px] font-black uppercase tracking-widest border-slate-200 text-slate-400",children:k==="variable"?"Varijabilni":"Jednostavni"}),t&&e.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:["ID: ",t.id]})]})]})]}),e.jsxs($,{onClick:()=>H(),disabled:N,className:"w-full sm:w-auto px-8 h-12 rounded-full font-black text-xs uppercase tracking-widest shadow-xl shadow-primary/20 hover:shadow-primary/30 transition-all flex items-center justify-center",children:[N?e.jsx(ee,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Se,{className:"w-4 h-4 mr-2 stroke-[3]"}),"Spremi Promjene"]})]}),e.jsxs(ct,{value:I,onValueChange:P,className:"w-full",children:[e.jsxs(dt,{className:"grid grid-cols-2 md:grid-cols-4 w-full h-auto mb-10 bg-slate-100/50 p-2 rounded-2xl gap-2",children:[e.jsxs(ue,{value:"general",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(Qs,{className:"w-4 h-4 mr-2"})," OpÄ‡e"]}),e.jsxs(ue,{value:"inventory",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(it,{className:"w-4 h-4 mr-2"})," Zaliha"]}),e.jsxs(ue,{value:"media",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all",children:[e.jsx(ks,{className:"w-4 h-4 mr-2"})," Mediji"]}),e.jsxs(ue,{value:"variations",disabled:k!=="variable",className:"rounded-full h-12 font-bold text-xs uppercase tracking-wider data-[state=active]:bg-white data-[state=active]:shadow-lg data-[state=active]:text-primary transition-all disabled:opacity-30",children:[e.jsx(Fs,{className:"w-4 h-4 mr-2"})," Varijacije"]})]}),e.jsx(je,{value:"general",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(oe,{children:[e.jsxs(ye,{children:[e.jsx(be,{children:"Basic Information"}),e.jsx(Xe,{children:"Product identity and pricing"})]}),e.jsxs(we,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Product Name"}),e.jsx(J,{value:i,onChange:C=>l(C.target.value),placeholder:"e.g. Vintage T-Shirt",className:"text-lg font-medium rounded-full px-6"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Product Type"}),e.jsxs(tt,{value:k,onValueChange:C=>w(C),children:[e.jsx(He,{children:e.jsx(st,{})}),e.jsxs(ze,{children:[e.jsx(pe,{value:"simple",children:"Simple Product"}),e.jsx(pe,{value:"variable",children:"Variable Product (Sizes/Colors)"})]})]})]})]}),k==="simple"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Regular Price (â‚¬)"}),e.jsx(J,{type:"number",value:o,onChange:C=>n(C.target.value),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(B,{children:["Sale Price (â‚¬) ",e.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),e.jsx(J,{type:"number",value:p,onChange:C=>c(C.target.value),placeholder:"0.00"})]})]}):e.jsxs("div",{className:"p-4 bg-blue-50 text-blue-800 rounded-lg border border-blue-100 mb-6",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Vs,{className:"w-4 h-4"}),"Variable Product Pricing"]}),e.jsxs("p",{className:"text-sm mt-1 opacity-90",children:["Prices for variable products are managed in the ",e.jsx("strong",{children:"Variations"})," tab."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Short Description"}),e.jsx("div",{className:"h-44 mb-8",children:e.jsx(et,{theme:"snow",value:f,onChange:S,className:"h-32 bg-white"})})]}),e.jsxs("div",{className:"space-y-2 pt-4",children:[e.jsx(B,{children:"Full Description"}),e.jsx("div",{className:"h-80 mb-8",children:e.jsx(et,{theme:"snow",value:m,onChange:v,className:"h-64 bg-white"})})]})]})]})}),e.jsx(je,{value:"inventory",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(oe,{children:[e.jsx(ye,{children:e.jsx(be,{children:"Inventory Management"})}),e.jsxs(we,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{children:[e.jsx(B,{className:"text-base",children:"Manage Stock Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable stock management at product level"})]}),e.jsx(We,{checked:h,onCheckedChange:M})]}),h&&k==="simple"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Stock Quantity"}),e.jsx(J,{type:"number",value:V,onChange:C=>q(parseInt(C.target.value)),className:"max-w-xs"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Stock Status"}),e.jsxs(tt,{value:b,onValueChange:u,children:[e.jsx(He,{className:"max-w-xs",children:e.jsx(st,{})}),e.jsxs(ze,{children:[e.jsx(pe,{value:"instock",children:"In Stock"}),e.jsx(pe,{value:"outofstock",children:"Out of Stock"}),e.jsx(pe,{value:"onbackorder",children:"On Backorder"})]})]})]})]})]})}),e.jsx(je,{value:"media",className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(oe,{children:[e.jsx(ye,{children:e.jsx(be,{children:"Product Images"})}),e.jsxs(we,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Main Product Image"}),e.jsx(Je,{value:y,onChange:x})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"Gallery Images"}),e.jsx(Je,{value:d,onChange:g,multiple:!0})]})]})]})}),e.jsx(je,{value:"variations",className:"animate-in fade-in slide-in-from-bottom-2 duration-500",children:e.jsxs(oe,{children:[e.jsxs(ye,{children:[e.jsx(be,{children:"Variations"}),e.jsx(Xe,{children:"Manage stock and prices for each variation (Size, Color, etc.)"})]}),e.jsx(we,{children:t&&k==="variable"?t.type==="variable"?e.jsx(er,{productId:t.id}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-50 text-yellow-800 rounded-full",children:e.jsx(Se,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Save Changes First"}),e.jsx("p",{className:"text-gray-500 max-w-sm mx-auto",children:"You've changed the product type to Variable. Please save the product to enable variation management."})]}),e.jsx($,{onClick:()=>H(),disabled:N,children:N?e.jsx(ee,{className:"w-4 h-4 animate-spin mr-2"}):"Save & Continue"})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'Set product type to "Variable Product" under General tab to manage variations.'})})]})})]})]})},wr=()=>{const{id:t}=Ts(),r=Ps(),{toast:s}=$e(),[i,l]=a.useState(!1),[p,c]=a.useState(null),[o,n]=a.useState("selection"),[m,v]=a.useState("");a.useEffect(()=>{t?(f(parseInt(t)),n("editor")):n("selection")},[t]);const f=async y=>{l(!0);try{const x=await Rs(y);c(x)}catch(x){console.error(x),s({title:"Error",description:"Could not load product",variant:"destructive"}),r("/admin/products")}finally{l(!1)}},S=()=>{r("/admin/products")};return i?e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx(ee,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"max-w-5xl mx-auto space-y-10 animate-fade-in pb-20",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4 border-b border-slate-200/60 pb-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{variant:"outline",size:"icon",onClick:()=>r("/admin/products"),className:"rounded-full h-10 w-10 md:h-12 md:w-12 border-slate-200 hover:bg-slate-50 shrink-0",children:e.jsx(pt,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl md:text-3xl lg:text-4xl font-black font-heading text-slate-900 tracking-tight uppercase leading-tight",children:t?"UREDI PROIZVOD":"NOVI PROIZVOD"}),e.jsx("p",{className:"text-slate-500 text-sm md:text-lg font-medium mt-1",children:"Konfigurirajte detalje proizvoda i zalihe."})]})]})}),e.jsx(oe,{className:"border-none shadow-xl shadow-slate-200/40 bg-white rounded-[2rem] md:rounded-[2.5rem] overflow-hidden",children:e.jsxs("div",{className:"p-4 md:p-8 lg:p-10",children:[!t&&o==="selection"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 py-8",children:[e.jsxs("div",{className:"border-2 border-dashed border-slate-100 rounded-[2rem] p-10 text-center hover:border-blue-500/30 hover:bg-blue-50/30 cursor-pointer transition-all group shadow-sm hover:shadow-md",onClick:()=>n("generator"),children:[e.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-200 transition-colors",children:e.jsx(Ne,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Generate with AI"}),e.jsx("p",{className:"text-gray-500",children:"Use Nano Banana to create a unique design based on Roko's style."})]}),e.jsxs("div",{className:"border-2 border-dashed border-slate-100 rounded-[2rem] p-10 text-center hover:border-slate-300 hover:bg-slate-50/50 cursor-pointer transition-all group shadow-sm hover:shadow-md",onClick:()=>n("editor"),children:[e.jsx("div",{className:"bg-gray-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-gray-200 transition-colors",children:e.jsx(Ls,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Manual Upload"}),e.jsx("p",{className:"text-gray-500",children:"Skip generation and upload your own product images manually."})]})]}),!t&&o==="generator"&&e.jsx(ua,{onImageSelect:y=>{v(y),n("preview")},onCancel:()=>n("selection")}),!t&&o==="preview"&&e.jsx(Sa,{generatedDesign:m,onConfirm:y=>{v(y),n("editor")},onBack:()=>n("generator")}),(t||o==="editor")&&e.jsx(sr,{product:p,initialImage:m,onSuccess:S})]})})]})};export{wr as default};
